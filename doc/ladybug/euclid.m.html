<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>ladybug.euclid API documentation</title>
    <meta name="description" content="euclid graphics maths module

Documentation and tests are included in the file "euclid.txt", or onli..." />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>

  <!-- highlight.js for highlighting source code. -->
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/styles/default.min.css">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/highlight.min.js"></script>

  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 0.9em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    margin-left: 25%;
    max-width: 90%;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    position: fixed;
    height: 100%;
    width: 25%;
    float: left;
    padding: 30px;
    overflow-x: hidden;
    overflow-y: auto;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; }

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;

      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: auto;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }

  .desc {
    white-space: pre-wrap;
  }

  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
        position: inherit;
        float: none;
        width: auto;
    }
    #content {
      width: 95%;
      margin-left: auto;
      border-left: none;
      padding: 30px;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>


  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">


    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#ladybug.euclid.Circle">Circle</a></span>
        
          
  <ul>
    <li class="mono"><a href="#ladybug.euclid.Circle.__init__">__init__</a></li>
    <li class="mono"><a href="#ladybug.euclid.Circle.connect">connect</a></li>
    <li class="mono"><a href="#ladybug.euclid.Circle.copy">copy</a></li>
    <li class="mono"><a href="#ladybug.euclid.Circle.distance">distance</a></li>
    <li class="mono"><a href="#ladybug.euclid.Circle.intersect">intersect</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#ladybug.euclid.Geometry">Geometry</a></span>
        
          
  <ul>
    <li class="mono"><a href="#ladybug.euclid.Geometry.connect">connect</a></li>
    <li class="mono"><a href="#ladybug.euclid.Geometry.distance">distance</a></li>
    <li class="mono"><a href="#ladybug.euclid.Geometry.intersect">intersect</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#ladybug.euclid.Line2">Line2</a></span>
        
          
  <ul>
    <li class="mono"><a href="#ladybug.euclid.Line2.__init__">__init__</a></li>
    <li class="mono"><a href="#ladybug.euclid.Line2.connect">connect</a></li>
    <li class="mono"><a href="#ladybug.euclid.Line2.copy">copy</a></li>
    <li class="mono"><a href="#ladybug.euclid.Line2.distance">distance</a></li>
    <li class="mono"><a href="#ladybug.euclid.Line2.intersect">intersect</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#ladybug.euclid.Line3">Line3</a></span>
        
          
  <ul>
    <li class="mono"><a href="#ladybug.euclid.Line3.__init__">__init__</a></li>
    <li class="mono"><a href="#ladybug.euclid.Line3.connect">connect</a></li>
    <li class="mono"><a href="#ladybug.euclid.Line3.copy">copy</a></li>
    <li class="mono"><a href="#ladybug.euclid.Line3.intersect">intersect</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#ladybug.euclid.LineSegment2">LineSegment2</a></span>
        
          
  <ul>
    <li class="mono"><a href="#ladybug.euclid.LineSegment2.__init__">__init__</a></li>
    <li class="mono"><a href="#ladybug.euclid.LineSegment2.connect">connect</a></li>
    <li class="mono"><a href="#ladybug.euclid.LineSegment2.copy">copy</a></li>
    <li class="mono"><a href="#ladybug.euclid.LineSegment2.distance">distance</a></li>
    <li class="mono"><a href="#ladybug.euclid.LineSegment2.intersect">intersect</a></li>
    <li class="mono"><a href="#ladybug.euclid.LineSegment2.magnitude_squared">magnitude_squared</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#ladybug.euclid.LineSegment3">LineSegment3</a></span>
        
          
  <ul>
    <li class="mono"><a href="#ladybug.euclid.LineSegment3.__init__">__init__</a></li>
    <li class="mono"><a href="#ladybug.euclid.LineSegment3.connect">connect</a></li>
    <li class="mono"><a href="#ladybug.euclid.LineSegment3.copy">copy</a></li>
    <li class="mono"><a href="#ladybug.euclid.LineSegment3.intersect">intersect</a></li>
    <li class="mono"><a href="#ladybug.euclid.LineSegment3.magnitude_squared">magnitude_squared</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#ladybug.euclid.Matrix3">Matrix3</a></span>
        
          
  <ul>
    <li class="mono"><a href="#ladybug.euclid.Matrix3.__init__">__init__</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix3.copy">copy</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix3.determinant">determinant</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix3.identity">identity</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix3.inverse">inverse</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix3.new_identity">new_identity</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix3.new_rotate">new_rotate</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix3.new_scale">new_scale</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix3.new_translate">new_translate</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix3.rotate">rotate</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix3.scale">scale</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix3.translate">translate</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#ladybug.euclid.Matrix4">Matrix4</a></span>
        
          
  <ul>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.__init__">__init__</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.copy">copy</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.determinant">determinant</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.identity">identity</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.inverse">inverse</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.new">new</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.new_identity">new_identity</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.new_look_at">new_look_at</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.new_perspective">new_perspective</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.new_rotate_axis">new_rotate_axis</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.new_rotate_euler">new_rotate_euler</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.new_rotate_triple_axis">new_rotate_triple_axis</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.new_rotatex">new_rotatex</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.new_rotatey">new_rotatey</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.new_rotatez">new_rotatez</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.new_scale">new_scale</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.new_translate">new_translate</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.rotate_axis">rotate_axis</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.rotate_euler">rotate_euler</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.rotate_triple_axis">rotate_triple_axis</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.rotatex">rotatex</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.rotatey">rotatey</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.rotatez">rotatez</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.scale">scale</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.transform">transform</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.translate">translate</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.transpose">transpose</a></li>
    <li class="mono"><a href="#ladybug.euclid.Matrix4.transposed">transposed</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#ladybug.euclid.Plane">Plane</a></span>
        
          
  <ul>
    <li class="mono"><a href="#ladybug.euclid.Plane.__init__">__init__</a></li>
    <li class="mono"><a href="#ladybug.euclid.Plane.connect">connect</a></li>
    <li class="mono"><a href="#ladybug.euclid.Plane.copy">copy</a></li>
    <li class="mono"><a href="#ladybug.euclid.Plane.intersect">intersect</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#ladybug.euclid.Point2">Point2</a></span>
        
          
  <ul>
    <li class="mono"><a href="#ladybug.euclid.Point2.__init__">__init__</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point2.angle">angle</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point2.connect">connect</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point2.copy">copy</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point2.cross">cross</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point2.distance">distance</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point2.dot">dot</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point2.intersect">intersect</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point2.magnitude">magnitude</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point2.magnitude_squared">magnitude_squared</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point2.normalize">normalize</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point2.normalized">normalized</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point2.project">project</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point2.reflect">reflect</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#ladybug.euclid.Point3">Point3</a></span>
        
          
  <ul>
    <li class="mono"><a href="#ladybug.euclid.Point3.__init__">__init__</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point3.angle">angle</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point3.connect">connect</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point3.copy">copy</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point3.cross">cross</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point3.distance">distance</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point3.dot">dot</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point3.flip">flip</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point3.flipped">flipped</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point3.intersect">intersect</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point3.magnitude">magnitude</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point3.magnitude_squared">magnitude_squared</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point3.normalize">normalize</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point3.normalized">normalized</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point3.project">project</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point3.reflect">reflect</a></li>
    <li class="mono"><a href="#ladybug.euclid.Point3.rotate_around">rotate_around</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#ladybug.euclid.Quaternion">Quaternion</a></span>
        
          
  <ul>
    <li class="mono"><a href="#ladybug.euclid.Quaternion.__init__">__init__</a></li>
    <li class="mono"><a href="#ladybug.euclid.Quaternion.conjugated">conjugated</a></li>
    <li class="mono"><a href="#ladybug.euclid.Quaternion.copy">copy</a></li>
    <li class="mono"><a href="#ladybug.euclid.Quaternion.get_angle_axis">get_angle_axis</a></li>
    <li class="mono"><a href="#ladybug.euclid.Quaternion.get_euler">get_euler</a></li>
    <li class="mono"><a href="#ladybug.euclid.Quaternion.get_matrix">get_matrix</a></li>
    <li class="mono"><a href="#ladybug.euclid.Quaternion.identity">identity</a></li>
    <li class="mono"><a href="#ladybug.euclid.Quaternion.magnitude">magnitude</a></li>
    <li class="mono"><a href="#ladybug.euclid.Quaternion.magnitude_squared">magnitude_squared</a></li>
    <li class="mono"><a href="#ladybug.euclid.Quaternion.new_identity">new_identity</a></li>
    <li class="mono"><a href="#ladybug.euclid.Quaternion.new_interpolate">new_interpolate</a></li>
    <li class="mono"><a href="#ladybug.euclid.Quaternion.new_rotate_axis">new_rotate_axis</a></li>
    <li class="mono"><a href="#ladybug.euclid.Quaternion.new_rotate_euler">new_rotate_euler</a></li>
    <li class="mono"><a href="#ladybug.euclid.Quaternion.new_rotate_matrix">new_rotate_matrix</a></li>
    <li class="mono"><a href="#ladybug.euclid.Quaternion.normalize">normalize</a></li>
    <li class="mono"><a href="#ladybug.euclid.Quaternion.normalized">normalized</a></li>
    <li class="mono"><a href="#ladybug.euclid.Quaternion.rotate_axis">rotate_axis</a></li>
    <li class="mono"><a href="#ladybug.euclid.Quaternion.rotate_euler">rotate_euler</a></li>
    <li class="mono"><a href="#ladybug.euclid.Quaternion.rotate_matrix">rotate_matrix</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#ladybug.euclid.Ray2">Ray2</a></span>
        
          
  <ul>
    <li class="mono"><a href="#ladybug.euclid.Ray2.__init__">__init__</a></li>
    <li class="mono"><a href="#ladybug.euclid.Ray2.connect">connect</a></li>
    <li class="mono"><a href="#ladybug.euclid.Ray2.copy">copy</a></li>
    <li class="mono"><a href="#ladybug.euclid.Ray2.distance">distance</a></li>
    <li class="mono"><a href="#ladybug.euclid.Ray2.intersect">intersect</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#ladybug.euclid.Ray3">Ray3</a></span>
        
          
  <ul>
    <li class="mono"><a href="#ladybug.euclid.Ray3.__init__">__init__</a></li>
    <li class="mono"><a href="#ladybug.euclid.Ray3.connect">connect</a></li>
    <li class="mono"><a href="#ladybug.euclid.Ray3.copy">copy</a></li>
    <li class="mono"><a href="#ladybug.euclid.Ray3.intersect">intersect</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#ladybug.euclid.Sphere">Sphere</a></span>
        
          
  <ul>
    <li class="mono"><a href="#ladybug.euclid.Sphere.__init__">__init__</a></li>
    <li class="mono"><a href="#ladybug.euclid.Sphere.connect">connect</a></li>
    <li class="mono"><a href="#ladybug.euclid.Sphere.copy">copy</a></li>
    <li class="mono"><a href="#ladybug.euclid.Sphere.intersect">intersect</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#ladybug.euclid.Vector2">Vector2</a></span>
        
          
  <ul>
    <li class="mono"><a href="#ladybug.euclid.Vector2.__init__">__init__</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector2.angle">angle</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector2.copy">copy</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector2.cross">cross</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector2.dot">dot</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector2.magnitude">magnitude</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector2.magnitude_squared">magnitude_squared</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector2.normalize">normalize</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector2.normalized">normalized</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector2.project">project</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector2.reflect">reflect</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#ladybug.euclid.Vector3">Vector3</a></span>
        
          
  <ul>
    <li class="mono"><a href="#ladybug.euclid.Vector3.__init__">__init__</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector3.angle">angle</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector3.copy">copy</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector3.cross">cross</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector3.dot">dot</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector3.flip">flip</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector3.flipped">flipped</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector3.magnitude">magnitude</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector3.magnitude_squared">magnitude_squared</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector3.normalize">normalize</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector3.normalized">normalized</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector3.project">project</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector3.reflect">reflect</a></li>
    <li class="mono"><a href="#ladybug.euclid.Vector3.rotate_around">rotate_around</a></li>
  </ul>

        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">ladybug.euclid</span> module</h1>
  <p>euclid graphics maths module</p>
<p>Documentation and tests are included in the file "euclid.txt", or online
at http://code.google.com/p/pyeuclid</p>
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid" class="source">
    <pre><code>#!/usr/bin/env python
#
# euclid graphics maths module
#
# Copyright (c) 2006 Alex Holkner
# Alex.Holkner@mail.google.com
# https://code.google.com/p/pyeuclid/
#
# This library is free software; you can redistribute it and/or modify it
# under the terms of the GNU Lesser General Public License as published by the
# Free Software Foundation; either version 2.1 of the License, or (at your
# option) any later version.
#
# This library is distributed in the hope that it will be useful, but WITHOUT
# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Lesser General Public License
# for more details.
#
# You should have received a copy of the GNU Lesser General Public License
# along with this library; if not, write to the Free Software Foundation,
# Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301 USA

'''euclid graphics maths module

Documentation and tests are included in the file "euclid.txt", or online
at http://code.google.com/p/pyeuclid
'''

__docformat__ = 'restructuredtext'
__version__ = '$Id$'
__revision__ = '$Revision$'

import math
import operator
import types

# Some magic here.  If _use_slots is True, the classes will derive from
# object and will define a __slots__ class variable.  If _use_slots is
# False, classes will be old-style and will not define __slots__.
#
# _use_slots = True:   Memory efficient, probably faster in future versions
#                      of Python, "better".
# _use_slots = False:  Ordinary classes, much faster than slots in current
#                      versions of Python (2.4 and 2.5).
_use_slots = True

# If True, allows components of Vector2 and Vector3 to be set via swizzling;
# e.g.  v.xyz = (1, 2, 3).  This is much, much slower than the more verbose
# v.x = 1; v.y = 2; v.z = 3,  and slows down ordinary element setting as
# well.  Recommended setting is False.
_enable_swizzle_set = False

# Requires class to derive from object.
if _enable_swizzle_set:
    _use_slots = True

# Implement _use_slots magic.
class _EuclidMetaclass(type):
    def __new__(cls, name, bases, dct):
        if '__slots__' in dct:
            dct['__getstate__'] = cls._create_getstate(dct['__slots__'])
            dct['__setstate__'] = cls._create_setstate(dct['__slots__'])
        if _use_slots:
            return type.__new__(cls, name, bases + (object,), dct)
        else:
            if '__slots__' in dct:
                del dct['__slots__']
            return types.ClassType.__new__(types.ClassType, name, bases, dct)

    @classmethod
    def _create_getstate(cls, slots):
        def __getstate__(self):
            d = {}
            for slot in slots:
                d[slot] = getattr(self, slot)
            return d
        return __getstate__

    @classmethod
    def _create_setstate(cls, slots):
        def __setstate__(self, state):
            for name, value in state.items():
                setattr(self, name, value)
        return __setstate__

__metaclass__ = _EuclidMetaclass

class Vector2:
    __slots__ = ['x', 'y']
    __hash__ = None

    def __init__(self, x=0, y=0):
        self.x = x
        self.y = y

    def __copy__(self):
        return self.__class__(self.x, self.y)

    copy = __copy__

    def __repr__(self):
        return 'Vector2(%.2f, %.2f)' % (self.x, self.y)

    def __eq__(self, other):
        if isinstance(other, Vector2):
            return self.x == other.x and \
                   self.y == other.y
        else:
            assert hasattr(other, '__len__') and len(other) == 2
            return self.x == other[0] and \
                   self.y == other[1]

    def __ne__(self, other):
        return not self.__eq__(other)

    def __nonzero__(self):
        return self.x != 0 or self.y != 0

    def __len__(self):
        return 2

    def __getitem__(self, key):
        return (self.x, self.y)[key]

    def __setitem__(self, key, value):
        l = [self.x, self.y]
        l[key] = value
        self.x, self.y = l

    def __iter__(self):
        return iter((self.x, self.y))

    def __getattr__(self, name):
        try:
            return tuple([(self.x, self.y)['xy'.index(c)] \
                          for c in name])
        except ValueError:
            raise AttributeError, name

    if _enable_swizzle_set:
        # This has detrimental performance on ordinary setattr as well
        # if enabled
        def __setattr__(self, name, value):
            if len(name) == 1:
                object.__setattr__(self, name, value)
            else:
                try:
                    l = [self.x, self.y]
                    for c, v in map(None, name, value):
                        l['xy'.index(c)] = v
                    self.x, self.y = l
                except ValueError:
                    raise AttributeError, name

    def __add__(self, other):
        if isinstance(other, Vector2):
            # Vector + Vector -> Vector
            # Vector + Point -> Point
            # Point + Point -> Vector
            if self.__class__ is other.__class__:
                _class = Vector2
            else:
                _class = Point2
            return _class(self.x + other.x,
                          self.y + other.y)
        else:
            assert hasattr(other, '__len__') and len(other) == 2
            return Vector2(self.x + other[0],
                           self.y + other[1])
    __radd__ = __add__

    def __iadd__(self, other):
        if isinstance(other, Vector2):
            self.x += other.x
            self.y += other.y
        else:
            self.x += other[0]
            self.y += other[1]
        return self

    def __sub__(self, other):
        if isinstance(other, Vector2):
            # Vector - Vector -> Vector
            # Vector - Point -> Point
            # Point - Point -> Vector
            if self.__class__ is other.__class__:
                _class = Vector2
            else:
                _class = Point2
            return _class(self.x - other.x,
                          self.y - other.y)
        else:
            assert hasattr(other, '__len__') and len(other) == 2
            return Vector2(self.x - other[0],
                           self.y - other[1])


    def __rsub__(self, other):
        if isinstance(other, Vector2):
            return Vector2(other.x - self.x,
                           other.y - self.y)
        else:
            assert hasattr(other, '__len__') and len(other) == 2
            return Vector2(other.x - self[0],
                           other.y - self[1])

    def __mul__(self, other):
        assert type(other) in (int, long, float)
        return Vector2(self.x * other,
                       self.y * other)

    __rmul__ = __mul__

    def __imul__(self, other):
        assert type(other) in (int, long, float)
        self.x *= other
        self.y *= other
        return self

    def __div__(self, other):
        assert type(other) in (int, long, float)
        return Vector2(operator.div(self.x, other),
                       operator.div(self.y, other))


    def __rdiv__(self, other):
        assert type(other) in (int, long, float)
        return Vector2(operator.div(other, self.x),
                       operator.div(other, self.y))

    def __floordiv__(self, other):
        assert type(other) in (int, long, float)
        return Vector2(operator.floordiv(self.x, other),
                       operator.floordiv(self.y, other))


    def __rfloordiv__(self, other):
        assert type(other) in (int, long, float)
        return Vector2(operator.floordiv(other, self.x),
                       operator.floordiv(other, self.y))

    def __truediv__(self, other):
        assert type(other) in (int, long, float)
        return Vector2(operator.truediv(self.x, other),
                       operator.truediv(self.y, other))


    def __rtruediv__(self, other):
        assert type(other) in (int, long, float)
        return Vector2(operator.truediv(other, self.x),
                       operator.truediv(other, self.y))

    def __neg__(self):
        return Vector2(-self.x,
                        -self.y)

    __pos__ = __copy__

    def __abs__(self):
        return math.sqrt(self.x ** 2 + \
                         self.y ** 2)

    magnitude = __abs__

    def magnitude_squared(self):
        return self.x ** 2 + \
               self.y ** 2

    def normalize(self):
        d = self.magnitude()
        if d:
            self.x /= d
            self.y /= d
        return self

    def normalized(self):
        d = self.magnitude()
        if d:
            return Vector2(self.x / d,
                           self.y / d)
        return self.copy()

    def dot(self, other):
        assert isinstance(other, Vector2)
        return self.x * other.x + \
               self.y * other.y

    def cross(self):
        return Vector2(self.y, -self.x)

    def reflect(self, normal):
        # assume normal is normalized
        assert isinstance(normal, Vector2)
        d = 2 * (self.x * normal.x + self.y * normal.y)
        return Vector2(self.x - d * normal.x,
                       self.y - d * normal.y)

    def angle(self, other):
        """Return the angle to the vector other"""
        return math.acos(self.dot(other) / (self.magnitude()*other.magnitude()))

    def project(self, other):
        """Return one vector projected on the vector other"""
        n = other.normalized()
        return self.dot(n)*n

class Vector3:
    __slots__ = ['x', 'y', 'z']
    __hash__ = None

    def __init__(self, x=0, y=0, z=0):
        self.x = x
        self.y = y
        self.z = z

    def __copy__(self):
        return self.__class__(self.x, self.y, self.z)

    copy = __copy__

    def __repr__(self):
        return 'Vector3(%.2f, %.2f, %.2f)' % (self.x,
                                              self.y,
                                              self.z)

    def __eq__(self, other):
        if isinstance(other, Vector3):
            return self.x == other.x and \
                   self.y == other.y and \
                   self.z == other.z
        else:
            assert hasattr(other, '__len__') and len(other) == 3
            return self.x == other[0] and \
                   self.y == other[1] and \
                   self.z == other[2]

    def __ne__(self, other):
        return not self.__eq__(other)

    def __nonzero__(self):
        return self.x != 0 or self.y != 0 or self.z != 0

    def __len__(self):
        return 3

    def __getitem__(self, key):
        return (self.x, self.y, self.z)[key]

    def __setitem__(self, key, value):
        l = [self.x, self.y, self.z]
        l[key] = value
        self.x, self.y, self.z = l

    def __iter__(self):
        return iter((self.x, self.y, self.z))

    def __getattr__(self, name):
        try:
            return tuple([(self.x, self.y, self.z)['xyz'.index(c)] \
                          for c in name])
        except ValueError:
            raise AttributeError, name

    if _enable_swizzle_set:
        # This has detrimental performance on ordinary setattr as well
        # if enabled
        def __setattr__(self, name, value):
            if len(name) == 1:
                object.__setattr__(self, name, value)
            else:
                try:
                    l = [self.x, self.y, self.z]
                    for c, v in map(None, name, value):
                        l['xyz'.index(c)] = v
                    self.x, self.y, self.z = l
                except ValueError:
                    raise AttributeError, name

    def __add__(self, other):
        if isinstance(other, Vector3):
            # Vector + Vector -> Vector
            # Vector + Point -> Point
            # Point + Point -> Vector
            if self.__class__ is other.__class__:
                _class = Vector3
            else:
                _class = Point3
            return _class(self.x + other.x,
                          self.y + other.y,
                          self.z + other.z)
        else:
            assert hasattr(other, '__len__') and len(other) == 3
            return Vector3(self.x + other[0],
                           self.y + other[1],
                           self.z + other[2])
    __radd__ = __add__

    def __iadd__(self, other):
        if isinstance(other, Vector3):
            self.x += other.x
            self.y += other.y
            self.z += other.z
        else:
            self.x += other[0]
            self.y += other[1]
            self.z += other[2]
        return self

    def __sub__(self, other):
        if isinstance(other, Vector3):
            # Vector - Vector -> Vector
            # Vector - Point -> Point
            # Point - Point -> Vector
            if self.__class__ is other.__class__:
                _class = Vector3
            else:
                _class = Point3
            return Vector3(self.x - other.x,
                           self.y - other.y,
                           self.z - other.z)
        else:
            assert hasattr(other, '__len__') and len(other) == 3
            return Vector3(self.x - other[0],
                           self.y - other[1],
                           self.z - other[2])


    def __rsub__(self, other):
        if isinstance(other, Vector3):
            return Vector3(other.x - self.x,
                           other.y - self.y,
                           other.z - self.z)
        else:
            assert hasattr(other, '__len__') and len(other) == 3
            return Vector3(other.x - self[0],
                           other.y - self[1],
                           other.z - self[2])

    def __mul__(self, other):
        if isinstance(other, Vector3):
            # TODO component-wise mul/div in-place and on Vector2; docs.
            if self.__class__ is Point3 or other.__class__ is Point3:
                _class = Point3
            else:
                _class = Vector3
            return _class(self.x * other.x,
                          self.y * other.y,
                          self.z * other.z)
        else:
            assert type(other) in (int, long, float)
            return Vector3(self.x * other,
                           self.y * other,
                           self.z * other)

    __rmul__ = __mul__

    def __imul__(self, other):
        assert type(other) in (int, long, float)
        self.x *= other
        self.y *= other
        self.z *= other
        return self

    def __div__(self, other):
        assert type(other) in (int, long, float)
        return Vector3(operator.div(self.x, other),
                       operator.div(self.y, other),
                       operator.div(self.z, other))


    def __rdiv__(self, other):
        assert type(other) in (int, long, float)
        return Vector3(operator.div(other, self.x),
                       operator.div(other, self.y),
                       operator.div(other, self.z))

    def __floordiv__(self, other):
        assert type(other) in (int, long, float)
        return Vector3(operator.floordiv(self.x, other),
                       operator.floordiv(self.y, other),
                       operator.floordiv(self.z, other))


    def __rfloordiv__(self, other):
        assert type(other) in (int, long, float)
        return Vector3(operator.floordiv(other, self.x),
                       operator.floordiv(other, self.y),
                       operator.floordiv(other, self.z))

    def __truediv__(self, other):
        assert type(other) in (int, long, float)
        return Vector3(operator.truediv(self.x, other),
                       operator.truediv(self.y, other),
                       operator.truediv(self.z, other))


    def __rtruediv__(self, other):
        assert type(other) in (int, long, float)
        return Vector3(operator.truediv(other, self.x),
                       operator.truediv(other, self.y),
                       operator.truediv(other, self.z))

    def __neg__(self):
        return Vector3(-self.x,
                        -self.y,
                        -self.z)

    __pos__ = __copy__

    def __abs__(self):
        return math.sqrt(self.x ** 2 + \
                         self.y ** 2 + \
                         self.z ** 2)

    magnitude = __abs__

    def magnitude_squared(self):
        return self.x ** 2 + \
               self.y ** 2 + \
               self.z ** 2

    def normalize(self):
        d = self.magnitude()
        if d:
            self.x /= d
            self.y /= d
            self.z /= d
        return self

    def normalized(self):
        d = self.magnitude()
        if d:
            return Vector3(self.x / d,
                           self.y / d,
                           self.z / d)
        return self.copy()

    def flip(self):
        """Flip vector"""
        # added by Mostapha Sadeghipour
        self.x = -self.x
        self.y = -self.y
        self.z = -self.z
        return self

    def flipped(self):
        """Calculate a flipped vector"""
        # added by Mostapha Sadeghipour
        return Vector3(-self.x,
                        -self.y,
                        -self.z)

    def dot(self, other):
        assert isinstance(other, Vector3)
        return self.x * other.x + \
               self.y * other.y + \
               self.z * other.z

    def cross(self, other):
        assert isinstance(other, Vector3)
        return Vector3(self.y * other.z - self.z * other.y,
                       -self.x * other.z + self.z * other.x,
                       self.x * other.y - self.y * other.x)

    def reflect(self, normal):
        # assume normal is normalized
        assert isinstance(normal, Vector3)
        d = 2 * (self.x * normal.x + self.y * normal.y + self.z * normal.z)
        return Vector3(self.x - d * normal.x,
                       self.y - d * normal.y,
                       self.z - d * normal.z)

    def rotate_around(self, axis, theta):
        """Return the vector rotated around axis through angle theta. Right hand rule applies"""

        # Adapted from equations published by Glenn Murray.
        # http://inside.mines.edu/~gmurray/ArbitraryAxisRotation/ArbitraryAxisRotation.html
        x, y, z = self.x, self.y,self.z
        u, v, w = axis.x, axis.y, axis.z

        # Extracted common factors for simplicity and efficiency
        r2 = u**2 + v**2 + w**2
        r = math.sqrt(r2)
        ct = math.cos(theta)
        st = math.sin(theta) / r
        dt = (u*x + v*y + w*z) * (1 - ct) / r2
        return Vector3((u * dt + x * ct + (-w * y + v * z) * st),
                       (v * dt + y * ct + ( w * x - u * z) * st),
                       (w * dt + z * ct + (-v * x + u * y) * st))

    def angle(self, other):
        """Return the angle to the vector other"""
        return math.acos(self.dot(other) / (self.magnitude()*other.magnitude()))

    def project(self, other):
        """Return one vector projected on the vector other"""
        n = other.normalized()
        return self.dot(n)*n

# a b c
# e f g
# i j k

class Matrix3:
    __slots__ = list('abcefgijk')

    def __init__(self):
        self.identity()

    def __copy__(self):
        M = Matrix3()
        M.a = self.a
        M.b = self.b
        M.c = self.c
        M.e = self.e
        M.f = self.f
        M.g = self.g
        M.i = self.i
        M.j = self.j
        M.k = self.k
        return M

    copy = __copy__
    def __repr__(self):
        return ('Matrix3([% 8.2f % 8.2f % 8.2f\n'  \
                '         % 8.2f % 8.2f % 8.2f\n'  \
                '         % 8.2f % 8.2f % 8.2f])') \
                % (self.a, self.b, self.c,
                   self.e, self.f, self.g,
                   self.i, self.j, self.k)

    def __getitem__(self, key):
        return [self.a, self.e, self.i,
                self.b, self.f, self.j,
                self.c, self.g, self.k][key]

    def __setitem__(self, key, value):
        L = self[:]
        L[key] = value
        (self.a, self.e, self.i,
         self.b, self.f, self.j,
         self.c, self.g, self.k) = L

    def __mul__(self, other):
        if isinstance(other, Matrix3):
            # Caching repeatedly accessed attributes in local variables
            # apparently increases performance by 20%.  Attrib: Will McGugan.
            Aa = self.a
            Ab = self.b
            Ac = self.c
            Ae = self.e
            Af = self.f
            Ag = self.g
            Ai = self.i
            Aj = self.j
            Ak = self.k
            Ba = other.a
            Bb = other.b
            Bc = other.c
            Be = other.e
            Bf = other.f
            Bg = other.g
            Bi = other.i
            Bj = other.j
            Bk = other.k
            C = Matrix3()
            C.a = Aa * Ba + Ab * Be + Ac * Bi
            C.b = Aa * Bb + Ab * Bf + Ac * Bj
            C.c = Aa * Bc + Ab * Bg + Ac * Bk
            C.e = Ae * Ba + Af * Be + Ag * Bi
            C.f = Ae * Bb + Af * Bf + Ag * Bj
            C.g = Ae * Bc + Af * Bg + Ag * Bk
            C.i = Ai * Ba + Aj * Be + Ak * Bi
            C.j = Ai * Bb + Aj * Bf + Ak * Bj
            C.k = Ai * Bc + Aj * Bg + Ak * Bk
            return C
        elif isinstance(other, Point2):
            A = self
            B = other
            P = Point2(0, 0)
            P.x = A.a * B.x + A.b * B.y + A.c
            P.y = A.e * B.x + A.f * B.y + A.g
            return P
        elif isinstance(other, Vector2):
            A = self
            B = other
            V = Vector2(0, 0)
            V.x = A.a * B.x + A.b * B.y
            V.y = A.e * B.x + A.f * B.y
            return V
        else:
            other = other.copy()
            other._apply_transform(self)
            return other

    def __imul__(self, other):
        assert isinstance(other, Matrix3)
        # Cache attributes in local vars (see Matrix3.__mul__).
        Aa = self.a
        Ab = self.b
        Ac = self.c
        Ae = self.e
        Af = self.f
        Ag = self.g
        Ai = self.i
        Aj = self.j
        Ak = self.k
        Ba = other.a
        Bb = other.b
        Bc = other.c
        Be = other.e
        Bf = other.f
        Bg = other.g
        Bi = other.i
        Bj = other.j
        Bk = other.k
        self.a = Aa * Ba + Ab * Be + Ac * Bi
        self.b = Aa * Bb + Ab * Bf + Ac * Bj
        self.c = Aa * Bc + Ab * Bg + Ac * Bk
        self.e = Ae * Ba + Af * Be + Ag * Bi
        self.f = Ae * Bb + Af * Bf + Ag * Bj
        self.g = Ae * Bc + Af * Bg + Ag * Bk
        self.i = Ai * Ba + Aj * Be + Ak * Bi
        self.j = Ai * Bb + Aj * Bf + Ak * Bj
        self.k = Ai * Bc + Aj * Bg + Ak * Bk
        return self

    def identity(self):
        self.a = self.f = self.k = 1.
        self.b = self.c = self.e = self.g = self.i = self.j = 0
        return self

    def scale(self, x, y):
        self *= Matrix3.new_scale(x, y)
        return self

    def translate(self, x, y):
        self *= Matrix3.new_translate(x, y)
        return self

    def rotate(self, angle):
        self *= Matrix3.new_rotate(angle)
        return self

    # Static constructors
    def new_identity(cls):
        self = cls()
        return self
    new_identity = classmethod(new_identity)

    def new_scale(cls, x, y):
        self = cls()
        self.a = x
        self.f = y
        return self
    new_scale = classmethod(new_scale)

    def new_translate(cls, x, y):
        self = cls()
        self.c = x
        self.g = y
        return self
    new_translate = classmethod(new_translate)

    def new_rotate(cls, angle):
        self = cls()
        s = math.sin(angle)
        c = math.cos(angle)
        self.a = self.f = c
        self.b = -s
        self.e = s
        return self
    new_rotate = classmethod(new_rotate)

    def determinant(self):
        return (self.a*self.f*self.k
                + self.b*self.g*self.i
                + self.c*self.e*self.j
                - self.a*self.g*self.j
                - self.b*self.e*self.k
                - self.c*self.f*self.i)

    def inverse(self):
        tmp = Matrix3()
        d = self.determinant()

        if abs(d) < 0.001:
            # No inverse, return identity
            return tmp
        else:
            d = 1.0 / d

            tmp.a = d * (self.f*self.k - self.g*self.j)
            tmp.b = d * (self.c*self.j - self.b*self.k)
            tmp.c = d * (self.b*self.g - self.c*self.f)
            tmp.e = d * (self.g*self.i - self.e*self.k)
            tmp.f = d * (self.a*self.k - self.c*self.i)
            tmp.g = d * (self.c*self.e - self.a*self.g)
            tmp.i = d * (self.e*self.j - self.f*self.i)
            tmp.j = d * (self.b*self.i - self.a*self.j)
            tmp.k = d * (self.a*self.f - self.b*self.e)

            return tmp

# a b c d
# e f g h
# i j k l
# m n o p

class Matrix4:
    __slots__ = list('abcdefghijklmnop')

    def __init__(self):
        self.identity()

    def __copy__(self):
        M = Matrix4()
        M.a = self.a
        M.b = self.b
        M.c = self.c
        M.d = self.d
        M.e = self.e
        M.f = self.f
        M.g = self.g
        M.h = self.h
        M.i = self.i
        M.j = self.j
        M.k = self.k
        M.l = self.l
        M.m = self.m
        M.n = self.n
        M.o = self.o
        M.p = self.p
        return M

    copy = __copy__


    def __repr__(self):
        return ('Matrix4([% 8.2f % 8.2f % 8.2f % 8.2f\n'  \
                '         % 8.2f % 8.2f % 8.2f % 8.2f\n'  \
                '         % 8.2f % 8.2f % 8.2f % 8.2f\n'  \
                '         % 8.2f % 8.2f % 8.2f % 8.2f])') \
                % (self.a, self.b, self.c, self.d,
                   self.e, self.f, self.g, self.h,
                   self.i, self.j, self.k, self.l,
                   self.m, self.n, self.o, self.p)

    def __getitem__(self, key):
        return [self.a, self.e, self.i, self.m,
                self.b, self.f, self.j, self.n,
                self.c, self.g, self.k, self.o,
                self.d, self.h, self.l, self.p][key]

    def __setitem__(self, key, value):
        L = self[:]
        L[key] = value
        (self.a, self.e, self.i, self.m,
         self.b, self.f, self.j, self.n,
         self.c, self.g, self.k, self.o,
         self.d, self.h, self.l, self.p) = L

    def __mul__(self, other):
        if isinstance(other, Matrix4):
            # Cache attributes in local vars (see Matrix3.__mul__).
            Aa = self.a
            Ab = self.b
            Ac = self.c
            Ad = self.d
            Ae = self.e
            Af = self.f
            Ag = self.g
            Ah = self.h
            Ai = self.i
            Aj = self.j
            Ak = self.k
            Al = self.l
            Am = self.m
            An = self.n
            Ao = self.o
            Ap = self.p
            Ba = other.a
            Bb = other.b
            Bc = other.c
            Bd = other.d
            Be = other.e
            Bf = other.f
            Bg = other.g
            Bh = other.h
            Bi = other.i
            Bj = other.j
            Bk = other.k
            Bl = other.l
            Bm = other.m
            Bn = other.n
            Bo = other.o
            Bp = other.p
            C = Matrix4()
            C.a = Aa * Ba + Ab * Be + Ac * Bi + Ad * Bm
            C.b = Aa * Bb + Ab * Bf + Ac * Bj + Ad * Bn
            C.c = Aa * Bc + Ab * Bg + Ac * Bk + Ad * Bo
            C.d = Aa * Bd + Ab * Bh + Ac * Bl + Ad * Bp
            C.e = Ae * Ba + Af * Be + Ag * Bi + Ah * Bm
            C.f = Ae * Bb + Af * Bf + Ag * Bj + Ah * Bn
            C.g = Ae * Bc + Af * Bg + Ag * Bk + Ah * Bo
            C.h = Ae * Bd + Af * Bh + Ag * Bl + Ah * Bp
            C.i = Ai * Ba + Aj * Be + Ak * Bi + Al * Bm
            C.j = Ai * Bb + Aj * Bf + Ak * Bj + Al * Bn
            C.k = Ai * Bc + Aj * Bg + Ak * Bk + Al * Bo
            C.l = Ai * Bd + Aj * Bh + Ak * Bl + Al * Bp
            C.m = Am * Ba + An * Be + Ao * Bi + Ap * Bm
            C.n = Am * Bb + An * Bf + Ao * Bj + Ap * Bn
            C.o = Am * Bc + An * Bg + Ao * Bk + Ap * Bo
            C.p = Am * Bd + An * Bh + Ao * Bl + Ap * Bp
            return C
        elif isinstance(other, Point3):
            A = self
            B = other
            P = Point3(0, 0, 0)
            P.x = A.a * B.x + A.b * B.y + A.c * B.z + A.d
            P.y = A.e * B.x + A.f * B.y + A.g * B.z + A.h
            P.z = A.i * B.x + A.j * B.y + A.k * B.z + A.l
            return P
        elif isinstance(other, Vector3):
            A = self
            B = other
            V = Vector3(0, 0, 0)
            V.x = A.a * B.x + A.b * B.y + A.c * B.z
            V.y = A.e * B.x + A.f * B.y + A.g * B.z
            V.z = A.i * B.x + A.j * B.y + A.k * B.z
            return V
        else:
            other = other.copy()
            other._apply_transform(self)
            return other

    def __imul__(self, other):
        assert isinstance(other, Matrix4)
        # Cache attributes in local vars (see Matrix3.__mul__).
        Aa = self.a
        Ab = self.b
        Ac = self.c
        Ad = self.d
        Ae = self.e
        Af = self.f
        Ag = self.g
        Ah = self.h
        Ai = self.i
        Aj = self.j
        Ak = self.k
        Al = self.l
        Am = self.m
        An = self.n
        Ao = self.o
        Ap = self.p
        Ba = other.a
        Bb = other.b
        Bc = other.c
        Bd = other.d
        Be = other.e
        Bf = other.f
        Bg = other.g
        Bh = other.h
        Bi = other.i
        Bj = other.j
        Bk = other.k
        Bl = other.l
        Bm = other.m
        Bn = other.n
        Bo = other.o
        Bp = other.p
        self.a = Aa * Ba + Ab * Be + Ac * Bi + Ad * Bm
        self.b = Aa * Bb + Ab * Bf + Ac * Bj + Ad * Bn
        self.c = Aa * Bc + Ab * Bg + Ac * Bk + Ad * Bo
        self.d = Aa * Bd + Ab * Bh + Ac * Bl + Ad * Bp
        self.e = Ae * Ba + Af * Be + Ag * Bi + Ah * Bm
        self.f = Ae * Bb + Af * Bf + Ag * Bj + Ah * Bn
        self.g = Ae * Bc + Af * Bg + Ag * Bk + Ah * Bo
        self.h = Ae * Bd + Af * Bh + Ag * Bl + Ah * Bp
        self.i = Ai * Ba + Aj * Be + Ak * Bi + Al * Bm
        self.j = Ai * Bb + Aj * Bf + Ak * Bj + Al * Bn
        self.k = Ai * Bc + Aj * Bg + Ak * Bk + Al * Bo
        self.l = Ai * Bd + Aj * Bh + Ak * Bl + Al * Bp
        self.m = Am * Ba + An * Be + Ao * Bi + Ap * Bm
        self.n = Am * Bb + An * Bf + Ao * Bj + Ap * Bn
        self.o = Am * Bc + An * Bg + Ao * Bk + Ap * Bo
        self.p = Am * Bd + An * Bh + Ao * Bl + Ap * Bp
        return self

    def transform(self, other):
        A = self
        B = other
        P = Point3(0, 0, 0)
        P.x = A.a * B.x + A.b * B.y + A.c * B.z + A.d
        P.y = A.e * B.x + A.f * B.y + A.g * B.z + A.h
        P.z = A.i * B.x + A.j * B.y + A.k * B.z + A.l
        w =   A.m * B.x + A.n * B.y + A.o * B.z + A.p
        if w != 0:
            P.x /= w
            P.y /= w
            P.z /= w
        return P

    def identity(self):
        self.a = self.f = self.k = self.p = 1.
        self.b = self.c = self.d = self.e = self.g = self.h = \
        self.i = self.j = self.l = self.m = self.n = self.o = 0
        return self

    def scale(self, x, y, z):
        self *= Matrix4.new_scale(x, y, z)
        return self

    def translate(self, x, y, z):
        self *= Matrix4.new_translate(x, y, z)
        return self

    def rotatex(self, angle):
        self *= Matrix4.new_rotatex(angle)
        return self

    def rotatey(self, angle):
        self *= Matrix4.new_rotatey(angle)
        return self

    def rotatez(self, angle):
        self *= Matrix4.new_rotatez(angle)
        return self

    def rotate_axis(self, angle, axis):
        self *= Matrix4.new_rotate_axis(angle, axis)
        return self

    def rotate_euler(self, heading, attitude, bank):
        self *= Matrix4.new_rotate_euler(heading, attitude, bank)
        return self

    def rotate_triple_axis(self, x, y, z):
        self *= Matrix4.new_rotate_triple_axis(x, y, z)
        return self

    def transpose(self):
        (self.a, self.e, self.i, self.m,
         self.b, self.f, self.j, self.n,
         self.c, self.g, self.k, self.o,
         self.d, self.h, self.l, self.p) = \
        (self.a, self.b, self.c, self.d,
         self.e, self.f, self.g, self.h,
         self.i, self.j, self.k, self.l,
         self.m, self.n, self.o, self.p)

    def transposed(self):
        M = self.copy()
        M.transpose()
        return M

    # Static constructors
    def new(cls, *values):
        M = cls()
        M[:] = values
        return M
    new = classmethod(new)

    def new_identity(cls):
        self = cls()
        return self
    new_identity = classmethod(new_identity)

    def new_scale(cls, x, y, z):
        self = cls()
        self.a = x
        self.f = y
        self.k = z
        return self
    new_scale = classmethod(new_scale)

    def new_translate(cls, x, y, z):
        self = cls()
        self.d = x
        self.h = y
        self.l = z
        return self
    new_translate = classmethod(new_translate)

    def new_rotatex(cls, angle):
        self = cls()
        s = math.sin(angle)
        c = math.cos(angle)
        self.f = self.k = c
        self.g = -s
        self.j = s
        return self
    new_rotatex = classmethod(new_rotatex)

    def new_rotatey(cls, angle):
        self = cls()
        s = math.sin(angle)
        c = math.cos(angle)
        self.a = self.k = c
        self.c = s
        self.i = -s
        return self
    new_rotatey = classmethod(new_rotatey)

    def new_rotatez(cls, angle):
        self = cls()
        s = math.sin(angle)
        c = math.cos(angle)
        self.a = self.f = c
        self.b = -s
        self.e = s
        return self
    new_rotatez = classmethod(new_rotatez)

    def new_rotate_axis(cls, angle, axis):
        assert(isinstance(axis, Vector3))
        vector = axis.normalized()
        x = vector.x
        y = vector.y
        z = vector.z

        self = cls()
        s = math.sin(angle)
        c = math.cos(angle)
        c1 = 1. - c

        # from the glRotate man page
        self.a = x * x * c1 + c
        self.b = x * y * c1 - z * s
        self.c = x * z * c1 + y * s
        self.e = y * x * c1 + z * s
        self.f = y * y * c1 + c
        self.g = y * z * c1 - x * s
        self.i = x * z * c1 - y * s
        self.j = y * z * c1 + x * s
        self.k = z * z * c1 + c
        return self
    new_rotate_axis = classmethod(new_rotate_axis)

    def new_rotate_euler(cls, heading, attitude, bank):
        # from http://www.euclideanspace.com/
        ch = math.cos(heading)
        sh = math.sin(heading)
        ca = math.cos(attitude)
        sa = math.sin(attitude)
        cb = math.cos(bank)
        sb = math.sin(bank)

        self = cls()
        self.a = ch * ca
        self.b = sh * sb - ch * sa * cb
        self.c = ch * sa * sb + sh * cb
        self.e = sa
        self.f = ca * cb
        self.g = -ca * sb
        self.i = -sh * ca
        self.j = sh * sa * cb + ch * sb
        self.k = -sh * sa * sb + ch * cb
        return self
    new_rotate_euler = classmethod(new_rotate_euler)

    def new_rotate_triple_axis(cls, x, y, z):
      m = cls()

      m.a, m.b, m.c = x.x, y.x, z.x
      m.e, m.f, m.g = x.y, y.y, z.y
      m.i, m.j, m.k = x.z, y.z, z.z

      return m
    new_rotate_triple_axis = classmethod(new_rotate_triple_axis)

    def new_look_at(cls, eye, at, up):
      z = (eye - at).normalized()
      x = up.cross(z).normalized()
      y = z.cross(x)

      m = cls.new_rotate_triple_axis(x, y, z)
      m.d, m.h, m.l = eye.x, eye.y, eye.z
      return m
    new_look_at = classmethod(new_look_at)

    def new_perspective(cls, fov_y, aspect, near, far):
        # from the gluPerspective man page
        f = 1 / math.tan(fov_y / 2)
        self = cls()
        assert near != 0.0 and near != far
        self.a = f / aspect
        self.f = f
        self.k = (far + near) / (near - far)
        self.l = 2 * far * near / (near - far)
        self.o = -1
        self.p = 0
        return self
    new_perspective = classmethod(new_perspective)

    def determinant(self):
        return ((self.a * self.f - self.e * self.b)
              * (self.k * self.p - self.o * self.l)
              - (self.a * self.j - self.i * self.b)
              * (self.g * self.p - self.o * self.h)
              + (self.a * self.n - self.m * self.b)
              * (self.g * self.l - self.k * self.h)
              + (self.e * self.j - self.i * self.f)
              * (self.c * self.p - self.o * self.d)
              - (self.e * self.n - self.m * self.f)
              * (self.c * self.l - self.k * self.d)
              + (self.i * self.n - self.m * self.j)
              * (self.c * self.h - self.g * self.d))

    def inverse(self):
        tmp = Matrix4()
        d = self.determinant();

        if abs(d) < 0.001:
            # No inverse, return identity
            return tmp
        else:
            d = 1.0 / d;

            tmp.a = d * (self.f * (self.k * self.p - self.o * self.l) + self.j * (self.o * self.h - self.g * self.p) + self.n * (self.g * self.l - self.k * self.h));
            tmp.e = d * (self.g * (self.i * self.p - self.m * self.l) + self.k * (self.m * self.h - self.e * self.p) + self.o * (self.e * self.l - self.i * self.h));
            tmp.i = d * (self.h * (self.i * self.n - self.m * self.j) + self.l * (self.m * self.f - self.e * self.n) + self.p * (self.e * self.j - self.i * self.f));
            tmp.m = d * (self.e * (self.n * self.k - self.j * self.o) + self.i * (self.f * self.o - self.n * self.g) + self.m * (self.j * self.g - self.f * self.k));

            tmp.b = d * (self.j * (self.c * self.p - self.o * self.d) + self.n * (self.k * self.d - self.c * self.l) + self.b * (self.o * self.l - self.k * self.p));
            tmp.f = d * (self.k * (self.a * self.p - self.m * self.d) + self.o * (self.i * self.d - self.a * self.l) + self.c * (self.m * self.l - self.i * self.p));
            tmp.j = d * (self.l * (self.a * self.n - self.m * self.b) + self.p * (self.i * self.b - self.a * self.j) + self.d * (self.m * self.j - self.i * self.n));
            tmp.n = d * (self.i * (self.n * self.c - self.b * self.o) + self.m * (self.b * self.k - self.j * self.c) + self.a * (self.j * self.o - self.n * self.k));

            tmp.c = d * (self.n * (self.c * self.h - self.g * self.d) + self.b * (self.g * self.p - self.o * self.h) + self.f * (self.o * self.d - self.c * self.p));
            tmp.g = d * (self.o * (self.a * self.h - self.e * self.d) + self.c * (self.e * self.p - self.m * self.h) + self.g * (self.m * self.d - self.a * self.p));
            tmp.k = d * (self.p * (self.a * self.f - self.e * self.b) + self.d * (self.e * self.n - self.m * self.f) + self.h * (self.m * self.b - self.a * self.n));
            tmp.o = d * (self.m * (self.f * self.c - self.b * self.g) + self.a * (self.n * self.g - self.f * self.o) + self.e * (self.b * self.o - self.n * self.c));

            tmp.d = d * (self.b * (self.k * self.h - self.g * self.l) + self.f * (self.c * self.l - self.k * self.d) + self.j * (self.g * self.d - self.c * self.h));
            tmp.h = d * (self.c * (self.i * self.h - self.e * self.l) + self.g * (self.a * self.l - self.i * self.d) + self.k * (self.e * self.d - self.a * self.h));
            tmp.l = d * (self.d * (self.i * self.f - self.e * self.j) + self.h * (self.a * self.j - self.i * self.b) + self.l * (self.e * self.b - self.a * self.f));
            tmp.p = d * (self.a * (self.f * self.k - self.j * self.g) + self.e * (self.j * self.c - self.b * self.k) + self.i * (self.b * self.g - self.f * self.c));

        return tmp;


class Quaternion:
    # All methods and naming conventions based off
    # http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions

    # w is the real part, (x, y, z) are the imaginary parts
    __slots__ = ['w', 'x', 'y', 'z']

    def __init__(self, w=1, x=0, y=0, z=0):
        self.w = w
        self.x = x
        self.y = y
        self.z = z

    def __copy__(self):
        Q = Quaternion()
        Q.w = self.w
        Q.x = self.x
        Q.y = self.y
        Q.z = self.z
        return Q

    copy = __copy__

    def __repr__(self):
        return 'Quaternion(real=%.2f, imag=<%.2f, %.2f, %.2f>)' % \
            (self.w, self.x, self.y, self.z)

    def __mul__(self, other):
        if isinstance(other, Quaternion):
            Ax = self.x
            Ay = self.y
            Az = self.z
            Aw = self.w
            Bx = other.x
            By = other.y
            Bz = other.z
            Bw = other.w
            Q = Quaternion()
            Q.x =  Ax * Bw + Ay * Bz - Az * By + Aw * Bx
            Q.y = -Ax * Bz + Ay * Bw + Az * Bx + Aw * By
            Q.z =  Ax * By - Ay * Bx + Az * Bw + Aw * Bz
            Q.w = -Ax * Bx - Ay * By - Az * Bz + Aw * Bw
            return Q
        elif isinstance(other, Vector3):
            w = self.w
            x = self.x
            y = self.y
            z = self.z
            Vx = other.x
            Vy = other.y
            Vz = other.z
            ww = w * w
            w2 = w * 2
            wx2 = w2 * x
            wy2 = w2 * y
            wz2 = w2 * z
            xx = x * x
            x2 = x * 2
            xy2 = x2 * y
            xz2 = x2 * z
            yy = y * y
            yz2 = 2 * y * z
            zz = z * z
            return other.__class__(\
               ww * Vx + wy2 * Vz - wz2 * Vy + \
               xx * Vx + xy2 * Vy + xz2 * Vz - \
               zz * Vx - yy * Vx,
               xy2 * Vx + yy * Vy + yz2 * Vz + \
               wz2 * Vx - zz * Vy + ww * Vy - \
               wx2 * Vz - xx * Vy,
               xz2 * Vx + yz2 * Vy + \
               zz * Vz - wy2 * Vx - yy * Vz + \
               wx2 * Vy - xx * Vz + ww * Vz)
        else:
            other = other.copy()
            other._apply_transform(self)
            return other

    def __imul__(self, other):
        assert isinstance(other, Quaternion)
        Ax = self.x
        Ay = self.y
        Az = self.z
        Aw = self.w
        Bx = other.x
        By = other.y
        Bz = other.z
        Bw = other.w
        self.x =  Ax * Bw + Ay * Bz - Az * By + Aw * Bx
        self.y = -Ax * Bz + Ay * Bw + Az * Bx + Aw * By
        self.z =  Ax * By - Ay * Bx + Az * Bw + Aw * Bz
        self.w = -Ax * Bx - Ay * By - Az * Bz + Aw * Bw
        return self

    def __abs__(self):
        return math.sqrt(self.w ** 2 + \
                         self.x ** 2 + \
                         self.y ** 2 + \
                         self.z ** 2)

    magnitude = __abs__

    def magnitude_squared(self):
        return self.w ** 2 + \
               self.x ** 2 + \
               self.y ** 2 + \
               self.z ** 2

    def identity(self):
        self.w = 1
        self.x = 0
        self.y = 0
        self.z = 0
        return self

    def rotate_axis(self, angle, axis):
        self *= Quaternion.new_rotate_axis(angle, axis)
        return self

    def rotate_euler(self, heading, attitude, bank):
        self *= Quaternion.new_rotate_euler(heading, attitude, bank)
        return self

    def rotate_matrix(self, m):
        self *= Quaternion.new_rotate_matrix(m)
        return self

    def conjugated(self):
        Q = Quaternion()
        Q.w = self.w
        Q.x = -self.x
        Q.y = -self.y
        Q.z = -self.z
        return Q

    def normalize(self):
        d = self.magnitude()
        if d != 0:
            self.w /= d
            self.x /= d
            self.y /= d
            self.z /= d
        return self

    def normalized(self):
        d = self.magnitude()
        if d != 0:
            Q = Quaternion()
            Q.w = self.w / d
            Q.x = self.x / d
            Q.y = self.y / d
            Q.z = self.z / d
            return Q
        else:
            return self.copy()

    def get_angle_axis(self):
        if self.w > 1:
            self = self.normalized()
        angle = 2 * math.acos(self.w)
        s = math.sqrt(1 - self.w ** 2)
        if s < 0.001:
            return angle, Vector3(1, 0, 0)
        else:
            return angle, Vector3(self.x / s, self.y / s, self.z / s)

    def get_euler(self):
        t = self.x * self.y + self.z * self.w
        if t > 0.4999:
            heading = 2 * math.atan2(self.x, self.w)
            attitude = math.pi / 2
            bank = 0
        elif t < -0.4999:
            heading = -2 * math.atan2(self.x, self.w)
            attitude = -math.pi / 2
            bank = 0
        else:
            sqx = self.x ** 2
            sqy = self.y ** 2
            sqz = self.z ** 2
            heading = math.atan2(2 * self.y * self.w - 2 * self.x * self.z,
                                 1 - 2 * sqy - 2 * sqz)
            attitude = math.asin(2 * t)
            bank = math.atan2(2 * self.x * self.w - 2 * self.y * self.z,
                              1 - 2 * sqx - 2 * sqz)
        return heading, attitude, bank

    def get_matrix(self):
        xx = self.x ** 2
        xy = self.x * self.y
        xz = self.x * self.z
        xw = self.x * self.w
        yy = self.y ** 2
        yz = self.y * self.z
        yw = self.y * self.w
        zz = self.z ** 2
        zw = self.z * self.w
        M = Matrix4()
        M.a = 1 - 2 * (yy + zz)
        M.b = 2 * (xy - zw)
        M.c = 2 * (xz + yw)
        M.e = 2 * (xy + zw)
        M.f = 1 - 2 * (xx + zz)
        M.g = 2 * (yz - xw)
        M.i = 2 * (xz - yw)
        M.j = 2 * (yz + xw)
        M.k = 1 - 2 * (xx + yy)
        return M

    # Static constructors
    def new_identity(cls):
        return cls()
    new_identity = classmethod(new_identity)

    def new_rotate_axis(cls, angle, axis):
        assert(isinstance(axis, Vector3))
        axis = axis.normalized()
        s = math.sin(angle / 2)
        Q = cls()
        Q.w = math.cos(angle / 2)
        Q.x = axis.x * s
        Q.y = axis.y * s
        Q.z = axis.z * s
        return Q
    new_rotate_axis = classmethod(new_rotate_axis)

    def new_rotate_euler(cls, heading, attitude, bank):
        Q = cls()
        c1 = math.cos(heading / 2)
        s1 = math.sin(heading / 2)
        c2 = math.cos(attitude / 2)
        s2 = math.sin(attitude / 2)
        c3 = math.cos(bank / 2)
        s3 = math.sin(bank / 2)

        Q.w = c1 * c2 * c3 - s1 * s2 * s3
        Q.x = s1 * s2 * c3 + c1 * c2 * s3
        Q.y = s1 * c2 * c3 + c1 * s2 * s3
        Q.z = c1 * s2 * c3 - s1 * c2 * s3
        return Q
    new_rotate_euler = classmethod(new_rotate_euler)

    def new_rotate_matrix(cls, m):
      if m[0*4 + 0] + m[1*4 + 1] + m[2*4 + 2] > 0.00000001:
        t = m[0*4 + 0] + m[1*4 + 1] + m[2*4 + 2] + 1.0
        s = 0.5/math.sqrt(t)

        return cls(
          s*t,
          (m[1*4 + 2] - m[2*4 + 1])*s,
          (m[2*4 + 0] - m[0*4 + 2])*s,
          (m[0*4 + 1] - m[1*4 + 0])*s
          )

      elif m[0*4 + 0] > m[1*4 + 1] and m[0*4 + 0] > m[2*4 + 2]:
        t = m[0*4 + 0] - m[1*4 + 1] - m[2*4 + 2] + 1.0
        s = 0.5/math.sqrt(t)

        return cls(
          (m[1*4 + 2] - m[2*4 + 1])*s,
          s*t,
          (m[0*4 + 1] + m[1*4 + 0])*s,
          (m[2*4 + 0] + m[0*4 + 2])*s
          )

      elif m[1*4 + 1] > m[2*4 + 2]:
        t = -m[0*4 + 0] + m[1*4 + 1] - m[2*4 + 2] + 1.0
        s = 0.5/math.sqrt(t)

        return cls(
          (m[2*4 + 0] - m[0*4 + 2])*s,
          (m[0*4 + 1] + m[1*4 + 0])*s,
          s*t,
          (m[1*4 + 2] + m[2*4 + 1])*s
          )

      else:
        t = -m[0*4 + 0] - m[1*4 + 1] + m[2*4 + 2] + 1.0
        s = 0.5/math.sqrt(t)

        return cls(
          (m[0*4 + 1] - m[1*4 + 0])*s,
          (m[2*4 + 0] + m[0*4 + 2])*s,
          (m[1*4 + 2] + m[2*4 + 1])*s,
          s*t
          )
    new_rotate_matrix = classmethod(new_rotate_matrix)

    def new_interpolate(cls, q1, q2, t):
        assert isinstance(q1, Quaternion) and isinstance(q2, Quaternion)
        Q = cls()

        costheta = q1.w * q2.w + q1.x * q2.x + q1.y * q2.y + q1.z * q2.z
        if costheta < 0.:
            costheta = -costheta
            q1 = q1.conjugated()
        elif costheta > 1:
            costheta = 1

        theta = math.acos(costheta)
        if abs(theta) < 0.01:
            Q.w = q2.w
            Q.x = q2.x
            Q.y = q2.y
            Q.z = q2.z
            return Q

        sintheta = math.sqrt(1.0 - costheta * costheta)
        if abs(sintheta) < 0.01:
            Q.w = (q1.w + q2.w) * 0.5
            Q.x = (q1.x + q2.x) * 0.5
            Q.y = (q1.y + q2.y) * 0.5
            Q.z = (q1.z + q2.z) * 0.5
            return Q

        ratio1 = math.sin((1 - t) * theta) / sintheta
        ratio2 = math.sin(t * theta) / sintheta

        Q.w = q1.w * ratio1 + q2.w * ratio2
        Q.x = q1.x * ratio1 + q2.x * ratio2
        Q.y = q1.y * ratio1 + q2.y * ratio2
        Q.z = q1.z * ratio1 + q2.z * ratio2
        return Q
    new_interpolate = classmethod(new_interpolate)

# Geometry
# Much maths thanks to Paul Bourke, http://astronomy.swin.edu.au/~pbourke
# ---------------------------------------------------------------------------

class Geometry:
    def _connect_unimplemented(self, other):
        raise AttributeError, 'Cannot connect %s to %s' % \
            (self.__class__, other.__class__)

    def _intersect_unimplemented(self, other):
        raise AttributeError, 'Cannot intersect %s and %s' % \
            (self.__class__, other.__class__)

    _intersect_point2 = _intersect_unimplemented
    _intersect_line2 = _intersect_unimplemented
    _intersect_circle = _intersect_unimplemented
    _connect_point2 = _connect_unimplemented
    _connect_line2 = _connect_unimplemented
    _connect_circle = _connect_unimplemented

    _intersect_point3 = _intersect_unimplemented
    _intersect_line3 = _intersect_unimplemented
    _intersect_sphere = _intersect_unimplemented
    _intersect_plane = _intersect_unimplemented
    _connect_point3 = _connect_unimplemented
    _connect_line3 = _connect_unimplemented
    _connect_sphere = _connect_unimplemented
    _connect_plane = _connect_unimplemented

    def intersect(self, other):
        raise NotImplementedError

    def connect(self, other):
        raise NotImplementedError

    def distance(self, other):
        c = self.connect(other)
        if c:
            return c.length
        return 0.0

def _intersect_point2_circle(P, C):
    return abs(P - C.c) <= C.r

def _intersect_line2_line2(A, B):
    d = B.v.y * A.v.x - B.v.x * A.v.y
    if d == 0:
        return None

    dy = A.p.y - B.p.y
    dx = A.p.x - B.p.x
    ua = (B.v.x * dy - B.v.y * dx) / d
    if not A._u_in(ua):
        return None
    ub = (A.v.x * dy - A.v.y * dx) / d
    if not B._u_in(ub):
        return None

    return Point2(A.p.x + ua * A.v.x,
                  A.p.y + ua * A.v.y)

def _intersect_line2_circle(L, C):
    a = L.v.magnitude_squared()
    b = 2 * (L.v.x * (L.p.x - C.c.x) + \
             L.v.y * (L.p.y - C.c.y))
    c = C.c.magnitude_squared() + \
        L.p.magnitude_squared() - \
        2 * C.c.dot(L.p) - \
        C.r ** 2
    det = b ** 2 - 4 * a * c
    if det < 0:
        return None
    sq = math.sqrt(det)
    u1 = (-b + sq) / (2 * a)
    u2 = (-b - sq) / (2 * a)
    if not L._u_in(u1):
        u1 = max(min(u1, 1.0), 0.0)
    if not L._u_in(u2):
        u2 = max(min(u2, 1.0), 0.0)

    # Tangent
    if u1 == u2:
        return Point2(L.p.x + u1 * L.v.x,
                      L.p.y + u1 * L.v.y)

    return LineSegment2(Point2(L.p.x + u1 * L.v.x,
                               L.p.y + u1 * L.v.y),
                        Point2(L.p.x + u2 * L.v.x,
                               L.p.y + u2 * L.v.y))

def _connect_point2_line2(P, L):
    d = L.v.magnitude_squared()
    assert d != 0
    u = ((P.x - L.p.x) * L.v.x + \
         (P.y - L.p.y) * L.v.y) / d
    if not L._u_in(u):
        u = max(min(u, 1.0), 0.0)
    return LineSegment2(P,
                        Point2(L.p.x + u * L.v.x,
                               L.p.y + u * L.v.y))

def _connect_point2_circle(P, C):
    v = P - C.c
    v.normalize()
    v *= C.r
    return LineSegment2(P, Point2(C.c.x + v.x, C.c.y + v.y))

def _connect_line2_line2(A, B):
    d = B.v.y * A.v.x - B.v.x * A.v.y
    if d == 0:
        # Parallel, connect an endpoint with a line
        if isinstance(B, Ray2) or isinstance(B, LineSegment2):
            p1, p2 = _connect_point2_line2(B.p, A)
            return p2, p1
        # No endpoint (or endpoint is on A), possibly choose arbitrary point
        # on line.
        return _connect_point2_line2(A.p, B)

    dy = A.p.y - B.p.y
    dx = A.p.x - B.p.x
    ua = (B.v.x * dy - B.v.y * dx) / d
    if not A._u_in(ua):
        ua = max(min(ua, 1.0), 0.0)
    ub = (A.v.x * dy - A.v.y * dx) / d
    if not B._u_in(ub):
        ub = max(min(ub, 1.0), 0.0)

    return LineSegment2(Point2(A.p.x + ua * A.v.x, A.p.y + ua * A.v.y),
                        Point2(B.p.x + ub * B.v.x, B.p.y + ub * B.v.y))

def _connect_circle_line2(C, L):
    d = L.v.magnitude_squared()
    assert d != 0
    u = ((C.c.x - L.p.x) * L.v.x + (C.c.y - L.p.y) * L.v.y) / d
    if not L._u_in(u):
        u = max(min(u, 1.0), 0.0)
    point = Point2(L.p.x + u * L.v.x, L.p.y + u * L.v.y)
    v = (point - C.c)
    v.normalize()
    v *= C.r
    return LineSegment2(Point2(C.c.x + v.x, C.c.y + v.y), point)

def _connect_circle_circle(A, B):
    v = B.c - A.c
    d = v.magnitude()
    if A.r >= B.r and d < A.r:
        #centre B inside A
        s1,s2 = +1, +1
    elif B.r > A.r and d < B.r:
        #centre A inside B
        s1,s2 = -1, -1
    elif d >= A.r and d >= B.r:
        s1,s2 = +1, -1
    v.normalize()
    return LineSegment2(Point2(A.c.x + s1 * v.x * A.r, A.c.y + s1 * v.y * A.r),
                        Point2(B.c.x + s2 * v.x * B.r, B.c.y + s2 * v.y * B.r))


class Point2(Vector2, Geometry):
    def __repr__(self):
        return 'Point2(%.2f, %.2f)' % (self.x, self.y)

    def intersect(self, other):
        return other._intersect_point2(self)

    def _intersect_circle(self, other):
        return _intersect_point2_circle(self, other)

    def connect(self, other):
        return other._connect_point2(self)

    def _connect_point2(self, other):
        return LineSegment2(other, self)

    def _connect_line2(self, other):
        c = _connect_point2_line2(self, other)
        if c:
            return c._swap()

    def _connect_circle(self, other):
        c = _connect_point2_circle(self, other)
        if c:
            return c._swap()

class Line2(Geometry):
    __slots__ = ['p', 'v']

    def __init__(self, *args):
        if len(args) == 3:
            assert isinstance(args[0], Point2) and \
                   isinstance(args[1], Vector2) and \
                   type(args[2]) == float
            self.p = args[0].copy()
            self.v = args[1] * args[2] / abs(args[1])
        elif len(args) == 2:
            if isinstance(args[0], Point2) and isinstance(args[1], Point2):
                self.p = args[0].copy()
                self.v = args[1] - args[0]
            elif isinstance(args[0], Point2) and isinstance(args[1], Vector2):
                self.p = args[0].copy()
                self.v = args[1].copy()
            else:
                raise AttributeError, '%r' % (args,)
        elif len(args) == 1:
            if isinstance(args[0], Line2):
                self.p = args[0].p.copy()
                self.v = args[0].v.copy()
            else:
                raise AttributeError, '%r' % (args,)
        else:
            raise AttributeError, '%r' % (args,)

        if not self.v:
            raise AttributeError, 'Line has zero-length vector'

    def __copy__(self):
        return self.__class__(self.p, self.v)

    copy = __copy__

    def __repr__(self):
        return 'Line2(<%.2f, %.2f> + u<%.2f, %.2f>)' % \
            (self.p.x, self.p.y, self.v.x, self.v.y)

    p1 = property(lambda self: self.p)
    p2 = property(lambda self: Point2(self.p.x + self.v.x,
                                      self.p.y + self.v.y))

    def _apply_transform(self, t):
        self.p = t * self.p
        self.v = t * self.v

    def _u_in(self, u):
        return True

    def intersect(self, other):
        return other._intersect_line2(self)

    def _intersect_line2(self, other):
        return _intersect_line2_line2(self, other)

    def _intersect_circle(self, other):
        return _intersect_line2_circle(self, other)

    def connect(self, other):
        return other._connect_line2(self)

    def _connect_point2(self, other):
        return _connect_point2_line2(other, self)

    def _connect_line2(self, other):
        return _connect_line2_line2(other, self)

    def _connect_circle(self, other):
        return _connect_circle_line2(other, self)

class Ray2(Line2):
    def __repr__(self):
        return 'Ray2(<%.2f, %.2f> + u<%.2f, %.2f>)' % \
            (self.p.x, self.p.y, self.v.x, self.v.y)

    def _u_in(self, u):
        return u >= 0.0

class LineSegment2(Line2):
    def __repr__(self):
        return 'LineSegment2(<%.2f, %.2f> to <%.2f, %.2f>)' % \
            (self.p.x, self.p.y, self.p.x + self.v.x, self.p.y + self.v.y)

    def _u_in(self, u):
        return u >= 0.0 and u <= 1.0

    def __abs__(self):
        return abs(self.v)

    def magnitude_squared(self):
        return self.v.magnitude_squared()

    def _swap(self):
        # used by connect methods to switch order of points
        self.p = self.p2
        self.v *= -1
        return self

    length = property(lambda self: abs(self.v))

class Circle(Geometry):
    __slots__ = ['c', 'r']

    def __init__(self, center, radius):
        assert isinstance(center, Vector2) and type(radius) == float
        self.c = center.copy()
        self.r = radius

    def __copy__(self):
        return self.__class__(self.c, self.r)

    copy = __copy__

    def __repr__(self):
        return 'Circle(<%.2f, %.2f>, radius=%.2f)' % \
            (self.c.x, self.c.y, self.r)

    def _apply_transform(self, t):
        self.c = t * self.c

    def intersect(self, other):
        return other._intersect_circle(self)

    def _intersect_point2(self, other):
        return _intersect_point2_circle(other, self)

    def _intersect_line2(self, other):
        return _intersect_line2_circle(other, self)

    def connect(self, other):
        return other._connect_circle(self)

    def _connect_point2(self, other):
        return _connect_point2_circle(other, self)

    def _connect_line2(self, other):
        c = _connect_circle_line2(self, other)
        if c:
            return c._swap()

    def _connect_circle(self, other):
        return _connect_circle_circle(other, self)

# 3D Geometry
# -------------------------------------------------------------------------

def _connect_point3_line3(P, L):
    d = L.v.magnitude_squared()
    assert d != 0
    u = ((P.x - L.p.x) * L.v.x + \
         (P.y - L.p.y) * L.v.y + \
         (P.z - L.p.z) * L.v.z) / d
    if not L._u_in(u):
        u = max(min(u, 1.0), 0.0)
    return LineSegment3(P, Point3(L.p.x + u * L.v.x,
                                  L.p.y + u * L.v.y,
                                  L.p.z + u * L.v.z))

def _connect_point3_sphere(P, S):
    v = P - S.c
    v.normalize()
    v *= S.r
    return LineSegment3(P, Point3(S.c.x + v.x, S.c.y + v.y, S.c.z + v.z))

def _connect_point3_plane(p, plane):
    n = plane.n.normalized()
    d = p.dot(plane.n) - plane.k
    return LineSegment3(p, Point3(p.x - n.x * d, p.y - n.y * d, p.z - n.z * d))

def _connect_line3_line3(A, B):
    assert A.v and B.v
    p13 = A.p - B.p
    d1343 = p13.dot(B.v)
    d4321 = B.v.dot(A.v)
    d1321 = p13.dot(A.v)
    d4343 = B.v.magnitude_squared()
    denom = A.v.magnitude_squared() * d4343 - d4321 ** 2
    if denom == 0:
        # Parallel, connect an endpoint with a line
        if isinstance(B, Ray3) or isinstance(B, LineSegment3):
            return _connect_point3_line3(B.p, A)._swap()
        # No endpoint (or endpoint is on A), possibly choose arbitrary
        # point on line.
        return _connect_point3_line3(A.p, B)

    ua = (d1343 * d4321 - d1321 * d4343) / denom
    if not A._u_in(ua):
        ua = max(min(ua, 1.0), 0.0)
    ub = (d1343 + d4321 * ua) / d4343
    if not B._u_in(ub):
        ub = max(min(ub, 1.0), 0.0)
    return LineSegment3(Point3(A.p.x + ua * A.v.x,
                               A.p.y + ua * A.v.y,
                               A.p.z + ua * A.v.z),
                        Point3(B.p.x + ub * B.v.x,
                               B.p.y + ub * B.v.y,
                               B.p.z + ub * B.v.z))

def _connect_line3_plane(L, P):
    d = P.n.dot(L.v)
    if not d:
        # Parallel, choose an endpoint
        return _connect_point3_plane(L.p, P)
    u = (P.k - P.n.dot(L.p)) / d
    if not L._u_in(u):
        # intersects out of range, choose nearest endpoint
        u = max(min(u, 1.0), 0.0)
        return _connect_point3_plane(Point3(L.p.x + u * L.v.x,
                                            L.p.y + u * L.v.y,
                                            L.p.z + u * L.v.z), P)
    # Intersection
    return None

def _connect_sphere_line3(S, L):
    d = L.v.magnitude_squared()
    assert d != 0
    u = ((S.c.x - L.p.x) * L.v.x + \
         (S.c.y - L.p.y) * L.v.y + \
         (S.c.z - L.p.z) * L.v.z) / d
    if not L._u_in(u):
        u = max(min(u, 1.0), 0.0)
    point = Point3(L.p.x + u * L.v.x, L.p.y + u * L.v.y, L.p.z + u * L.v.z)
    v = (point - S.c)
    v.normalize()
    v *= S.r
    return LineSegment3(Point3(S.c.x + v.x, S.c.y + v.y, S.c.z + v.z),
                        point)

def _connect_sphere_sphere(A, B):
    v = B.c - A.c
    d = v.magnitude()
    if A.r >= B.r and d < A.r:
        #centre B inside A
        s1,s2 = +1, +1
    elif B.r > A.r and d < B.r:
        #centre A inside B
        s1,s2 = -1, -1
    elif d >= A.r and d >= B.r:
        s1,s2 = +1, -1

    v.normalize()
    return LineSegment3(Point3(A.c.x + s1* v.x * A.r,
                               A.c.y + s1* v.y * A.r,
                               A.c.z + s1* v.z * A.r),
                        Point3(B.c.x + s2* v.x * B.r,
                               B.c.y + s2* v.y * B.r,
                               B.c.z + s2* v.z * B.r))

def _connect_sphere_plane(S, P):
    c = _connect_point3_plane(S.c, P)
    if not c:
        return None
    p2 = c.p2
    v = p2 - S.c
    v.normalize()
    v *= S.r
    return LineSegment3(Point3(S.c.x + v.x, S.c.y + v.y, S.c.z + v.z),
                        p2)

def _connect_plane_plane(A, B):
    if A.n.cross(B.n):
        # Planes intersect
        return None
    else:
        # Planes are parallel, connect to arbitrary point
        return _connect_point3_plane(A._get_point(), B)

def _intersect_point3_sphere(P, S):
    return abs(P - S.c) <= S.r

def _intersect_line3_sphere(L, S):
    a = L.v.magnitude_squared()
    b = 2 * (L.v.x * (L.p.x - S.c.x) + \
             L.v.y * (L.p.y - S.c.y) + \
             L.v.z * (L.p.z - S.c.z))
    c = S.c.magnitude_squared() + \
        L.p.magnitude_squared() - \
        2 * S.c.dot(L.p) - \
        S.r ** 2
    det = b ** 2 - 4 * a * c
    if det < 0:
        return None
    sq = math.sqrt(det)
    u1 = (-b + sq) / (2 * a)
    u2 = (-b - sq) / (2 * a)
    if not L._u_in(u1):
        u1 = max(min(u1, 1.0), 0.0)
    if not L._u_in(u2):
        u2 = max(min(u2, 1.0), 0.0)
    return LineSegment3(Point3(L.p.x + u1 * L.v.x,
                               L.p.y + u1 * L.v.y,
                               L.p.z + u1 * L.v.z),
                        Point3(L.p.x + u2 * L.v.x,
                               L.p.y + u2 * L.v.y,
                               L.p.z + u2 * L.v.z))

def _intersect_line3_plane(L, P):
    d = P.n.dot(L.v)
    if not d:
        # Parallel
        return None
    u = (P.k - P.n.dot(L.p)) / d
    if not L._u_in(u):
        return None
    return Point3(L.p.x + u * L.v.x,
                  L.p.y + u * L.v.y,
                  L.p.z + u * L.v.z)

def _intersect_plane_plane(A, B):
    n1_m = A.n.magnitude_squared()
    n2_m = B.n.magnitude_squared()
    n1d2 = A.n.dot(B.n)
    det = n1_m * n2_m - n1d2 ** 2
    if det == 0:
        # Parallel
        return None
    c1 = (A.k * n2_m - B.k * n1d2) / det
    c2 = (B.k * n1_m - A.k * n1d2) / det
    return Line3(Point3(c1 * A.n.x + c2 * B.n.x,
                        c1 * A.n.y + c2 * B.n.y,
                        c1 * A.n.z + c2 * B.n.z),
                 A.n.cross(B.n))

class Point3(Vector3, Geometry):
    def __repr__(self):
        return 'Point3(%.2f, %.2f, %.2f)' % (self.x, self.y, self.z)

    def intersect(self, other):
        return other._intersect_point3(self)

    def _intersect_sphere(self, other):
        return _intersect_point3_sphere(self, other)

    def connect(self, other):
        return other._connect_point3(self)

    def _connect_point3(self, other):
        if self != other:
            return LineSegment3(other, self)
        return None

    def _connect_line3(self, other):
        c = _connect_point3_line3(self, other)
        if c:
            return c._swap()

    def _connect_sphere(self, other):
        c = _connect_point3_sphere(self, other)
        if c:
            return c._swap()

    def _connect_plane(self, other):
        c = _connect_point3_plane(self, other)
        if c:
            return c._swap()

class Line3:
    __slots__ = ['p', 'v']

    def __init__(self, *args):
        if len(args) == 3:
            assert isinstance(args[0], Point3) and \
                   isinstance(args[1], Vector3) and \
                   type(args[2]) == float
            self.p = args[0].copy()
            self.v = args[1] * args[2] / abs(args[1])
        elif len(args) == 2:
            if isinstance(args[0], Point3) and isinstance(args[1], Point3):
                self.p = args[0].copy()
                self.v = args[1] - args[0]
            elif isinstance(args[0], Point3) and isinstance(args[1], Vector3):
                self.p = args[0].copy()
                self.v = args[1].copy()
            else:
                raise AttributeError, '%r' % (args,)
        elif len(args) == 1:
            if isinstance(args[0], Line3):
                self.p = args[0].p.copy()
                self.v = args[0].v.copy()
            else:
                raise AttributeError, '%r' % (args,)
        else:
            raise AttributeError, '%r' % (args,)

        # XXX This is annoying.
        #if not self.v:
        #    raise AttributeError, 'Line has zero-length vector'

    def __copy__(self):
        return self.__class__(self.p, self.v)

    copy = __copy__

    def __repr__(self):
        return 'Line3(<%.2f, %.2f, %.2f> + u<%.2f, %.2f, %.2f>)' % \
            (self.p.x, self.p.y, self.p.z, self.v.x, self.v.y, self.v.z)

    p1 = property(lambda self: self.p)
    p2 = property(lambda self: Point3(self.p.x + self.v.x,
                                      self.p.y + self.v.y,
                                      self.p.z + self.v.z))

    def _apply_transform(self, t):
        self.p = t * self.p
        self.v = t * self.v

    def _u_in(self, u):
        return True

    def intersect(self, other):
        return other._intersect_line3(self)

    def _intersect_sphere(self, other):
        return _intersect_line3_sphere(self, other)

    def _intersect_plane(self, other):
        return _intersect_line3_plane(self, other)

    def connect(self, other):
        return other._connect_line3(self)

    def _connect_point3(self, other):
        return _connect_point3_line3(other, self)

    def _connect_line3(self, other):
        return _connect_line3_line3(other, self)

    def _connect_sphere(self, other):
        return _connect_sphere_line3(other, self)

    def _connect_plane(self, other):
        c = _connect_line3_plane(self, other)
        if c:
            return c

class Ray3(Line3):
    def __repr__(self):
        return 'Ray3(<%.2f, %.2f, %.2f> + u<%.2f, %.2f, %.2f>)' % \
            (self.p.x, self.p.y, self.p.z, self.v.x, self.v.y, self.v.z)

    def _u_in(self, u):
        return u >= 0.0

class LineSegment3(Line3):
    def __repr__(self):
        return 'LineSegment3(<%.2f, %.2f, %.2f> to <%.2f, %.2f, %.2f>)' % \
            (self.p.x, self.p.y, self.p.z,
             self.p.x + self.v.x, self.p.y + self.v.y, self.p.z + self.v.z)

    def _u_in(self, u):
        return u >= 0.0 and u <= 1.0

    def __abs__(self):
        return abs(self.v)

    def magnitude_squared(self):
        return self.v.magnitude_squared()

    def _swap(self):
        # used by connect methods to switch order of points
        self.p = self.p2
        self.v *= -1
        return self

    length = property(lambda self: abs(self.v))

class Sphere:
    __slots__ = ['c', 'r']

    def __init__(self, center, radius):
        assert isinstance(center, Vector3) and type(radius) == float
        self.c = center.copy()
        self.r = radius

    def __copy__(self):
        return self.__class__(self.c, self.r)

    copy = __copy__

    def __repr__(self):
        return 'Sphere(<%.2f, %.2f, %.2f>, radius=%.2f)' % \
            (self.c.x, self.c.y, self.c.z, self.r)

    def _apply_transform(self, t):
        self.c = t * self.c

    def intersect(self, other):
        return other._intersect_sphere(self)

    def _intersect_point3(self, other):
        return _intersect_point3_sphere(other, self)

    def _intersect_line3(self, other):
        return _intersect_line3_sphere(other, self)

    def connect(self, other):
        return other._connect_sphere(self)

    def _connect_point3(self, other):
        return _connect_point3_sphere(other, self)

    def _connect_line3(self, other):
        c = _connect_sphere_line3(self, other)
        if c:
            return c._swap()

    def _connect_sphere(self, other):
        return _connect_sphere_sphere(other, self)

    def _connect_plane(self, other):
        c = _connect_sphere_plane(self, other)
        if c:
            return c

class Plane:
    # n.p = k, where n is normal, p is point on plane, k is constant scalar
    __slots__ = ['n', 'k']

    def __init__(self, *args):
        if len(args) == 3:
            assert isinstance(args[0], Point3) and \
                   isinstance(args[1], Point3) and \
                   isinstance(args[2], Point3)
            self.n = (args[1] - args[0]).cross(args[2] - args[0])
            self.n.normalize()
            self.k = self.n.dot(args[0])
        elif len(args) == 2:
            if isinstance(args[0], Point3) and isinstance(args[1], Vector3):
                self.n = args[1].normalized()
                self.k = self.n.dot(args[0])
            elif isinstance(args[0], Vector3) and type(args[1]) == float:
                self.n = args[0].normalized()
                self.k = args[1]
            else:
                raise AttributeError, '%r' % (args,)

        else:
            raise AttributeError, '%r' % (args,)

        if not self.n:
            raise AttributeError, 'Points on plane are colinear'

    def __copy__(self):
        return self.__class__(self.n, self.k)

    copy = __copy__

    def __repr__(self):
        return 'Plane(<%.2f, %.2f, %.2f>.p = %.2f)' % \
            (self.n.x, self.n.y, self.n.z, self.k)

    def _get_point(self):
        # Return an arbitrary point on the plane
        if self.n.z:
            return Point3(0., 0., self.k / self.n.z)
        elif self.n.y:
            return Point3(0., self.k / self.n.y, 0.)
        else:
            return Point3(self.k / self.n.x, 0., 0.)

    def _apply_transform(self, t):
        p = t * self._get_point()
        self.n = t * self.n
        self.k = self.n.dot(p)

    def intersect(self, other):
        return other._intersect_plane(self)

    def _intersect_line3(self, other):
        return _intersect_line3_plane(other, self)

    def _intersect_plane(self, other):
        return _intersect_plane_plane(self, other)

    def connect(self, other):
        return other._connect_plane(self)

    def _connect_point3(self, other):
        return _connect_point3_plane(other, self)

    def _connect_line3(self, other):
        return _connect_line3_plane(other, self)

    def _connect_sphere(self, other):
        return _connect_sphere_plane(other, self)

    def _connect_plane(self, other):
        return _connect_plane_plane(other, self)
</code></pre>
  </div>

  </header>

  <section id="section-items">


    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="ladybug.euclid.Circle" class="name">class <span class="ident">Circle</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Circle', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Circle" class="source">
    <pre><code>class Circle(Geometry):
    __slots__ = ['c', 'r']

    def __init__(self, center, radius):
        assert isinstance(center, Vector2) and type(radius) == float
        self.c = center.copy()
        self.r = radius

    def __copy__(self):
        return self.__class__(self.c, self.r)

    copy = __copy__

    def __repr__(self):
        return 'Circle(<%.2f, %.2f>, radius=%.2f)' % \
            (self.c.x, self.c.y, self.r)

    def _apply_transform(self, t):
        self.c = t * self.c

    def intersect(self, other):
        return other._intersect_circle(self)

    def _intersect_point2(self, other):
        return _intersect_point2_circle(other, self)

    def _intersect_line2(self, other):
        return _intersect_line2_circle(other, self)

    def connect(self, other):
        return other._connect_circle(self)

    def _connect_point2(self, other):
        return _connect_point2_circle(other, self)

    def _connect_line2(self, other):
        c = _connect_circle_line2(self, other)
        if c:
            return c._swap()

    def _connect_circle(self, other):
        return _connect_circle_circle(other, self)
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#ladybug.euclid.Circle">Circle</a></li>
          <li><a href="#ladybug.euclid.Geometry">Geometry</a></li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="ladybug.euclid.Circle.c" class="name">var <span class="ident">c</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Circle.r" class="name">var <span class="ident">r</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Circle.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, center, radius)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Circle.__init__', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Circle.__init__" class="source">
    <pre><code>def __init__(self, center, radius):
    assert isinstance(center, Vector2) and type(radius) == float
    self.c = center.copy()
    self.r = radius
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Circle.connect">
    <p>def <span class="ident">connect</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Geometry">Geometry</a></code>.<code><a href="#ladybug.euclid.Geometry.connect">connect</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Circle.connect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Circle.connect" class="source">
    <pre><code>def connect(self, other):
    return other._connect_circle(self)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Circle.copy">
    <p>def <span class="ident">copy</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Circle.copy', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Circle.copy" class="source">
    <pre><code>def __copy__(self):
    return self.__class__(self.c, self.r)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Circle.distance">
    <p>def <span class="ident">distance</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Geometry">Geometry</a></code>.<code><a href="#ladybug.euclid.Geometry.distance">distance</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Circle.distance', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Circle.distance" class="source">
    <pre><code>def distance(self, other):
    c = self.connect(other)
    if c:
        return c.length
    return 0.0
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Circle.intersect">
    <p>def <span class="ident">intersect</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Geometry">Geometry</a></code>.<code><a href="#ladybug.euclid.Geometry.intersect">intersect</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Circle.intersect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Circle.intersect" class="source">
    <pre><code>def intersect(self, other):
    return other._intersect_circle(self)
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="ladybug.euclid.Geometry" class="name">class <span class="ident">Geometry</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Geometry', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Geometry" class="source">
    <pre><code>class Geometry:
    def _connect_unimplemented(self, other):
        raise AttributeError, 'Cannot connect %s to %s' % \
            (self.__class__, other.__class__)

    def _intersect_unimplemented(self, other):
        raise AttributeError, 'Cannot intersect %s and %s' % \
            (self.__class__, other.__class__)

    _intersect_point2 = _intersect_unimplemented
    _intersect_line2 = _intersect_unimplemented
    _intersect_circle = _intersect_unimplemented
    _connect_point2 = _connect_unimplemented
    _connect_line2 = _connect_unimplemented
    _connect_circle = _connect_unimplemented

    _intersect_point3 = _intersect_unimplemented
    _intersect_line3 = _intersect_unimplemented
    _intersect_sphere = _intersect_unimplemented
    _intersect_plane = _intersect_unimplemented
    _connect_point3 = _connect_unimplemented
    _connect_line3 = _connect_unimplemented
    _connect_sphere = _connect_unimplemented
    _connect_plane = _connect_unimplemented

    def intersect(self, other):
        raise NotImplementedError

    def connect(self, other):
        raise NotImplementedError

    def distance(self, other):
        c = self.connect(other)
        if c:
            return c.length
        return 0.0
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#ladybug.euclid.Geometry">Geometry</a></li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Geometry.connect">
    <p>def <span class="ident">connect</span>(</p><p>self, other)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Geometry.connect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Geometry.connect" class="source">
    <pre><code>def connect(self, other):
    raise NotImplementedError
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Geometry.distance">
    <p>def <span class="ident">distance</span>(</p><p>self, other)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Geometry.distance', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Geometry.distance" class="source">
    <pre><code>def distance(self, other):
    c = self.connect(other)
    if c:
        return c.length
    return 0.0
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Geometry.intersect">
    <p>def <span class="ident">intersect</span>(</p><p>self, other)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Geometry.intersect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Geometry.intersect" class="source">
    <pre><code>def intersect(self, other):
    raise NotImplementedError
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="ladybug.euclid.Line2" class="name">class <span class="ident">Line2</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Line2', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Line2" class="source">
    <pre><code>class Line2(Geometry):
    __slots__ = ['p', 'v']

    def __init__(self, *args):
        if len(args) == 3:
            assert isinstance(args[0], Point2) and \
                   isinstance(args[1], Vector2) and \
                   type(args[2]) == float
            self.p = args[0].copy()
            self.v = args[1] * args[2] / abs(args[1])
        elif len(args) == 2:
            if isinstance(args[0], Point2) and isinstance(args[1], Point2):
                self.p = args[0].copy()
                self.v = args[1] - args[0]
            elif isinstance(args[0], Point2) and isinstance(args[1], Vector2):
                self.p = args[0].copy()
                self.v = args[1].copy()
            else:
                raise AttributeError, '%r' % (args,)
        elif len(args) == 1:
            if isinstance(args[0], Line2):
                self.p = args[0].p.copy()
                self.v = args[0].v.copy()
            else:
                raise AttributeError, '%r' % (args,)
        else:
            raise AttributeError, '%r' % (args,)

        if not self.v:
            raise AttributeError, 'Line has zero-length vector'

    def __copy__(self):
        return self.__class__(self.p, self.v)

    copy = __copy__

    def __repr__(self):
        return 'Line2(<%.2f, %.2f> + u<%.2f, %.2f>)' % \
            (self.p.x, self.p.y, self.v.x, self.v.y)

    p1 = property(lambda self: self.p)
    p2 = property(lambda self: Point2(self.p.x + self.v.x,
                                      self.p.y + self.v.y))

    def _apply_transform(self, t):
        self.p = t * self.p
        self.v = t * self.v

    def _u_in(self, u):
        return True

    def intersect(self, other):
        return other._intersect_line2(self)

    def _intersect_line2(self, other):
        return _intersect_line2_line2(self, other)

    def _intersect_circle(self, other):
        return _intersect_line2_circle(self, other)

    def connect(self, other):
        return other._connect_line2(self)

    def _connect_point2(self, other):
        return _connect_point2_line2(other, self)

    def _connect_line2(self, other):
        return _connect_line2_line2(other, self)

    def _connect_circle(self, other):
        return _connect_circle_line2(other, self)
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#ladybug.euclid.Line2">Line2</a></li>
          <li><a href="#ladybug.euclid.Geometry">Geometry</a></li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="ladybug.euclid.Line2.p1" class="name">var <span class="ident">p1</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Line2.p2" class="name">var <span class="ident">p2</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="ladybug.euclid.Line2.p" class="name">var <span class="ident">p</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Line2.p1" class="name">var <span class="ident">p1</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Line2.p2" class="name">var <span class="ident">p2</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Line2.v" class="name">var <span class="ident">v</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Line2.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, *args)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Line2.__init__', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Line2.__init__" class="source">
    <pre><code>def __init__(self, *args):
    if len(args) == 3:
        assert isinstance(args[0], Point2) and \
               isinstance(args[1], Vector2) and \
               type(args[2]) == float
        self.p = args[0].copy()
        self.v = args[1] * args[2] / abs(args[1])
    elif len(args) == 2:
        if isinstance(args[0], Point2) and isinstance(args[1], Point2):
            self.p = args[0].copy()
            self.v = args[1] - args[0]
        elif isinstance(args[0], Point2) and isinstance(args[1], Vector2):
            self.p = args[0].copy()
            self.v = args[1].copy()
        else:
            raise AttributeError, '%r' % (args,)
    elif len(args) == 1:
        if isinstance(args[0], Line2):
            self.p = args[0].p.copy()
            self.v = args[0].v.copy()
        else:
            raise AttributeError, '%r' % (args,)
    else:
        raise AttributeError, '%r' % (args,)
    if not self.v:
        raise AttributeError, 'Line has zero-length vector'
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Line2.connect">
    <p>def <span class="ident">connect</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Geometry">Geometry</a></code>.<code><a href="#ladybug.euclid.Geometry.connect">connect</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Line2.connect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Line2.connect" class="source">
    <pre><code>def connect(self, other):
    return other._connect_line2(self)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Line2.copy">
    <p>def <span class="ident">copy</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Line2.copy', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Line2.copy" class="source">
    <pre><code>def __copy__(self):
    return self.__class__(self.p, self.v)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Line2.distance">
    <p>def <span class="ident">distance</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Geometry">Geometry</a></code>.<code><a href="#ladybug.euclid.Geometry.distance">distance</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Line2.distance', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Line2.distance" class="source">
    <pre><code>def distance(self, other):
    c = self.connect(other)
    if c:
        return c.length
    return 0.0
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Line2.intersect">
    <p>def <span class="ident">intersect</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Geometry">Geometry</a></code>.<code><a href="#ladybug.euclid.Geometry.intersect">intersect</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Line2.intersect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Line2.intersect" class="source">
    <pre><code>def intersect(self, other):
    return other._intersect_line2(self)
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="ladybug.euclid.Line3" class="name">class <span class="ident">Line3</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Line3', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Line3" class="source">
    <pre><code>class Line3:
    __slots__ = ['p', 'v']

    def __init__(self, *args):
        if len(args) == 3:
            assert isinstance(args[0], Point3) and \
                   isinstance(args[1], Vector3) and \
                   type(args[2]) == float
            self.p = args[0].copy()
            self.v = args[1] * args[2] / abs(args[1])
        elif len(args) == 2:
            if isinstance(args[0], Point3) and isinstance(args[1], Point3):
                self.p = args[0].copy()
                self.v = args[1] - args[0]
            elif isinstance(args[0], Point3) and isinstance(args[1], Vector3):
                self.p = args[0].copy()
                self.v = args[1].copy()
            else:
                raise AttributeError, '%r' % (args,)
        elif len(args) == 1:
            if isinstance(args[0], Line3):
                self.p = args[0].p.copy()
                self.v = args[0].v.copy()
            else:
                raise AttributeError, '%r' % (args,)
        else:
            raise AttributeError, '%r' % (args,)

        # XXX This is annoying.
        #if not self.v:
        #    raise AttributeError, 'Line has zero-length vector'

    def __copy__(self):
        return self.__class__(self.p, self.v)

    copy = __copy__

    def __repr__(self):
        return 'Line3(<%.2f, %.2f, %.2f> + u<%.2f, %.2f, %.2f>)' % \
            (self.p.x, self.p.y, self.p.z, self.v.x, self.v.y, self.v.z)

    p1 = property(lambda self: self.p)
    p2 = property(lambda self: Point3(self.p.x + self.v.x,
                                      self.p.y + self.v.y,
                                      self.p.z + self.v.z))

    def _apply_transform(self, t):
        self.p = t * self.p
        self.v = t * self.v

    def _u_in(self, u):
        return True

    def intersect(self, other):
        return other._intersect_line3(self)

    def _intersect_sphere(self, other):
        return _intersect_line3_sphere(self, other)

    def _intersect_plane(self, other):
        return _intersect_line3_plane(self, other)

    def connect(self, other):
        return other._connect_line3(self)

    def _connect_point3(self, other):
        return _connect_point3_line3(other, self)

    def _connect_line3(self, other):
        return _connect_line3_line3(other, self)

    def _connect_sphere(self, other):
        return _connect_sphere_line3(other, self)

    def _connect_plane(self, other):
        c = _connect_line3_plane(self, other)
        if c:
            return c
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#ladybug.euclid.Line3">Line3</a></li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="ladybug.euclid.Line3.p1" class="name">var <span class="ident">p1</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Line3.p2" class="name">var <span class="ident">p2</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="ladybug.euclid.Line3.p" class="name">var <span class="ident">p</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Line3.p1" class="name">var <span class="ident">p1</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Line3.p2" class="name">var <span class="ident">p2</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Line3.v" class="name">var <span class="ident">v</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Line3.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, *args)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Line3.__init__', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Line3.__init__" class="source">
    <pre><code>def __init__(self, *args):
    if len(args) == 3:
        assert isinstance(args[0], Point3) and \
               isinstance(args[1], Vector3) and \
               type(args[2]) == float
        self.p = args[0].copy()
        self.v = args[1] * args[2] / abs(args[1])
    elif len(args) == 2:
        if isinstance(args[0], Point3) and isinstance(args[1], Point3):
            self.p = args[0].copy()
            self.v = args[1] - args[0]
        elif isinstance(args[0], Point3) and isinstance(args[1], Vector3):
            self.p = args[0].copy()
            self.v = args[1].copy()
        else:
            raise AttributeError, '%r' % (args,)
    elif len(args) == 1:
        if isinstance(args[0], Line3):
            self.p = args[0].p.copy()
            self.v = args[0].v.copy()
        else:
            raise AttributeError, '%r' % (args,)
    else:
        raise AttributeError, '%r' % (args,)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Line3.connect">
    <p>def <span class="ident">connect</span>(</p><p>self, other)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Line3.connect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Line3.connect" class="source">
    <pre><code>def connect(self, other):
    return other._connect_line3(self)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Line3.copy">
    <p>def <span class="ident">copy</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Line3.copy', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Line3.copy" class="source">
    <pre><code>def __copy__(self):
    return self.__class__(self.p, self.v)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Line3.intersect">
    <p>def <span class="ident">intersect</span>(</p><p>self, other)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Line3.intersect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Line3.intersect" class="source">
    <pre><code>def intersect(self, other):
    return other._intersect_line3(self)
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="ladybug.euclid.LineSegment2" class="name">class <span class="ident">LineSegment2</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.LineSegment2', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.LineSegment2" class="source">
    <pre><code>class LineSegment2(Line2):
    def __repr__(self):
        return 'LineSegment2(<%.2f, %.2f> to <%.2f, %.2f>)' % \
            (self.p.x, self.p.y, self.p.x + self.v.x, self.p.y + self.v.y)

    def _u_in(self, u):
        return u >= 0.0 and u <= 1.0

    def __abs__(self):
        return abs(self.v)

    def magnitude_squared(self):
        return self.v.magnitude_squared()

    def _swap(self):
        # used by connect methods to switch order of points
        self.p = self.p2
        self.v *= -1
        return self

    length = property(lambda self: abs(self.v))
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#ladybug.euclid.LineSegment2">LineSegment2</a></li>
          <li><a href="#ladybug.euclid.Line2">Line2</a></li>
          <li><a href="#ladybug.euclid.Geometry">Geometry</a></li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="ladybug.euclid.LineSegment2.length" class="name">var <span class="ident">length</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="ladybug.euclid.LineSegment2.length" class="name">var <span class="ident">length</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.LineSegment2.p" class="name">var <span class="ident">p</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line2">Line2</a></code>.<code><a href="#ladybug.euclid.Line2.p">p</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.LineSegment2.p1" class="name">var <span class="ident">p1</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line2">Line2</a></code>.<code><a href="#ladybug.euclid.Line2.p1">p1</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.LineSegment2.p2" class="name">var <span class="ident">p2</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line2">Line2</a></code>.<code><a href="#ladybug.euclid.Line2.p2">p2</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.LineSegment2.v" class="name">var <span class="ident">v</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line2">Line2</a></code>.<code><a href="#ladybug.euclid.Line2.v">v</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.LineSegment2.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, *args)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line2">Line2</a></code>.<code><a href="#ladybug.euclid.Line2.__init__">__init__</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.LineSegment2.__init__', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.LineSegment2.__init__" class="source">
    <pre><code>def __init__(self, *args):
    if len(args) == 3:
        assert isinstance(args[0], Point2) and \
               isinstance(args[1], Vector2) and \
               type(args[2]) == float
        self.p = args[0].copy()
        self.v = args[1] * args[2] / abs(args[1])
    elif len(args) == 2:
        if isinstance(args[0], Point2) and isinstance(args[1], Point2):
            self.p = args[0].copy()
            self.v = args[1] - args[0]
        elif isinstance(args[0], Point2) and isinstance(args[1], Vector2):
            self.p = args[0].copy()
            self.v = args[1].copy()
        else:
            raise AttributeError, '%r' % (args,)
    elif len(args) == 1:
        if isinstance(args[0], Line2):
            self.p = args[0].p.copy()
            self.v = args[0].v.copy()
        else:
            raise AttributeError, '%r' % (args,)
    else:
        raise AttributeError, '%r' % (args,)
    if not self.v:
        raise AttributeError, 'Line has zero-length vector'
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.LineSegment2.connect">
    <p>def <span class="ident">connect</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line2">Line2</a></code>.<code><a href="#ladybug.euclid.Line2.connect">connect</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.LineSegment2.connect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.LineSegment2.connect" class="source">
    <pre><code>def connect(self, other):
    return other._connect_line2(self)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.LineSegment2.copy">
    <p>def <span class="ident">copy</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line2">Line2</a></code>.<code><a href="#ladybug.euclid.Line2.copy">copy</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.LineSegment2.copy', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.LineSegment2.copy" class="source">
    <pre><code>def __copy__(self):
    return self.__class__(self.p, self.v)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.LineSegment2.distance">
    <p>def <span class="ident">distance</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line2">Line2</a></code>.<code><a href="#ladybug.euclid.Line2.distance">distance</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.LineSegment2.distance', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.LineSegment2.distance" class="source">
    <pre><code>def distance(self, other):
    c = self.connect(other)
    if c:
        return c.length
    return 0.0
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.LineSegment2.intersect">
    <p>def <span class="ident">intersect</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line2">Line2</a></code>.<code><a href="#ladybug.euclid.Line2.intersect">intersect</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.LineSegment2.intersect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.LineSegment2.intersect" class="source">
    <pre><code>def intersect(self, other):
    return other._intersect_line2(self)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.LineSegment2.magnitude_squared">
    <p>def <span class="ident">magnitude_squared</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.LineSegment2.magnitude_squared', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.LineSegment2.magnitude_squared" class="source">
    <pre><code>def magnitude_squared(self):
    return self.v.magnitude_squared()
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="ladybug.euclid.LineSegment3" class="name">class <span class="ident">LineSegment3</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.LineSegment3', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.LineSegment3" class="source">
    <pre><code>class LineSegment3(Line3):
    def __repr__(self):
        return 'LineSegment3(<%.2f, %.2f, %.2f> to <%.2f, %.2f, %.2f>)' % \
            (self.p.x, self.p.y, self.p.z,
             self.p.x + self.v.x, self.p.y + self.v.y, self.p.z + self.v.z)

    def _u_in(self, u):
        return u >= 0.0 and u <= 1.0

    def __abs__(self):
        return abs(self.v)

    def magnitude_squared(self):
        return self.v.magnitude_squared()

    def _swap(self):
        # used by connect methods to switch order of points
        self.p = self.p2
        self.v *= -1
        return self

    length = property(lambda self: abs(self.v))
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#ladybug.euclid.LineSegment3">LineSegment3</a></li>
          <li><a href="#ladybug.euclid.Line3">Line3</a></li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="ladybug.euclid.LineSegment3.length" class="name">var <span class="ident">length</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="ladybug.euclid.LineSegment3.length" class="name">var <span class="ident">length</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.LineSegment3.p" class="name">var <span class="ident">p</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line3">Line3</a></code>.<code><a href="#ladybug.euclid.Line3.p">p</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.LineSegment3.p1" class="name">var <span class="ident">p1</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line3">Line3</a></code>.<code><a href="#ladybug.euclid.Line3.p1">p1</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.LineSegment3.p2" class="name">var <span class="ident">p2</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line3">Line3</a></code>.<code><a href="#ladybug.euclid.Line3.p2">p2</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.LineSegment3.v" class="name">var <span class="ident">v</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line3">Line3</a></code>.<code><a href="#ladybug.euclid.Line3.v">v</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.LineSegment3.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, *args)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line3">Line3</a></code>.<code><a href="#ladybug.euclid.Line3.__init__">__init__</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.LineSegment3.__init__', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.LineSegment3.__init__" class="source">
    <pre><code>def __init__(self, *args):
    if len(args) == 3:
        assert isinstance(args[0], Point3) and \
               isinstance(args[1], Vector3) and \
               type(args[2]) == float
        self.p = args[0].copy()
        self.v = args[1] * args[2] / abs(args[1])
    elif len(args) == 2:
        if isinstance(args[0], Point3) and isinstance(args[1], Point3):
            self.p = args[0].copy()
            self.v = args[1] - args[0]
        elif isinstance(args[0], Point3) and isinstance(args[1], Vector3):
            self.p = args[0].copy()
            self.v = args[1].copy()
        else:
            raise AttributeError, '%r' % (args,)
    elif len(args) == 1:
        if isinstance(args[0], Line3):
            self.p = args[0].p.copy()
            self.v = args[0].v.copy()
        else:
            raise AttributeError, '%r' % (args,)
    else:
        raise AttributeError, '%r' % (args,)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.LineSegment3.connect">
    <p>def <span class="ident">connect</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line3">Line3</a></code>.<code><a href="#ladybug.euclid.Line3.connect">connect</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.LineSegment3.connect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.LineSegment3.connect" class="source">
    <pre><code>def connect(self, other):
    return other._connect_line3(self)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.LineSegment3.copy">
    <p>def <span class="ident">copy</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line3">Line3</a></code>.<code><a href="#ladybug.euclid.Line3.copy">copy</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.LineSegment3.copy', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.LineSegment3.copy" class="source">
    <pre><code>def __copy__(self):
    return self.__class__(self.p, self.v)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.LineSegment3.intersect">
    <p>def <span class="ident">intersect</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line3">Line3</a></code>.<code><a href="#ladybug.euclid.Line3.intersect">intersect</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.LineSegment3.intersect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.LineSegment3.intersect" class="source">
    <pre><code>def intersect(self, other):
    return other._intersect_line3(self)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.LineSegment3.magnitude_squared">
    <p>def <span class="ident">magnitude_squared</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.LineSegment3.magnitude_squared', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.LineSegment3.magnitude_squared" class="source">
    <pre><code>def magnitude_squared(self):
    return self.v.magnitude_squared()
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="ladybug.euclid.Matrix3" class="name">class <span class="ident">Matrix3</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix3', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix3" class="source">
    <pre><code>class Matrix3:
    __slots__ = list('abcefgijk')

    def __init__(self):
        self.identity()

    def __copy__(self):
        M = Matrix3()
        M.a = self.a
        M.b = self.b
        M.c = self.c
        M.e = self.e
        M.f = self.f
        M.g = self.g
        M.i = self.i
        M.j = self.j
        M.k = self.k
        return M

    copy = __copy__
    def __repr__(self):
        return ('Matrix3([% 8.2f % 8.2f % 8.2f\n'  \
                '         % 8.2f % 8.2f % 8.2f\n'  \
                '         % 8.2f % 8.2f % 8.2f])') \
                % (self.a, self.b, self.c,
                   self.e, self.f, self.g,
                   self.i, self.j, self.k)

    def __getitem__(self, key):
        return [self.a, self.e, self.i,
                self.b, self.f, self.j,
                self.c, self.g, self.k][key]

    def __setitem__(self, key, value):
        L = self[:]
        L[key] = value
        (self.a, self.e, self.i,
         self.b, self.f, self.j,
         self.c, self.g, self.k) = L

    def __mul__(self, other):
        if isinstance(other, Matrix3):
            # Caching repeatedly accessed attributes in local variables
            # apparently increases performance by 20%.  Attrib: Will McGugan.
            Aa = self.a
            Ab = self.b
            Ac = self.c
            Ae = self.e
            Af = self.f
            Ag = self.g
            Ai = self.i
            Aj = self.j
            Ak = self.k
            Ba = other.a
            Bb = other.b
            Bc = other.c
            Be = other.e
            Bf = other.f
            Bg = other.g
            Bi = other.i
            Bj = other.j
            Bk = other.k
            C = Matrix3()
            C.a = Aa * Ba + Ab * Be + Ac * Bi
            C.b = Aa * Bb + Ab * Bf + Ac * Bj
            C.c = Aa * Bc + Ab * Bg + Ac * Bk
            C.e = Ae * Ba + Af * Be + Ag * Bi
            C.f = Ae * Bb + Af * Bf + Ag * Bj
            C.g = Ae * Bc + Af * Bg + Ag * Bk
            C.i = Ai * Ba + Aj * Be + Ak * Bi
            C.j = Ai * Bb + Aj * Bf + Ak * Bj
            C.k = Ai * Bc + Aj * Bg + Ak * Bk
            return C
        elif isinstance(other, Point2):
            A = self
            B = other
            P = Point2(0, 0)
            P.x = A.a * B.x + A.b * B.y + A.c
            P.y = A.e * B.x + A.f * B.y + A.g
            return P
        elif isinstance(other, Vector2):
            A = self
            B = other
            V = Vector2(0, 0)
            V.x = A.a * B.x + A.b * B.y
            V.y = A.e * B.x + A.f * B.y
            return V
        else:
            other = other.copy()
            other._apply_transform(self)
            return other

    def __imul__(self, other):
        assert isinstance(other, Matrix3)
        # Cache attributes in local vars (see Matrix3.__mul__).
        Aa = self.a
        Ab = self.b
        Ac = self.c
        Ae = self.e
        Af = self.f
        Ag = self.g
        Ai = self.i
        Aj = self.j
        Ak = self.k
        Ba = other.a
        Bb = other.b
        Bc = other.c
        Be = other.e
        Bf = other.f
        Bg = other.g
        Bi = other.i
        Bj = other.j
        Bk = other.k
        self.a = Aa * Ba + Ab * Be + Ac * Bi
        self.b = Aa * Bb + Ab * Bf + Ac * Bj
        self.c = Aa * Bc + Ab * Bg + Ac * Bk
        self.e = Ae * Ba + Af * Be + Ag * Bi
        self.f = Ae * Bb + Af * Bf + Ag * Bj
        self.g = Ae * Bc + Af * Bg + Ag * Bk
        self.i = Ai * Ba + Aj * Be + Ak * Bi
        self.j = Ai * Bb + Aj * Bf + Ak * Bj
        self.k = Ai * Bc + Aj * Bg + Ak * Bk
        return self

    def identity(self):
        self.a = self.f = self.k = 1.
        self.b = self.c = self.e = self.g = self.i = self.j = 0
        return self

    def scale(self, x, y):
        self *= Matrix3.new_scale(x, y)
        return self

    def translate(self, x, y):
        self *= Matrix3.new_translate(x, y)
        return self

    def rotate(self, angle):
        self *= Matrix3.new_rotate(angle)
        return self

    # Static constructors
    def new_identity(cls):
        self = cls()
        return self
    new_identity = classmethod(new_identity)

    def new_scale(cls, x, y):
        self = cls()
        self.a = x
        self.f = y
        return self
    new_scale = classmethod(new_scale)

    def new_translate(cls, x, y):
        self = cls()
        self.c = x
        self.g = y
        return self
    new_translate = classmethod(new_translate)

    def new_rotate(cls, angle):
        self = cls()
        s = math.sin(angle)
        c = math.cos(angle)
        self.a = self.f = c
        self.b = -s
        self.e = s
        return self
    new_rotate = classmethod(new_rotate)

    def determinant(self):
        return (self.a*self.f*self.k
                + self.b*self.g*self.i
                + self.c*self.e*self.j
                - self.a*self.g*self.j
                - self.b*self.e*self.k
                - self.c*self.f*self.i)

    def inverse(self):
        tmp = Matrix3()
        d = self.determinant()

        if abs(d) < 0.001:
            # No inverse, return identity
            return tmp
        else:
            d = 1.0 / d

            tmp.a = d * (self.f*self.k - self.g*self.j)
            tmp.b = d * (self.c*self.j - self.b*self.k)
            tmp.c = d * (self.b*self.g - self.c*self.f)
            tmp.e = d * (self.g*self.i - self.e*self.k)
            tmp.f = d * (self.a*self.k - self.c*self.i)
            tmp.g = d * (self.c*self.e - self.a*self.g)
            tmp.i = d * (self.e*self.j - self.f*self.i)
            tmp.j = d * (self.b*self.i - self.a*self.j)
            tmp.k = d * (self.a*self.f - self.b*self.e)

            return tmp
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#ladybug.euclid.Matrix3">Matrix3</a></li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="ladybug.euclid.Matrix3.a" class="name">var <span class="ident">a</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix3.b" class="name">var <span class="ident">b</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix3.c" class="name">var <span class="ident">c</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix3.e" class="name">var <span class="ident">e</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix3.f" class="name">var <span class="ident">f</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix3.g" class="name">var <span class="ident">g</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix3.i" class="name">var <span class="ident">i</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix3.j" class="name">var <span class="ident">j</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix3.k" class="name">var <span class="ident">k</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix3.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix3.__init__', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix3.__init__" class="source">
    <pre><code>def __init__(self):
    self.identity()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix3.copy">
    <p>def <span class="ident">copy</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix3.copy', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix3.copy" class="source">
    <pre><code>def __copy__(self):
    M = Matrix3()
    M.a = self.a
    M.b = self.b
    M.c = self.c
    M.e = self.e
    M.f = self.f
    M.g = self.g
    M.i = self.i
    M.j = self.j
    M.k = self.k
    return M
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix3.determinant">
    <p>def <span class="ident">determinant</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix3.determinant', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix3.determinant" class="source">
    <pre><code>def determinant(self):
    return (self.a*self.f*self.k
            + self.b*self.g*self.i
            + self.c*self.e*self.j
            - self.a*self.g*self.j
            - self.b*self.e*self.k
            - self.c*self.f*self.i)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix3.identity">
    <p>def <span class="ident">identity</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix3.identity', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix3.identity" class="source">
    <pre><code>def identity(self):
    self.a = self.f = self.k = 1.
    self.b = self.c = self.e = self.g = self.i = self.j = 0
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix3.inverse">
    <p>def <span class="ident">inverse</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix3.inverse', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix3.inverse" class="source">
    <pre><code>def inverse(self):
    tmp = Matrix3()
    d = self.determinant()
    if abs(d) < 0.001:
        # No inverse, return identity
        return tmp
    else:
        d = 1.0 / d
        tmp.a = d * (self.f*self.k - self.g*self.j)
        tmp.b = d * (self.c*self.j - self.b*self.k)
        tmp.c = d * (self.b*self.g - self.c*self.f)
        tmp.e = d * (self.g*self.i - self.e*self.k)
        tmp.f = d * (self.a*self.k - self.c*self.i)
        tmp.g = d * (self.c*self.e - self.a*self.g)
        tmp.i = d * (self.e*self.j - self.f*self.i)
        tmp.j = d * (self.b*self.i - self.a*self.j)
        tmp.k = d * (self.a*self.f - self.b*self.e)
        return tmp
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix3.new_identity">
    <p>def <span class="ident">new_identity</span>(</p><p>cls)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix3.new_identity', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix3.new_identity" class="source">
    <pre><code>def new_identity(cls):
    self = cls()
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix3.new_rotate">
    <p>def <span class="ident">new_rotate</span>(</p><p>cls, angle)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix3.new_rotate', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix3.new_rotate" class="source">
    <pre><code>def new_rotate(cls, angle):
    self = cls()
    s = math.sin(angle)
    c = math.cos(angle)
    self.a = self.f = c
    self.b = -s
    self.e = s
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix3.new_scale">
    <p>def <span class="ident">new_scale</span>(</p><p>cls, x, y)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix3.new_scale', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix3.new_scale" class="source">
    <pre><code>def new_scale(cls, x, y):
    self = cls()
    self.a = x
    self.f = y
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix3.new_translate">
    <p>def <span class="ident">new_translate</span>(</p><p>cls, x, y)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix3.new_translate', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix3.new_translate" class="source">
    <pre><code>def new_translate(cls, x, y):
    self = cls()
    self.c = x
    self.g = y
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix3.rotate">
    <p>def <span class="ident">rotate</span>(</p><p>self, angle)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix3.rotate', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix3.rotate" class="source">
    <pre><code>def rotate(self, angle):
    self *= Matrix3.new_rotate(angle)
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix3.scale">
    <p>def <span class="ident">scale</span>(</p><p>self, x, y)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix3.scale', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix3.scale" class="source">
    <pre><code>def scale(self, x, y):
    self *= Matrix3.new_scale(x, y)
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix3.translate">
    <p>def <span class="ident">translate</span>(</p><p>self, x, y)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix3.translate', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix3.translate" class="source">
    <pre><code>def translate(self, x, y):
    self *= Matrix3.new_translate(x, y)
    return self
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="ladybug.euclid.Matrix4" class="name">class <span class="ident">Matrix4</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4" class="source">
    <pre><code>class Matrix4:
    __slots__ = list('abcdefghijklmnop')

    def __init__(self):
        self.identity()

    def __copy__(self):
        M = Matrix4()
        M.a = self.a
        M.b = self.b
        M.c = self.c
        M.d = self.d
        M.e = self.e
        M.f = self.f
        M.g = self.g
        M.h = self.h
        M.i = self.i
        M.j = self.j
        M.k = self.k
        M.l = self.l
        M.m = self.m
        M.n = self.n
        M.o = self.o
        M.p = self.p
        return M

    copy = __copy__


    def __repr__(self):
        return ('Matrix4([% 8.2f % 8.2f % 8.2f % 8.2f\n'  \
                '         % 8.2f % 8.2f % 8.2f % 8.2f\n'  \
                '         % 8.2f % 8.2f % 8.2f % 8.2f\n'  \
                '         % 8.2f % 8.2f % 8.2f % 8.2f])') \
                % (self.a, self.b, self.c, self.d,
                   self.e, self.f, self.g, self.h,
                   self.i, self.j, self.k, self.l,
                   self.m, self.n, self.o, self.p)

    def __getitem__(self, key):
        return [self.a, self.e, self.i, self.m,
                self.b, self.f, self.j, self.n,
                self.c, self.g, self.k, self.o,
                self.d, self.h, self.l, self.p][key]

    def __setitem__(self, key, value):
        L = self[:]
        L[key] = value
        (self.a, self.e, self.i, self.m,
         self.b, self.f, self.j, self.n,
         self.c, self.g, self.k, self.o,
         self.d, self.h, self.l, self.p) = L

    def __mul__(self, other):
        if isinstance(other, Matrix4):
            # Cache attributes in local vars (see Matrix3.__mul__).
            Aa = self.a
            Ab = self.b
            Ac = self.c
            Ad = self.d
            Ae = self.e
            Af = self.f
            Ag = self.g
            Ah = self.h
            Ai = self.i
            Aj = self.j
            Ak = self.k
            Al = self.l
            Am = self.m
            An = self.n
            Ao = self.o
            Ap = self.p
            Ba = other.a
            Bb = other.b
            Bc = other.c
            Bd = other.d
            Be = other.e
            Bf = other.f
            Bg = other.g
            Bh = other.h
            Bi = other.i
            Bj = other.j
            Bk = other.k
            Bl = other.l
            Bm = other.m
            Bn = other.n
            Bo = other.o
            Bp = other.p
            C = Matrix4()
            C.a = Aa * Ba + Ab * Be + Ac * Bi + Ad * Bm
            C.b = Aa * Bb + Ab * Bf + Ac * Bj + Ad * Bn
            C.c = Aa * Bc + Ab * Bg + Ac * Bk + Ad * Bo
            C.d = Aa * Bd + Ab * Bh + Ac * Bl + Ad * Bp
            C.e = Ae * Ba + Af * Be + Ag * Bi + Ah * Bm
            C.f = Ae * Bb + Af * Bf + Ag * Bj + Ah * Bn
            C.g = Ae * Bc + Af * Bg + Ag * Bk + Ah * Bo
            C.h = Ae * Bd + Af * Bh + Ag * Bl + Ah * Bp
            C.i = Ai * Ba + Aj * Be + Ak * Bi + Al * Bm
            C.j = Ai * Bb + Aj * Bf + Ak * Bj + Al * Bn
            C.k = Ai * Bc + Aj * Bg + Ak * Bk + Al * Bo
            C.l = Ai * Bd + Aj * Bh + Ak * Bl + Al * Bp
            C.m = Am * Ba + An * Be + Ao * Bi + Ap * Bm
            C.n = Am * Bb + An * Bf + Ao * Bj + Ap * Bn
            C.o = Am * Bc + An * Bg + Ao * Bk + Ap * Bo
            C.p = Am * Bd + An * Bh + Ao * Bl + Ap * Bp
            return C
        elif isinstance(other, Point3):
            A = self
            B = other
            P = Point3(0, 0, 0)
            P.x = A.a * B.x + A.b * B.y + A.c * B.z + A.d
            P.y = A.e * B.x + A.f * B.y + A.g * B.z + A.h
            P.z = A.i * B.x + A.j * B.y + A.k * B.z + A.l
            return P
        elif isinstance(other, Vector3):
            A = self
            B = other
            V = Vector3(0, 0, 0)
            V.x = A.a * B.x + A.b * B.y + A.c * B.z
            V.y = A.e * B.x + A.f * B.y + A.g * B.z
            V.z = A.i * B.x + A.j * B.y + A.k * B.z
            return V
        else:
            other = other.copy()
            other._apply_transform(self)
            return other

    def __imul__(self, other):
        assert isinstance(other, Matrix4)
        # Cache attributes in local vars (see Matrix3.__mul__).
        Aa = self.a
        Ab = self.b
        Ac = self.c
        Ad = self.d
        Ae = self.e
        Af = self.f
        Ag = self.g
        Ah = self.h
        Ai = self.i
        Aj = self.j
        Ak = self.k
        Al = self.l
        Am = self.m
        An = self.n
        Ao = self.o
        Ap = self.p
        Ba = other.a
        Bb = other.b
        Bc = other.c
        Bd = other.d
        Be = other.e
        Bf = other.f
        Bg = other.g
        Bh = other.h
        Bi = other.i
        Bj = other.j
        Bk = other.k
        Bl = other.l
        Bm = other.m
        Bn = other.n
        Bo = other.o
        Bp = other.p
        self.a = Aa * Ba + Ab * Be + Ac * Bi + Ad * Bm
        self.b = Aa * Bb + Ab * Bf + Ac * Bj + Ad * Bn
        self.c = Aa * Bc + Ab * Bg + Ac * Bk + Ad * Bo
        self.d = Aa * Bd + Ab * Bh + Ac * Bl + Ad * Bp
        self.e = Ae * Ba + Af * Be + Ag * Bi + Ah * Bm
        self.f = Ae * Bb + Af * Bf + Ag * Bj + Ah * Bn
        self.g = Ae * Bc + Af * Bg + Ag * Bk + Ah * Bo
        self.h = Ae * Bd + Af * Bh + Ag * Bl + Ah * Bp
        self.i = Ai * Ba + Aj * Be + Ak * Bi + Al * Bm
        self.j = Ai * Bb + Aj * Bf + Ak * Bj + Al * Bn
        self.k = Ai * Bc + Aj * Bg + Ak * Bk + Al * Bo
        self.l = Ai * Bd + Aj * Bh + Ak * Bl + Al * Bp
        self.m = Am * Ba + An * Be + Ao * Bi + Ap * Bm
        self.n = Am * Bb + An * Bf + Ao * Bj + Ap * Bn
        self.o = Am * Bc + An * Bg + Ao * Bk + Ap * Bo
        self.p = Am * Bd + An * Bh + Ao * Bl + Ap * Bp
        return self

    def transform(self, other):
        A = self
        B = other
        P = Point3(0, 0, 0)
        P.x = A.a * B.x + A.b * B.y + A.c * B.z + A.d
        P.y = A.e * B.x + A.f * B.y + A.g * B.z + A.h
        P.z = A.i * B.x + A.j * B.y + A.k * B.z + A.l
        w =   A.m * B.x + A.n * B.y + A.o * B.z + A.p
        if w != 0:
            P.x /= w
            P.y /= w
            P.z /= w
        return P

    def identity(self):
        self.a = self.f = self.k = self.p = 1.
        self.b = self.c = self.d = self.e = self.g = self.h = \
        self.i = self.j = self.l = self.m = self.n = self.o = 0
        return self

    def scale(self, x, y, z):
        self *= Matrix4.new_scale(x, y, z)
        return self

    def translate(self, x, y, z):
        self *= Matrix4.new_translate(x, y, z)
        return self

    def rotatex(self, angle):
        self *= Matrix4.new_rotatex(angle)
        return self

    def rotatey(self, angle):
        self *= Matrix4.new_rotatey(angle)
        return self

    def rotatez(self, angle):
        self *= Matrix4.new_rotatez(angle)
        return self

    def rotate_axis(self, angle, axis):
        self *= Matrix4.new_rotate_axis(angle, axis)
        return self

    def rotate_euler(self, heading, attitude, bank):
        self *= Matrix4.new_rotate_euler(heading, attitude, bank)
        return self

    def rotate_triple_axis(self, x, y, z):
        self *= Matrix4.new_rotate_triple_axis(x, y, z)
        return self

    def transpose(self):
        (self.a, self.e, self.i, self.m,
         self.b, self.f, self.j, self.n,
         self.c, self.g, self.k, self.o,
         self.d, self.h, self.l, self.p) = \
        (self.a, self.b, self.c, self.d,
         self.e, self.f, self.g, self.h,
         self.i, self.j, self.k, self.l,
         self.m, self.n, self.o, self.p)

    def transposed(self):
        M = self.copy()
        M.transpose()
        return M

    # Static constructors
    def new(cls, *values):
        M = cls()
        M[:] = values
        return M
    new = classmethod(new)

    def new_identity(cls):
        self = cls()
        return self
    new_identity = classmethod(new_identity)

    def new_scale(cls, x, y, z):
        self = cls()
        self.a = x
        self.f = y
        self.k = z
        return self
    new_scale = classmethod(new_scale)

    def new_translate(cls, x, y, z):
        self = cls()
        self.d = x
        self.h = y
        self.l = z
        return self
    new_translate = classmethod(new_translate)

    def new_rotatex(cls, angle):
        self = cls()
        s = math.sin(angle)
        c = math.cos(angle)
        self.f = self.k = c
        self.g = -s
        self.j = s
        return self
    new_rotatex = classmethod(new_rotatex)

    def new_rotatey(cls, angle):
        self = cls()
        s = math.sin(angle)
        c = math.cos(angle)
        self.a = self.k = c
        self.c = s
        self.i = -s
        return self
    new_rotatey = classmethod(new_rotatey)

    def new_rotatez(cls, angle):
        self = cls()
        s = math.sin(angle)
        c = math.cos(angle)
        self.a = self.f = c
        self.b = -s
        self.e = s
        return self
    new_rotatez = classmethod(new_rotatez)

    def new_rotate_axis(cls, angle, axis):
        assert(isinstance(axis, Vector3))
        vector = axis.normalized()
        x = vector.x
        y = vector.y
        z = vector.z

        self = cls()
        s = math.sin(angle)
        c = math.cos(angle)
        c1 = 1. - c

        # from the glRotate man page
        self.a = x * x * c1 + c
        self.b = x * y * c1 - z * s
        self.c = x * z * c1 + y * s
        self.e = y * x * c1 + z * s
        self.f = y * y * c1 + c
        self.g = y * z * c1 - x * s
        self.i = x * z * c1 - y * s
        self.j = y * z * c1 + x * s
        self.k = z * z * c1 + c
        return self
    new_rotate_axis = classmethod(new_rotate_axis)

    def new_rotate_euler(cls, heading, attitude, bank):
        # from http://www.euclideanspace.com/
        ch = math.cos(heading)
        sh = math.sin(heading)
        ca = math.cos(attitude)
        sa = math.sin(attitude)
        cb = math.cos(bank)
        sb = math.sin(bank)

        self = cls()
        self.a = ch * ca
        self.b = sh * sb - ch * sa * cb
        self.c = ch * sa * sb + sh * cb
        self.e = sa
        self.f = ca * cb
        self.g = -ca * sb
        self.i = -sh * ca
        self.j = sh * sa * cb + ch * sb
        self.k = -sh * sa * sb + ch * cb
        return self
    new_rotate_euler = classmethod(new_rotate_euler)

    def new_rotate_triple_axis(cls, x, y, z):
      m = cls()

      m.a, m.b, m.c = x.x, y.x, z.x
      m.e, m.f, m.g = x.y, y.y, z.y
      m.i, m.j, m.k = x.z, y.z, z.z

      return m
    new_rotate_triple_axis = classmethod(new_rotate_triple_axis)

    def new_look_at(cls, eye, at, up):
      z = (eye - at).normalized()
      x = up.cross(z).normalized()
      y = z.cross(x)

      m = cls.new_rotate_triple_axis(x, y, z)
      m.d, m.h, m.l = eye.x, eye.y, eye.z
      return m
    new_look_at = classmethod(new_look_at)

    def new_perspective(cls, fov_y, aspect, near, far):
        # from the gluPerspective man page
        f = 1 / math.tan(fov_y / 2)
        self = cls()
        assert near != 0.0 and near != far
        self.a = f / aspect
        self.f = f
        self.k = (far + near) / (near - far)
        self.l = 2 * far * near / (near - far)
        self.o = -1
        self.p = 0
        return self
    new_perspective = classmethod(new_perspective)

    def determinant(self):
        return ((self.a * self.f - self.e * self.b)
              * (self.k * self.p - self.o * self.l)
              - (self.a * self.j - self.i * self.b)
              * (self.g * self.p - self.o * self.h)
              + (self.a * self.n - self.m * self.b)
              * (self.g * self.l - self.k * self.h)
              + (self.e * self.j - self.i * self.f)
              * (self.c * self.p - self.o * self.d)
              - (self.e * self.n - self.m * self.f)
              * (self.c * self.l - self.k * self.d)
              + (self.i * self.n - self.m * self.j)
              * (self.c * self.h - self.g * self.d))

    def inverse(self):
        tmp = Matrix4()
        d = self.determinant();

        if abs(d) < 0.001:
            # No inverse, return identity
            return tmp
        else:
            d = 1.0 / d;

            tmp.a = d * (self.f * (self.k * self.p - self.o * self.l) + self.j * (self.o * self.h - self.g * self.p) + self.n * (self.g * self.l - self.k * self.h));
            tmp.e = d * (self.g * (self.i * self.p - self.m * self.l) + self.k * (self.m * self.h - self.e * self.p) + self.o * (self.e * self.l - self.i * self.h));
            tmp.i = d * (self.h * (self.i * self.n - self.m * self.j) + self.l * (self.m * self.f - self.e * self.n) + self.p * (self.e * self.j - self.i * self.f));
            tmp.m = d * (self.e * (self.n * self.k - self.j * self.o) + self.i * (self.f * self.o - self.n * self.g) + self.m * (self.j * self.g - self.f * self.k));

            tmp.b = d * (self.j * (self.c * self.p - self.o * self.d) + self.n * (self.k * self.d - self.c * self.l) + self.b * (self.o * self.l - self.k * self.p));
            tmp.f = d * (self.k * (self.a * self.p - self.m * self.d) + self.o * (self.i * self.d - self.a * self.l) + self.c * (self.m * self.l - self.i * self.p));
            tmp.j = d * (self.l * (self.a * self.n - self.m * self.b) + self.p * (self.i * self.b - self.a * self.j) + self.d * (self.m * self.j - self.i * self.n));
            tmp.n = d * (self.i * (self.n * self.c - self.b * self.o) + self.m * (self.b * self.k - self.j * self.c) + self.a * (self.j * self.o - self.n * self.k));

            tmp.c = d * (self.n * (self.c * self.h - self.g * self.d) + self.b * (self.g * self.p - self.o * self.h) + self.f * (self.o * self.d - self.c * self.p));
            tmp.g = d * (self.o * (self.a * self.h - self.e * self.d) + self.c * (self.e * self.p - self.m * self.h) + self.g * (self.m * self.d - self.a * self.p));
            tmp.k = d * (self.p * (self.a * self.f - self.e * self.b) + self.d * (self.e * self.n - self.m * self.f) + self.h * (self.m * self.b - self.a * self.n));
            tmp.o = d * (self.m * (self.f * self.c - self.b * self.g) + self.a * (self.n * self.g - self.f * self.o) + self.e * (self.b * self.o - self.n * self.c));

            tmp.d = d * (self.b * (self.k * self.h - self.g * self.l) + self.f * (self.c * self.l - self.k * self.d) + self.j * (self.g * self.d - self.c * self.h));
            tmp.h = d * (self.c * (self.i * self.h - self.e * self.l) + self.g * (self.a * self.l - self.i * self.d) + self.k * (self.e * self.d - self.a * self.h));
            tmp.l = d * (self.d * (self.i * self.f - self.e * self.j) + self.h * (self.a * self.j - self.i * self.b) + self.l * (self.e * self.b - self.a * self.f));
            tmp.p = d * (self.a * (self.f * self.k - self.j * self.g) + self.e * (self.j * self.c - self.b * self.k) + self.i * (self.b * self.g - self.f * self.c));

        return tmp;
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#ladybug.euclid.Matrix4">Matrix4</a></li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="ladybug.euclid.Matrix4.a" class="name">var <span class="ident">a</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix4.b" class="name">var <span class="ident">b</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix4.c" class="name">var <span class="ident">c</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix4.d" class="name">var <span class="ident">d</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix4.e" class="name">var <span class="ident">e</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix4.f" class="name">var <span class="ident">f</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix4.g" class="name">var <span class="ident">g</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix4.h" class="name">var <span class="ident">h</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix4.i" class="name">var <span class="ident">i</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix4.j" class="name">var <span class="ident">j</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix4.k" class="name">var <span class="ident">k</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix4.l" class="name">var <span class="ident">l</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix4.m" class="name">var <span class="ident">m</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix4.n" class="name">var <span class="ident">n</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix4.o" class="name">var <span class="ident">o</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Matrix4.p" class="name">var <span class="ident">p</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.__init__', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.__init__" class="source">
    <pre><code>def __init__(self):
    self.identity()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.copy">
    <p>def <span class="ident">copy</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.copy', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.copy" class="source">
    <pre><code>def __copy__(self):
    M = Matrix4()
    M.a = self.a
    M.b = self.b
    M.c = self.c
    M.d = self.d
    M.e = self.e
    M.f = self.f
    M.g = self.g
    M.h = self.h
    M.i = self.i
    M.j = self.j
    M.k = self.k
    M.l = self.l
    M.m = self.m
    M.n = self.n
    M.o = self.o
    M.p = self.p
    return M
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.determinant">
    <p>def <span class="ident">determinant</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.determinant', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.determinant" class="source">
    <pre><code>def determinant(self):
    return ((self.a * self.f - self.e * self.b)
          * (self.k * self.p - self.o * self.l)
          - (self.a * self.j - self.i * self.b)
          * (self.g * self.p - self.o * self.h)
          + (self.a * self.n - self.m * self.b)
          * (self.g * self.l - self.k * self.h)
          + (self.e * self.j - self.i * self.f)
          * (self.c * self.p - self.o * self.d)
          - (self.e * self.n - self.m * self.f)
          * (self.c * self.l - self.k * self.d)
          + (self.i * self.n - self.m * self.j)
          * (self.c * self.h - self.g * self.d))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.identity">
    <p>def <span class="ident">identity</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.identity', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.identity" class="source">
    <pre><code>def identity(self):
    self.a = self.f = self.k = self.p = 1.
    self.b = self.c = self.d = self.e = self.g = self.h = \
    self.i = self.j = self.l = self.m = self.n = self.o = 0
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.inverse">
    <p>def <span class="ident">inverse</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.inverse', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.inverse" class="source">
    <pre><code>def inverse(self):
    tmp = Matrix4()
    d = self.determinant();
    if abs(d) < 0.001:
        # No inverse, return identity
        return tmp
    else:
        d = 1.0 / d;
        tmp.a = d * (self.f * (self.k * self.p - self.o * self.l) + self.j * (self.o * self.h - self.g * self.p) + self.n * (self.g * self.l - self.k * self.h));
        tmp.e = d * (self.g * (self.i * self.p - self.m * self.l) + self.k * (self.m * self.h - self.e * self.p) + self.o * (self.e * self.l - self.i * self.h));
        tmp.i = d * (self.h * (self.i * self.n - self.m * self.j) + self.l * (self.m * self.f - self.e * self.n) + self.p * (self.e * self.j - self.i * self.f));
        tmp.m = d * (self.e * (self.n * self.k - self.j * self.o) + self.i * (self.f * self.o - self.n * self.g) + self.m * (self.j * self.g - self.f * self.k));
        tmp.b = d * (self.j * (self.c * self.p - self.o * self.d) + self.n * (self.k * self.d - self.c * self.l) + self.b * (self.o * self.l - self.k * self.p));
        tmp.f = d * (self.k * (self.a * self.p - self.m * self.d) + self.o * (self.i * self.d - self.a * self.l) + self.c * (self.m * self.l - self.i * self.p));
        tmp.j = d * (self.l * (self.a * self.n - self.m * self.b) + self.p * (self.i * self.b - self.a * self.j) + self.d * (self.m * self.j - self.i * self.n));
        tmp.n = d * (self.i * (self.n * self.c - self.b * self.o) + self.m * (self.b * self.k - self.j * self.c) + self.a * (self.j * self.o - self.n * self.k));
        tmp.c = d * (self.n * (self.c * self.h - self.g * self.d) + self.b * (self.g * self.p - self.o * self.h) + self.f * (self.o * self.d - self.c * self.p));
        tmp.g = d * (self.o * (self.a * self.h - self.e * self.d) + self.c * (self.e * self.p - self.m * self.h) + self.g * (self.m * self.d - self.a * self.p));
        tmp.k = d * (self.p * (self.a * self.f - self.e * self.b) + self.d * (self.e * self.n - self.m * self.f) + self.h * (self.m * self.b - self.a * self.n));
        tmp.o = d * (self.m * (self.f * self.c - self.b * self.g) + self.a * (self.n * self.g - self.f * self.o) + self.e * (self.b * self.o - self.n * self.c));
        tmp.d = d * (self.b * (self.k * self.h - self.g * self.l) + self.f * (self.c * self.l - self.k * self.d) + self.j * (self.g * self.d - self.c * self.h));
        tmp.h = d * (self.c * (self.i * self.h - self.e * self.l) + self.g * (self.a * self.l - self.i * self.d) + self.k * (self.e * self.d - self.a * self.h));
        tmp.l = d * (self.d * (self.i * self.f - self.e * self.j) + self.h * (self.a * self.j - self.i * self.b) + self.l * (self.e * self.b - self.a * self.f));
        tmp.p = d * (self.a * (self.f * self.k - self.j * self.g) + self.e * (self.j * self.c - self.b * self.k) + self.i * (self.b * self.g - self.f * self.c));
    return tmp;
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.new">
    <p>def <span class="ident">new</span>(</p><p>cls, *values)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.new', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.new" class="source">
    <pre><code>def new(cls, *values):
    M = cls()
    M[:] = values
    return M
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.new_identity">
    <p>def <span class="ident">new_identity</span>(</p><p>cls)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.new_identity', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.new_identity" class="source">
    <pre><code>def new_identity(cls):
    self = cls()
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.new_look_at">
    <p>def <span class="ident">new_look_at</span>(</p><p>cls, eye, at, up)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.new_look_at', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.new_look_at" class="source">
    <pre><code>def new_look_at(cls, eye, at, up):
  z = (eye - at).normalized()
  x = up.cross(z).normalized()
  y = z.cross(x)
  m = cls.new_rotate_triple_axis(x, y, z)
  m.d, m.h, m.l = eye.x, eye.y, eye.z
  return m
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.new_perspective">
    <p>def <span class="ident">new_perspective</span>(</p><p>cls, fov_y, aspect, near, far)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.new_perspective', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.new_perspective" class="source">
    <pre><code>def new_perspective(cls, fov_y, aspect, near, far):
    # from the gluPerspective man page
    f = 1 / math.tan(fov_y / 2)
    self = cls()
    assert near != 0.0 and near != far
    self.a = f / aspect
    self.f = f
    self.k = (far + near) / (near - far)
    self.l = 2 * far * near / (near - far)
    self.o = -1
    self.p = 0
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.new_rotate_axis">
    <p>def <span class="ident">new_rotate_axis</span>(</p><p>cls, angle, axis)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.new_rotate_axis', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.new_rotate_axis" class="source">
    <pre><code>def new_rotate_axis(cls, angle, axis):
    assert(isinstance(axis, Vector3))
    vector = axis.normalized()
    x = vector.x
    y = vector.y
    z = vector.z
    self = cls()
    s = math.sin(angle)
    c = math.cos(angle)
    c1 = 1. - c
    # from the glRotate man page
    self.a = x * x * c1 + c
    self.b = x * y * c1 - z * s
    self.c = x * z * c1 + y * s
    self.e = y * x * c1 + z * s
    self.f = y * y * c1 + c
    self.g = y * z * c1 - x * s
    self.i = x * z * c1 - y * s
    self.j = y * z * c1 + x * s
    self.k = z * z * c1 + c
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.new_rotate_euler">
    <p>def <span class="ident">new_rotate_euler</span>(</p><p>cls, heading, attitude, bank)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.new_rotate_euler', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.new_rotate_euler" class="source">
    <pre><code>def new_rotate_euler(cls, heading, attitude, bank):
    # from http://www.euclideanspace.com/
    ch = math.cos(heading)
    sh = math.sin(heading)
    ca = math.cos(attitude)
    sa = math.sin(attitude)
    cb = math.cos(bank)
    sb = math.sin(bank)
    self = cls()
    self.a = ch * ca
    self.b = sh * sb - ch * sa * cb
    self.c = ch * sa * sb + sh * cb
    self.e = sa
    self.f = ca * cb
    self.g = -ca * sb
    self.i = -sh * ca
    self.j = sh * sa * cb + ch * sb
    self.k = -sh * sa * sb + ch * cb
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.new_rotate_triple_axis">
    <p>def <span class="ident">new_rotate_triple_axis</span>(</p><p>cls, x, y, z)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.new_rotate_triple_axis', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.new_rotate_triple_axis" class="source">
    <pre><code>def new_rotate_triple_axis(cls, x, y, z):
  m = cls()
  m.a, m.b, m.c = x.x, y.x, z.x
  m.e, m.f, m.g = x.y, y.y, z.y
  m.i, m.j, m.k = x.z, y.z, z.z
  return m
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.new_rotatex">
    <p>def <span class="ident">new_rotatex</span>(</p><p>cls, angle)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.new_rotatex', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.new_rotatex" class="source">
    <pre><code>def new_rotatex(cls, angle):
    self = cls()
    s = math.sin(angle)
    c = math.cos(angle)
    self.f = self.k = c
    self.g = -s
    self.j = s
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.new_rotatey">
    <p>def <span class="ident">new_rotatey</span>(</p><p>cls, angle)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.new_rotatey', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.new_rotatey" class="source">
    <pre><code>def new_rotatey(cls, angle):
    self = cls()
    s = math.sin(angle)
    c = math.cos(angle)
    self.a = self.k = c
    self.c = s
    self.i = -s
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.new_rotatez">
    <p>def <span class="ident">new_rotatez</span>(</p><p>cls, angle)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.new_rotatez', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.new_rotatez" class="source">
    <pre><code>def new_rotatez(cls, angle):
    self = cls()
    s = math.sin(angle)
    c = math.cos(angle)
    self.a = self.f = c
    self.b = -s
    self.e = s
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.new_scale">
    <p>def <span class="ident">new_scale</span>(</p><p>cls, x, y, z)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.new_scale', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.new_scale" class="source">
    <pre><code>def new_scale(cls, x, y, z):
    self = cls()
    self.a = x
    self.f = y
    self.k = z
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.new_translate">
    <p>def <span class="ident">new_translate</span>(</p><p>cls, x, y, z)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.new_translate', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.new_translate" class="source">
    <pre><code>def new_translate(cls, x, y, z):
    self = cls()
    self.d = x
    self.h = y
    self.l = z
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.rotate_axis">
    <p>def <span class="ident">rotate_axis</span>(</p><p>self, angle, axis)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.rotate_axis', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.rotate_axis" class="source">
    <pre><code>def rotate_axis(self, angle, axis):
    self *= Matrix4.new_rotate_axis(angle, axis)
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.rotate_euler">
    <p>def <span class="ident">rotate_euler</span>(</p><p>self, heading, attitude, bank)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.rotate_euler', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.rotate_euler" class="source">
    <pre><code>def rotate_euler(self, heading, attitude, bank):
    self *= Matrix4.new_rotate_euler(heading, attitude, bank)
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.rotate_triple_axis">
    <p>def <span class="ident">rotate_triple_axis</span>(</p><p>self, x, y, z)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.rotate_triple_axis', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.rotate_triple_axis" class="source">
    <pre><code>def rotate_triple_axis(self, x, y, z):
    self *= Matrix4.new_rotate_triple_axis(x, y, z)
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.rotatex">
    <p>def <span class="ident">rotatex</span>(</p><p>self, angle)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.rotatex', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.rotatex" class="source">
    <pre><code>def rotatex(self, angle):
    self *= Matrix4.new_rotatex(angle)
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.rotatey">
    <p>def <span class="ident">rotatey</span>(</p><p>self, angle)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.rotatey', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.rotatey" class="source">
    <pre><code>def rotatey(self, angle):
    self *= Matrix4.new_rotatey(angle)
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.rotatez">
    <p>def <span class="ident">rotatez</span>(</p><p>self, angle)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.rotatez', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.rotatez" class="source">
    <pre><code>def rotatez(self, angle):
    self *= Matrix4.new_rotatez(angle)
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.scale">
    <p>def <span class="ident">scale</span>(</p><p>self, x, y, z)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.scale', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.scale" class="source">
    <pre><code>def scale(self, x, y, z):
    self *= Matrix4.new_scale(x, y, z)
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.transform">
    <p>def <span class="ident">transform</span>(</p><p>self, other)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.transform', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.transform" class="source">
    <pre><code>def transform(self, other):
    A = self
    B = other
    P = Point3(0, 0, 0)
    P.x = A.a * B.x + A.b * B.y + A.c * B.z + A.d
    P.y = A.e * B.x + A.f * B.y + A.g * B.z + A.h
    P.z = A.i * B.x + A.j * B.y + A.k * B.z + A.l
    w =   A.m * B.x + A.n * B.y + A.o * B.z + A.p
    if w != 0:
        P.x /= w
        P.y /= w
        P.z /= w
    return P
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.translate">
    <p>def <span class="ident">translate</span>(</p><p>self, x, y, z)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.translate', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.translate" class="source">
    <pre><code>def translate(self, x, y, z):
    self *= Matrix4.new_translate(x, y, z)
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.transpose">
    <p>def <span class="ident">transpose</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.transpose', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.transpose" class="source">
    <pre><code>def transpose(self):
    (self.a, self.e, self.i, self.m,
     self.b, self.f, self.j, self.n,
     self.c, self.g, self.k, self.o,
     self.d, self.h, self.l, self.p) = \
    (self.a, self.b, self.c, self.d,
     self.e, self.f, self.g, self.h,
     self.i, self.j, self.k, self.l,
     self.m, self.n, self.o, self.p)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Matrix4.transposed">
    <p>def <span class="ident">transposed</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Matrix4.transposed', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Matrix4.transposed" class="source">
    <pre><code>def transposed(self):
    M = self.copy()
    M.transpose()
    return M
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="ladybug.euclid.Plane" class="name">class <span class="ident">Plane</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Plane', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Plane" class="source">
    <pre><code>class Plane:
    # n.p = k, where n is normal, p is point on plane, k is constant scalar
    __slots__ = ['n', 'k']

    def __init__(self, *args):
        if len(args) == 3:
            assert isinstance(args[0], Point3) and \
                   isinstance(args[1], Point3) and \
                   isinstance(args[2], Point3)
            self.n = (args[1] - args[0]).cross(args[2] - args[0])
            self.n.normalize()
            self.k = self.n.dot(args[0])
        elif len(args) == 2:
            if isinstance(args[0], Point3) and isinstance(args[1], Vector3):
                self.n = args[1].normalized()
                self.k = self.n.dot(args[0])
            elif isinstance(args[0], Vector3) and type(args[1]) == float:
                self.n = args[0].normalized()
                self.k = args[1]
            else:
                raise AttributeError, '%r' % (args,)

        else:
            raise AttributeError, '%r' % (args,)

        if not self.n:
            raise AttributeError, 'Points on plane are colinear'

    def __copy__(self):
        return self.__class__(self.n, self.k)

    copy = __copy__

    def __repr__(self):
        return 'Plane(<%.2f, %.2f, %.2f>.p = %.2f)' % \
            (self.n.x, self.n.y, self.n.z, self.k)

    def _get_point(self):
        # Return an arbitrary point on the plane
        if self.n.z:
            return Point3(0., 0., self.k / self.n.z)
        elif self.n.y:
            return Point3(0., self.k / self.n.y, 0.)
        else:
            return Point3(self.k / self.n.x, 0., 0.)

    def _apply_transform(self, t):
        p = t * self._get_point()
        self.n = t * self.n
        self.k = self.n.dot(p)

    def intersect(self, other):
        return other._intersect_plane(self)

    def _intersect_line3(self, other):
        return _intersect_line3_plane(other, self)

    def _intersect_plane(self, other):
        return _intersect_plane_plane(self, other)

    def connect(self, other):
        return other._connect_plane(self)

    def _connect_point3(self, other):
        return _connect_point3_plane(other, self)

    def _connect_line3(self, other):
        return _connect_line3_plane(other, self)

    def _connect_sphere(self, other):
        return _connect_sphere_plane(other, self)

    def _connect_plane(self, other):
        return _connect_plane_plane(other, self)
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#ladybug.euclid.Plane">Plane</a></li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="ladybug.euclid.Plane.k" class="name">var <span class="ident">k</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Plane.n" class="name">var <span class="ident">n</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Plane.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, *args)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Plane.__init__', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Plane.__init__" class="source">
    <pre><code>def __init__(self, *args):
    if len(args) == 3:
        assert isinstance(args[0], Point3) and \
               isinstance(args[1], Point3) and \
               isinstance(args[2], Point3)
        self.n = (args[1] - args[0]).cross(args[2] - args[0])
        self.n.normalize()
        self.k = self.n.dot(args[0])
    elif len(args) == 2:
        if isinstance(args[0], Point3) and isinstance(args[1], Vector3):
            self.n = args[1].normalized()
            self.k = self.n.dot(args[0])
        elif isinstance(args[0], Vector3) and type(args[1]) == float:
            self.n = args[0].normalized()
            self.k = args[1]
        else:
            raise AttributeError, '%r' % (args,)
    else:
        raise AttributeError, '%r' % (args,)
    if not self.n:
        raise AttributeError, 'Points on plane are colinear'
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Plane.connect">
    <p>def <span class="ident">connect</span>(</p><p>self, other)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Plane.connect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Plane.connect" class="source">
    <pre><code>def connect(self, other):
    return other._connect_plane(self)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Plane.copy">
    <p>def <span class="ident">copy</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Plane.copy', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Plane.copy" class="source">
    <pre><code>def __copy__(self):
    return self.__class__(self.n, self.k)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Plane.intersect">
    <p>def <span class="ident">intersect</span>(</p><p>self, other)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Plane.intersect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Plane.intersect" class="source">
    <pre><code>def intersect(self, other):
    return other._intersect_plane(self)
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="ladybug.euclid.Point2" class="name">class <span class="ident">Point2</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point2', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point2" class="source">
    <pre><code>class Point2(Vector2, Geometry):
    def __repr__(self):
        return 'Point2(%.2f, %.2f)' % (self.x, self.y)

    def intersect(self, other):
        return other._intersect_point2(self)

    def _intersect_circle(self, other):
        return _intersect_point2_circle(self, other)

    def connect(self, other):
        return other._connect_point2(self)

    def _connect_point2(self, other):
        return LineSegment2(other, self)

    def _connect_line2(self, other):
        c = _connect_point2_line2(self, other)
        if c:
            return c._swap()

    def _connect_circle(self, other):
        c = _connect_point2_circle(self, other)
        if c:
            return c._swap()
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#ladybug.euclid.Point2">Point2</a></li>
          <li><a href="#ladybug.euclid.Vector2">Vector2</a></li>
          <li><a href="#ladybug.euclid.Geometry">Geometry</a></li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="ladybug.euclid.Point2.x" class="name">var <span class="ident">x</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector2">Vector2</a></code>.<code><a href="#ladybug.euclid.Vector2.x">x</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Point2.y" class="name">var <span class="ident">y</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector2">Vector2</a></code>.<code><a href="#ladybug.euclid.Vector2.y">y</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point2.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, x=0, y=0)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector2">Vector2</a></code>.<code><a href="#ladybug.euclid.Vector2.__init__">__init__</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point2.__init__', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point2.__init__" class="source">
    <pre><code>def __init__(self, x=0, y=0):
    self.x = x
    self.y = y
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point2.angle">
    <p>def <span class="ident">angle</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector2">Vector2</a></code>.<code><a href="#ladybug.euclid.Vector2.angle">angle</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Return the angle to the vector other</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point2.angle', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point2.angle" class="source">
    <pre><code>def angle(self, other):
    """Return the angle to the vector other"""
    return math.acos(self.dot(other) / (self.magnitude()*other.magnitude()))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point2.connect">
    <p>def <span class="ident">connect</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Geometry">Geometry</a></code>.<code><a href="#ladybug.euclid.Geometry.connect">connect</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point2.connect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point2.connect" class="source">
    <pre><code>def connect(self, other):
    return other._connect_point2(self)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point2.copy">
    <p>def <span class="ident">copy</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector2">Vector2</a></code>.<code><a href="#ladybug.euclid.Vector2.copy">copy</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point2.copy', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point2.copy" class="source">
    <pre><code>def __copy__(self):
    return self.__class__(self.x, self.y)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point2.cross">
    <p>def <span class="ident">cross</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector2">Vector2</a></code>.<code><a href="#ladybug.euclid.Vector2.cross">cross</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point2.cross', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point2.cross" class="source">
    <pre><code>def cross(self):
    return Vector2(self.y, -self.x)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point2.distance">
    <p>def <span class="ident">distance</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Geometry">Geometry</a></code>.<code><a href="#ladybug.euclid.Geometry.distance">distance</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point2.distance', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point2.distance" class="source">
    <pre><code>def distance(self, other):
    c = self.connect(other)
    if c:
        return c.length
    return 0.0
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point2.dot">
    <p>def <span class="ident">dot</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector2">Vector2</a></code>.<code><a href="#ladybug.euclid.Vector2.dot">dot</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point2.dot', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point2.dot" class="source">
    <pre><code>def dot(self, other):
    assert isinstance(other, Vector2)
    return self.x * other.x + \
           self.y * other.y
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point2.intersect">
    <p>def <span class="ident">intersect</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Geometry">Geometry</a></code>.<code><a href="#ladybug.euclid.Geometry.intersect">intersect</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point2.intersect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point2.intersect" class="source">
    <pre><code>def intersect(self, other):
    return other._intersect_point2(self)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point2.magnitude">
    <p>def <span class="ident">magnitude</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector2">Vector2</a></code>.<code><a href="#ladybug.euclid.Vector2.magnitude">magnitude</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point2.magnitude', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point2.magnitude" class="source">
    <pre><code>def __abs__(self):
    return math.sqrt(self.x ** 2 + \
                     self.y ** 2)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point2.magnitude_squared">
    <p>def <span class="ident">magnitude_squared</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector2">Vector2</a></code>.<code><a href="#ladybug.euclid.Vector2.magnitude_squared">magnitude_squared</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point2.magnitude_squared', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point2.magnitude_squared" class="source">
    <pre><code>def magnitude_squared(self):
    return self.x ** 2 + \
           self.y ** 2
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point2.normalize">
    <p>def <span class="ident">normalize</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector2">Vector2</a></code>.<code><a href="#ladybug.euclid.Vector2.normalize">normalize</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point2.normalize', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point2.normalize" class="source">
    <pre><code>def normalize(self):
    d = self.magnitude()
    if d:
        self.x /= d
        self.y /= d
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point2.normalized">
    <p>def <span class="ident">normalized</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector2">Vector2</a></code>.<code><a href="#ladybug.euclid.Vector2.normalized">normalized</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point2.normalized', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point2.normalized" class="source">
    <pre><code>def normalized(self):
    d = self.magnitude()
    if d:
        return Vector2(self.x / d,
                       self.y / d)
    return self.copy()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point2.project">
    <p>def <span class="ident">project</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector2">Vector2</a></code>.<code><a href="#ladybug.euclid.Vector2.project">project</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Return one vector projected on the vector other</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point2.project', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point2.project" class="source">
    <pre><code>def project(self, other):
    """Return one vector projected on the vector other"""
    n = other.normalized()
    return self.dot(n)*n
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point2.reflect">
    <p>def <span class="ident">reflect</span>(</p><p>self, normal)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector2">Vector2</a></code>.<code><a href="#ladybug.euclid.Vector2.reflect">reflect</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point2.reflect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point2.reflect" class="source">
    <pre><code>def reflect(self, normal):
    # assume normal is normalized
    assert isinstance(normal, Vector2)
    d = 2 * (self.x * normal.x + self.y * normal.y)
    return Vector2(self.x - d * normal.x,
                   self.y - d * normal.y)
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="ladybug.euclid.Point3" class="name">class <span class="ident">Point3</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point3', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point3" class="source">
    <pre><code>class Point3(Vector3, Geometry):
    def __repr__(self):
        return 'Point3(%.2f, %.2f, %.2f)' % (self.x, self.y, self.z)

    def intersect(self, other):
        return other._intersect_point3(self)

    def _intersect_sphere(self, other):
        return _intersect_point3_sphere(self, other)

    def connect(self, other):
        return other._connect_point3(self)

    def _connect_point3(self, other):
        if self != other:
            return LineSegment3(other, self)
        return None

    def _connect_line3(self, other):
        c = _connect_point3_line3(self, other)
        if c:
            return c._swap()

    def _connect_sphere(self, other):
        c = _connect_point3_sphere(self, other)
        if c:
            return c._swap()

    def _connect_plane(self, other):
        c = _connect_point3_plane(self, other)
        if c:
            return c._swap()
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#ladybug.euclid.Point3">Point3</a></li>
          <li><a href="#ladybug.euclid.Vector3">Vector3</a></li>
          <li><a href="#ladybug.euclid.Geometry">Geometry</a></li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="ladybug.euclid.Point3.x" class="name">var <span class="ident">x</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector3">Vector3</a></code>.<code><a href="#ladybug.euclid.Vector3.x">x</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Point3.y" class="name">var <span class="ident">y</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector3">Vector3</a></code>.<code><a href="#ladybug.euclid.Vector3.y">y</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Point3.z" class="name">var <span class="ident">z</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector3">Vector3</a></code>.<code><a href="#ladybug.euclid.Vector3.z">z</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point3.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, x=0, y=0, z=0)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector3">Vector3</a></code>.<code><a href="#ladybug.euclid.Vector3.__init__">__init__</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point3.__init__', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point3.__init__" class="source">
    <pre><code>def __init__(self, x=0, y=0, z=0):
    self.x = x
    self.y = y
    self.z = z
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point3.angle">
    <p>def <span class="ident">angle</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector3">Vector3</a></code>.<code><a href="#ladybug.euclid.Vector3.angle">angle</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Return the angle to the vector other</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point3.angle', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point3.angle" class="source">
    <pre><code>def angle(self, other):
    """Return the angle to the vector other"""
    return math.acos(self.dot(other) / (self.magnitude()*other.magnitude()))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point3.connect">
    <p>def <span class="ident">connect</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Geometry">Geometry</a></code>.<code><a href="#ladybug.euclid.Geometry.connect">connect</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point3.connect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point3.connect" class="source">
    <pre><code>def connect(self, other):
    return other._connect_point3(self)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point3.copy">
    <p>def <span class="ident">copy</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector3">Vector3</a></code>.<code><a href="#ladybug.euclid.Vector3.copy">copy</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point3.copy', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point3.copy" class="source">
    <pre><code>def __copy__(self):
    return self.__class__(self.x, self.y, self.z)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point3.cross">
    <p>def <span class="ident">cross</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector3">Vector3</a></code>.<code><a href="#ladybug.euclid.Vector3.cross">cross</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point3.cross', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point3.cross" class="source">
    <pre><code>def cross(self, other):
    assert isinstance(other, Vector3)
    return Vector3(self.y * other.z - self.z * other.y,
                   -self.x * other.z + self.z * other.x,
                   self.x * other.y - self.y * other.x)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point3.distance">
    <p>def <span class="ident">distance</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Geometry">Geometry</a></code>.<code><a href="#ladybug.euclid.Geometry.distance">distance</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point3.distance', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point3.distance" class="source">
    <pre><code>def distance(self, other):
    c = self.connect(other)
    if c:
        return c.length
    return 0.0
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point3.dot">
    <p>def <span class="ident">dot</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector3">Vector3</a></code>.<code><a href="#ladybug.euclid.Vector3.dot">dot</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point3.dot', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point3.dot" class="source">
    <pre><code>def dot(self, other):
    assert isinstance(other, Vector3)
    return self.x * other.x + \
           self.y * other.y + \
           self.z * other.z
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point3.flip">
    <p>def <span class="ident">flip</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector3">Vector3</a></code>.<code><a href="#ladybug.euclid.Vector3.flip">flip</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Flip vector</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point3.flip', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point3.flip" class="source">
    <pre><code>def flip(self):
    """Flip vector"""
    # added by Mostapha Sadeghipour
    self.x = -self.x
    self.y = -self.y
    self.z = -self.z
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point3.flipped">
    <p>def <span class="ident">flipped</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector3">Vector3</a></code>.<code><a href="#ladybug.euclid.Vector3.flipped">flipped</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Calculate a flipped vector</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point3.flipped', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point3.flipped" class="source">
    <pre><code>def flipped(self):
    """Calculate a flipped vector"""
    # added by Mostapha Sadeghipour
    return Vector3(-self.x,
                    -self.y,
                    -self.z)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point3.intersect">
    <p>def <span class="ident">intersect</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Geometry">Geometry</a></code>.<code><a href="#ladybug.euclid.Geometry.intersect">intersect</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point3.intersect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point3.intersect" class="source">
    <pre><code>def intersect(self, other):
    return other._intersect_point3(self)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point3.magnitude">
    <p>def <span class="ident">magnitude</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector3">Vector3</a></code>.<code><a href="#ladybug.euclid.Vector3.magnitude">magnitude</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point3.magnitude', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point3.magnitude" class="source">
    <pre><code>def __abs__(self):
    return math.sqrt(self.x ** 2 + \
                     self.y ** 2 + \
                     self.z ** 2)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point3.magnitude_squared">
    <p>def <span class="ident">magnitude_squared</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector3">Vector3</a></code>.<code><a href="#ladybug.euclid.Vector3.magnitude_squared">magnitude_squared</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point3.magnitude_squared', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point3.magnitude_squared" class="source">
    <pre><code>def magnitude_squared(self):
    return self.x ** 2 + \
           self.y ** 2 + \
           self.z ** 2
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point3.normalize">
    <p>def <span class="ident">normalize</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector3">Vector3</a></code>.<code><a href="#ladybug.euclid.Vector3.normalize">normalize</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point3.normalize', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point3.normalize" class="source">
    <pre><code>def normalize(self):
    d = self.magnitude()
    if d:
        self.x /= d
        self.y /= d
        self.z /= d
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point3.normalized">
    <p>def <span class="ident">normalized</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector3">Vector3</a></code>.<code><a href="#ladybug.euclid.Vector3.normalized">normalized</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point3.normalized', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point3.normalized" class="source">
    <pre><code>def normalized(self):
    d = self.magnitude()
    if d:
        return Vector3(self.x / d,
                       self.y / d,
                       self.z / d)
    return self.copy()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point3.project">
    <p>def <span class="ident">project</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector3">Vector3</a></code>.<code><a href="#ladybug.euclid.Vector3.project">project</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Return one vector projected on the vector other</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point3.project', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point3.project" class="source">
    <pre><code>def project(self, other):
    """Return one vector projected on the vector other"""
    n = other.normalized()
    return self.dot(n)*n
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point3.reflect">
    <p>def <span class="ident">reflect</span>(</p><p>self, normal)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector3">Vector3</a></code>.<code><a href="#ladybug.euclid.Vector3.reflect">reflect</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point3.reflect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point3.reflect" class="source">
    <pre><code>def reflect(self, normal):
    # assume normal is normalized
    assert isinstance(normal, Vector3)
    d = 2 * (self.x * normal.x + self.y * normal.y + self.z * normal.z)
    return Vector3(self.x - d * normal.x,
                   self.y - d * normal.y,
                   self.z - d * normal.z)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Point3.rotate_around">
    <p>def <span class="ident">rotate_around</span>(</p><p>self, axis, theta)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Vector3">Vector3</a></code>.<code><a href="#ladybug.euclid.Vector3.rotate_around">rotate_around</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Return the vector rotated around axis through angle theta. Right hand rule applies</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Point3.rotate_around', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Point3.rotate_around" class="source">
    <pre><code>def rotate_around(self, axis, theta):
    """Return the vector rotated around axis through angle theta. Right hand rule applies"""
    # Adapted from equations published by Glenn Murray.
    # http://inside.mines.edu/~gmurray/ArbitraryAxisRotation/ArbitraryAxisRotation.html
    x, y, z = self.x, self.y,self.z
    u, v, w = axis.x, axis.y, axis.z
    # Extracted common factors for simplicity and efficiency
    r2 = u**2 + v**2 + w**2
    r = math.sqrt(r2)
    ct = math.cos(theta)
    st = math.sin(theta) / r
    dt = (u*x + v*y + w*z) * (1 - ct) / r2
    return Vector3((u * dt + x * ct + (-w * y + v * z) * st),
                   (v * dt + y * ct + ( w * x - u * z) * st),
                   (w * dt + z * ct + (-v * x + u * y) * st))
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="ladybug.euclid.Quaternion" class="name">class <span class="ident">Quaternion</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Quaternion', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Quaternion" class="source">
    <pre><code>class Quaternion:
    # All methods and naming conventions based off
    # http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions

    # w is the real part, (x, y, z) are the imaginary parts
    __slots__ = ['w', 'x', 'y', 'z']

    def __init__(self, w=1, x=0, y=0, z=0):
        self.w = w
        self.x = x
        self.y = y
        self.z = z

    def __copy__(self):
        Q = Quaternion()
        Q.w = self.w
        Q.x = self.x
        Q.y = self.y
        Q.z = self.z
        return Q

    copy = __copy__

    def __repr__(self):
        return 'Quaternion(real=%.2f, imag=<%.2f, %.2f, %.2f>)' % \
            (self.w, self.x, self.y, self.z)

    def __mul__(self, other):
        if isinstance(other, Quaternion):
            Ax = self.x
            Ay = self.y
            Az = self.z
            Aw = self.w
            Bx = other.x
            By = other.y
            Bz = other.z
            Bw = other.w
            Q = Quaternion()
            Q.x =  Ax * Bw + Ay * Bz - Az * By + Aw * Bx
            Q.y = -Ax * Bz + Ay * Bw + Az * Bx + Aw * By
            Q.z =  Ax * By - Ay * Bx + Az * Bw + Aw * Bz
            Q.w = -Ax * Bx - Ay * By - Az * Bz + Aw * Bw
            return Q
        elif isinstance(other, Vector3):
            w = self.w
            x = self.x
            y = self.y
            z = self.z
            Vx = other.x
            Vy = other.y
            Vz = other.z
            ww = w * w
            w2 = w * 2
            wx2 = w2 * x
            wy2 = w2 * y
            wz2 = w2 * z
            xx = x * x
            x2 = x * 2
            xy2 = x2 * y
            xz2 = x2 * z
            yy = y * y
            yz2 = 2 * y * z
            zz = z * z
            return other.__class__(\
               ww * Vx + wy2 * Vz - wz2 * Vy + \
               xx * Vx + xy2 * Vy + xz2 * Vz - \
               zz * Vx - yy * Vx,
               xy2 * Vx + yy * Vy + yz2 * Vz + \
               wz2 * Vx - zz * Vy + ww * Vy - \
               wx2 * Vz - xx * Vy,
               xz2 * Vx + yz2 * Vy + \
               zz * Vz - wy2 * Vx - yy * Vz + \
               wx2 * Vy - xx * Vz + ww * Vz)
        else:
            other = other.copy()
            other._apply_transform(self)
            return other

    def __imul__(self, other):
        assert isinstance(other, Quaternion)
        Ax = self.x
        Ay = self.y
        Az = self.z
        Aw = self.w
        Bx = other.x
        By = other.y
        Bz = other.z
        Bw = other.w
        self.x =  Ax * Bw + Ay * Bz - Az * By + Aw * Bx
        self.y = -Ax * Bz + Ay * Bw + Az * Bx + Aw * By
        self.z =  Ax * By - Ay * Bx + Az * Bw + Aw * Bz
        self.w = -Ax * Bx - Ay * By - Az * Bz + Aw * Bw
        return self

    def __abs__(self):
        return math.sqrt(self.w ** 2 + \
                         self.x ** 2 + \
                         self.y ** 2 + \
                         self.z ** 2)

    magnitude = __abs__

    def magnitude_squared(self):
        return self.w ** 2 + \
               self.x ** 2 + \
               self.y ** 2 + \
               self.z ** 2

    def identity(self):
        self.w = 1
        self.x = 0
        self.y = 0
        self.z = 0
        return self

    def rotate_axis(self, angle, axis):
        self *= Quaternion.new_rotate_axis(angle, axis)
        return self

    def rotate_euler(self, heading, attitude, bank):
        self *= Quaternion.new_rotate_euler(heading, attitude, bank)
        return self

    def rotate_matrix(self, m):
        self *= Quaternion.new_rotate_matrix(m)
        return self

    def conjugated(self):
        Q = Quaternion()
        Q.w = self.w
        Q.x = -self.x
        Q.y = -self.y
        Q.z = -self.z
        return Q

    def normalize(self):
        d = self.magnitude()
        if d != 0:
            self.w /= d
            self.x /= d
            self.y /= d
            self.z /= d
        return self

    def normalized(self):
        d = self.magnitude()
        if d != 0:
            Q = Quaternion()
            Q.w = self.w / d
            Q.x = self.x / d
            Q.y = self.y / d
            Q.z = self.z / d
            return Q
        else:
            return self.copy()

    def get_angle_axis(self):
        if self.w > 1:
            self = self.normalized()
        angle = 2 * math.acos(self.w)
        s = math.sqrt(1 - self.w ** 2)
        if s < 0.001:
            return angle, Vector3(1, 0, 0)
        else:
            return angle, Vector3(self.x / s, self.y / s, self.z / s)

    def get_euler(self):
        t = self.x * self.y + self.z * self.w
        if t > 0.4999:
            heading = 2 * math.atan2(self.x, self.w)
            attitude = math.pi / 2
            bank = 0
        elif t < -0.4999:
            heading = -2 * math.atan2(self.x, self.w)
            attitude = -math.pi / 2
            bank = 0
        else:
            sqx = self.x ** 2
            sqy = self.y ** 2
            sqz = self.z ** 2
            heading = math.atan2(2 * self.y * self.w - 2 * self.x * self.z,
                                 1 - 2 * sqy - 2 * sqz)
            attitude = math.asin(2 * t)
            bank = math.atan2(2 * self.x * self.w - 2 * self.y * self.z,
                              1 - 2 * sqx - 2 * sqz)
        return heading, attitude, bank

    def get_matrix(self):
        xx = self.x ** 2
        xy = self.x * self.y
        xz = self.x * self.z
        xw = self.x * self.w
        yy = self.y ** 2
        yz = self.y * self.z
        yw = self.y * self.w
        zz = self.z ** 2
        zw = self.z * self.w
        M = Matrix4()
        M.a = 1 - 2 * (yy + zz)
        M.b = 2 * (xy - zw)
        M.c = 2 * (xz + yw)
        M.e = 2 * (xy + zw)
        M.f = 1 - 2 * (xx + zz)
        M.g = 2 * (yz - xw)
        M.i = 2 * (xz - yw)
        M.j = 2 * (yz + xw)
        M.k = 1 - 2 * (xx + yy)
        return M

    # Static constructors
    def new_identity(cls):
        return cls()
    new_identity = classmethod(new_identity)

    def new_rotate_axis(cls, angle, axis):
        assert(isinstance(axis, Vector3))
        axis = axis.normalized()
        s = math.sin(angle / 2)
        Q = cls()
        Q.w = math.cos(angle / 2)
        Q.x = axis.x * s
        Q.y = axis.y * s
        Q.z = axis.z * s
        return Q
    new_rotate_axis = classmethod(new_rotate_axis)

    def new_rotate_euler(cls, heading, attitude, bank):
        Q = cls()
        c1 = math.cos(heading / 2)
        s1 = math.sin(heading / 2)
        c2 = math.cos(attitude / 2)
        s2 = math.sin(attitude / 2)
        c3 = math.cos(bank / 2)
        s3 = math.sin(bank / 2)

        Q.w = c1 * c2 * c3 - s1 * s2 * s3
        Q.x = s1 * s2 * c3 + c1 * c2 * s3
        Q.y = s1 * c2 * c3 + c1 * s2 * s3
        Q.z = c1 * s2 * c3 - s1 * c2 * s3
        return Q
    new_rotate_euler = classmethod(new_rotate_euler)

    def new_rotate_matrix(cls, m):
      if m[0*4 + 0] + m[1*4 + 1] + m[2*4 + 2] > 0.00000001:
        t = m[0*4 + 0] + m[1*4 + 1] + m[2*4 + 2] + 1.0
        s = 0.5/math.sqrt(t)

        return cls(
          s*t,
          (m[1*4 + 2] - m[2*4 + 1])*s,
          (m[2*4 + 0] - m[0*4 + 2])*s,
          (m[0*4 + 1] - m[1*4 + 0])*s
          )

      elif m[0*4 + 0] > m[1*4 + 1] and m[0*4 + 0] > m[2*4 + 2]:
        t = m[0*4 + 0] - m[1*4 + 1] - m[2*4 + 2] + 1.0
        s = 0.5/math.sqrt(t)

        return cls(
          (m[1*4 + 2] - m[2*4 + 1])*s,
          s*t,
          (m[0*4 + 1] + m[1*4 + 0])*s,
          (m[2*4 + 0] + m[0*4 + 2])*s
          )

      elif m[1*4 + 1] > m[2*4 + 2]:
        t = -m[0*4 + 0] + m[1*4 + 1] - m[2*4 + 2] + 1.0
        s = 0.5/math.sqrt(t)

        return cls(
          (m[2*4 + 0] - m[0*4 + 2])*s,
          (m[0*4 + 1] + m[1*4 + 0])*s,
          s*t,
          (m[1*4 + 2] + m[2*4 + 1])*s
          )

      else:
        t = -m[0*4 + 0] - m[1*4 + 1] + m[2*4 + 2] + 1.0
        s = 0.5/math.sqrt(t)

        return cls(
          (m[0*4 + 1] - m[1*4 + 0])*s,
          (m[2*4 + 0] + m[0*4 + 2])*s,
          (m[1*4 + 2] + m[2*4 + 1])*s,
          s*t
          )
    new_rotate_matrix = classmethod(new_rotate_matrix)

    def new_interpolate(cls, q1, q2, t):
        assert isinstance(q1, Quaternion) and isinstance(q2, Quaternion)
        Q = cls()

        costheta = q1.w * q2.w + q1.x * q2.x + q1.y * q2.y + q1.z * q2.z
        if costheta < 0.:
            costheta = -costheta
            q1 = q1.conjugated()
        elif costheta > 1:
            costheta = 1

        theta = math.acos(costheta)
        if abs(theta) < 0.01:
            Q.w = q2.w
            Q.x = q2.x
            Q.y = q2.y
            Q.z = q2.z
            return Q

        sintheta = math.sqrt(1.0 - costheta * costheta)
        if abs(sintheta) < 0.01:
            Q.w = (q1.w + q2.w) * 0.5
            Q.x = (q1.x + q2.x) * 0.5
            Q.y = (q1.y + q2.y) * 0.5
            Q.z = (q1.z + q2.z) * 0.5
            return Q

        ratio1 = math.sin((1 - t) * theta) / sintheta
        ratio2 = math.sin(t * theta) / sintheta

        Q.w = q1.w * ratio1 + q2.w * ratio2
        Q.x = q1.x * ratio1 + q2.x * ratio2
        Q.y = q1.y * ratio1 + q2.y * ratio2
        Q.z = q1.z * ratio1 + q2.z * ratio2
        return Q
    new_interpolate = classmethod(new_interpolate)
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#ladybug.euclid.Quaternion">Quaternion</a></li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="ladybug.euclid.Quaternion.w" class="name">var <span class="ident">w</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Quaternion.x" class="name">var <span class="ident">x</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Quaternion.y" class="name">var <span class="ident">y</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Quaternion.z" class="name">var <span class="ident">z</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Quaternion.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, w=1, x=0, y=0, z=0)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Quaternion.__init__', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Quaternion.__init__" class="source">
    <pre><code>def __init__(self, w=1, x=0, y=0, z=0):
    self.w = w
    self.x = x
    self.y = y
    self.z = z
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Quaternion.conjugated">
    <p>def <span class="ident">conjugated</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Quaternion.conjugated', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Quaternion.conjugated" class="source">
    <pre><code>def conjugated(self):
    Q = Quaternion()
    Q.w = self.w
    Q.x = -self.x
    Q.y = -self.y
    Q.z = -self.z
    return Q
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Quaternion.copy">
    <p>def <span class="ident">copy</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Quaternion.copy', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Quaternion.copy" class="source">
    <pre><code>def __copy__(self):
    Q = Quaternion()
    Q.w = self.w
    Q.x = self.x
    Q.y = self.y
    Q.z = self.z
    return Q
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Quaternion.get_angle_axis">
    <p>def <span class="ident">get_angle_axis</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Quaternion.get_angle_axis', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Quaternion.get_angle_axis" class="source">
    <pre><code>def get_angle_axis(self):
    if self.w > 1:
        self = self.normalized()
    angle = 2 * math.acos(self.w)
    s = math.sqrt(1 - self.w ** 2)
    if s < 0.001:
        return angle, Vector3(1, 0, 0)
    else:
        return angle, Vector3(self.x / s, self.y / s, self.z / s)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Quaternion.get_euler">
    <p>def <span class="ident">get_euler</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Quaternion.get_euler', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Quaternion.get_euler" class="source">
    <pre><code>def get_euler(self):
    t = self.x * self.y + self.z * self.w
    if t > 0.4999:
        heading = 2 * math.atan2(self.x, self.w)
        attitude = math.pi / 2
        bank = 0
    elif t < -0.4999:
        heading = -2 * math.atan2(self.x, self.w)
        attitude = -math.pi / 2
        bank = 0
    else:
        sqx = self.x ** 2
        sqy = self.y ** 2
        sqz = self.z ** 2
        heading = math.atan2(2 * self.y * self.w - 2 * self.x * self.z,
                             1 - 2 * sqy - 2 * sqz)
        attitude = math.asin(2 * t)
        bank = math.atan2(2 * self.x * self.w - 2 * self.y * self.z,
                          1 - 2 * sqx - 2 * sqz)
    return heading, attitude, bank
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Quaternion.get_matrix">
    <p>def <span class="ident">get_matrix</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Quaternion.get_matrix', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Quaternion.get_matrix" class="source">
    <pre><code>def get_matrix(self):
    xx = self.x ** 2
    xy = self.x * self.y
    xz = self.x * self.z
    xw = self.x * self.w
    yy = self.y ** 2
    yz = self.y * self.z
    yw = self.y * self.w
    zz = self.z ** 2
    zw = self.z * self.w
    M = Matrix4()
    M.a = 1 - 2 * (yy + zz)
    M.b = 2 * (xy - zw)
    M.c = 2 * (xz + yw)
    M.e = 2 * (xy + zw)
    M.f = 1 - 2 * (xx + zz)
    M.g = 2 * (yz - xw)
    M.i = 2 * (xz - yw)
    M.j = 2 * (yz + xw)
    M.k = 1 - 2 * (xx + yy)
    return M
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Quaternion.identity">
    <p>def <span class="ident">identity</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Quaternion.identity', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Quaternion.identity" class="source">
    <pre><code>def identity(self):
    self.w = 1
    self.x = 0
    self.y = 0
    self.z = 0
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Quaternion.magnitude">
    <p>def <span class="ident">magnitude</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Quaternion.magnitude', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Quaternion.magnitude" class="source">
    <pre><code>def __abs__(self):
    return math.sqrt(self.w ** 2 + \
                     self.x ** 2 + \
                     self.y ** 2 + \
                     self.z ** 2)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Quaternion.magnitude_squared">
    <p>def <span class="ident">magnitude_squared</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Quaternion.magnitude_squared', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Quaternion.magnitude_squared" class="source">
    <pre><code>def magnitude_squared(self):
    return self.w ** 2 + \
           self.x ** 2 + \
           self.y ** 2 + \
           self.z ** 2
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Quaternion.new_identity">
    <p>def <span class="ident">new_identity</span>(</p><p>cls)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Quaternion.new_identity', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Quaternion.new_identity" class="source">
    <pre><code>def new_identity(cls):
    return cls()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Quaternion.new_interpolate">
    <p>def <span class="ident">new_interpolate</span>(</p><p>cls, q1, q2, t)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Quaternion.new_interpolate', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Quaternion.new_interpolate" class="source">
    <pre><code>def new_interpolate(cls, q1, q2, t):
    assert isinstance(q1, Quaternion) and isinstance(q2, Quaternion)
    Q = cls()
    costheta = q1.w * q2.w + q1.x * q2.x + q1.y * q2.y + q1.z * q2.z
    if costheta < 0.:
        costheta = -costheta
        q1 = q1.conjugated()
    elif costheta > 1:
        costheta = 1
    theta = math.acos(costheta)
    if abs(theta) < 0.01:
        Q.w = q2.w
        Q.x = q2.x
        Q.y = q2.y
        Q.z = q2.z
        return Q
    sintheta = math.sqrt(1.0 - costheta * costheta)
    if abs(sintheta) < 0.01:
        Q.w = (q1.w + q2.w) * 0.5
        Q.x = (q1.x + q2.x) * 0.5
        Q.y = (q1.y + q2.y) * 0.5
        Q.z = (q1.z + q2.z) * 0.5
        return Q
    ratio1 = math.sin((1 - t) * theta) / sintheta
    ratio2 = math.sin(t * theta) / sintheta
    Q.w = q1.w * ratio1 + q2.w * ratio2
    Q.x = q1.x * ratio1 + q2.x * ratio2
    Q.y = q1.y * ratio1 + q2.y * ratio2
    Q.z = q1.z * ratio1 + q2.z * ratio2
    return Q
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Quaternion.new_rotate_axis">
    <p>def <span class="ident">new_rotate_axis</span>(</p><p>cls, angle, axis)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Quaternion.new_rotate_axis', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Quaternion.new_rotate_axis" class="source">
    <pre><code>def new_rotate_axis(cls, angle, axis):
    assert(isinstance(axis, Vector3))
    axis = axis.normalized()
    s = math.sin(angle / 2)
    Q = cls()
    Q.w = math.cos(angle / 2)
    Q.x = axis.x * s
    Q.y = axis.y * s
    Q.z = axis.z * s
    return Q
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Quaternion.new_rotate_euler">
    <p>def <span class="ident">new_rotate_euler</span>(</p><p>cls, heading, attitude, bank)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Quaternion.new_rotate_euler', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Quaternion.new_rotate_euler" class="source">
    <pre><code>def new_rotate_euler(cls, heading, attitude, bank):
    Q = cls()
    c1 = math.cos(heading / 2)
    s1 = math.sin(heading / 2)
    c2 = math.cos(attitude / 2)
    s2 = math.sin(attitude / 2)
    c3 = math.cos(bank / 2)
    s3 = math.sin(bank / 2)
    Q.w = c1 * c2 * c3 - s1 * s2 * s3
    Q.x = s1 * s2 * c3 + c1 * c2 * s3
    Q.y = s1 * c2 * c3 + c1 * s2 * s3
    Q.z = c1 * s2 * c3 - s1 * c2 * s3
    return Q
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Quaternion.new_rotate_matrix">
    <p>def <span class="ident">new_rotate_matrix</span>(</p><p>cls, m)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Quaternion.new_rotate_matrix', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Quaternion.new_rotate_matrix" class="source">
    <pre><code>def new_rotate_matrix(cls, m):
  if m[0*4 + 0] + m[1*4 + 1] + m[2*4 + 2] > 0.00000001:
    t = m[0*4 + 0] + m[1*4 + 1] + m[2*4 + 2] + 1.0
    s = 0.5/math.sqrt(t)
    return cls(
      s*t,
      (m[1*4 + 2] - m[2*4 + 1])*s,
      (m[2*4 + 0] - m[0*4 + 2])*s,
      (m[0*4 + 1] - m[1*4 + 0])*s
      )
  elif m[0*4 + 0] > m[1*4 + 1] and m[0*4 + 0] > m[2*4 + 2]:
    t = m[0*4 + 0] - m[1*4 + 1] - m[2*4 + 2] + 1.0
    s = 0.5/math.sqrt(t)
    return cls(
      (m[1*4 + 2] - m[2*4 + 1])*s,
      s*t,
      (m[0*4 + 1] + m[1*4 + 0])*s,
      (m[2*4 + 0] + m[0*4 + 2])*s
      )
  elif m[1*4 + 1] > m[2*4 + 2]:
    t = -m[0*4 + 0] + m[1*4 + 1] - m[2*4 + 2] + 1.0
    s = 0.5/math.sqrt(t)
    return cls(
      (m[2*4 + 0] - m[0*4 + 2])*s,
      (m[0*4 + 1] + m[1*4 + 0])*s,
      s*t,
      (m[1*4 + 2] + m[2*4 + 1])*s
      )
  else:
    t = -m[0*4 + 0] - m[1*4 + 1] + m[2*4 + 2] + 1.0
    s = 0.5/math.sqrt(t)
    return cls(
      (m[0*4 + 1] - m[1*4 + 0])*s,
      (m[2*4 + 0] + m[0*4 + 2])*s,
      (m[1*4 + 2] + m[2*4 + 1])*s,
      s*t
      )
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Quaternion.normalize">
    <p>def <span class="ident">normalize</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Quaternion.normalize', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Quaternion.normalize" class="source">
    <pre><code>def normalize(self):
    d = self.magnitude()
    if d != 0:
        self.w /= d
        self.x /= d
        self.y /= d
        self.z /= d
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Quaternion.normalized">
    <p>def <span class="ident">normalized</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Quaternion.normalized', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Quaternion.normalized" class="source">
    <pre><code>def normalized(self):
    d = self.magnitude()
    if d != 0:
        Q = Quaternion()
        Q.w = self.w / d
        Q.x = self.x / d
        Q.y = self.y / d
        Q.z = self.z / d
        return Q
    else:
        return self.copy()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Quaternion.rotate_axis">
    <p>def <span class="ident">rotate_axis</span>(</p><p>self, angle, axis)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Quaternion.rotate_axis', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Quaternion.rotate_axis" class="source">
    <pre><code>def rotate_axis(self, angle, axis):
    self *= Quaternion.new_rotate_axis(angle, axis)
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Quaternion.rotate_euler">
    <p>def <span class="ident">rotate_euler</span>(</p><p>self, heading, attitude, bank)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Quaternion.rotate_euler', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Quaternion.rotate_euler" class="source">
    <pre><code>def rotate_euler(self, heading, attitude, bank):
    self *= Quaternion.new_rotate_euler(heading, attitude, bank)
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Quaternion.rotate_matrix">
    <p>def <span class="ident">rotate_matrix</span>(</p><p>self, m)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Quaternion.rotate_matrix', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Quaternion.rotate_matrix" class="source">
    <pre><code>def rotate_matrix(self, m):
    self *= Quaternion.new_rotate_matrix(m)
    return self
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="ladybug.euclid.Ray2" class="name">class <span class="ident">Ray2</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Ray2', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Ray2" class="source">
    <pre><code>class Ray2(Line2):
    def __repr__(self):
        return 'Ray2(<%.2f, %.2f> + u<%.2f, %.2f>)' % \
            (self.p.x, self.p.y, self.v.x, self.v.y)

    def _u_in(self, u):
        return u >= 0.0
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#ladybug.euclid.Ray2">Ray2</a></li>
          <li><a href="#ladybug.euclid.Line2">Line2</a></li>
          <li><a href="#ladybug.euclid.Geometry">Geometry</a></li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="ladybug.euclid.Ray2.p" class="name">var <span class="ident">p</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line2">Line2</a></code>.<code><a href="#ladybug.euclid.Line2.p">p</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Ray2.p1" class="name">var <span class="ident">p1</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line2">Line2</a></code>.<code><a href="#ladybug.euclid.Line2.p1">p1</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Ray2.p2" class="name">var <span class="ident">p2</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line2">Line2</a></code>.<code><a href="#ladybug.euclid.Line2.p2">p2</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Ray2.v" class="name">var <span class="ident">v</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line2">Line2</a></code>.<code><a href="#ladybug.euclid.Line2.v">v</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Ray2.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, *args)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line2">Line2</a></code>.<code><a href="#ladybug.euclid.Line2.__init__">__init__</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Ray2.__init__', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Ray2.__init__" class="source">
    <pre><code>def __init__(self, *args):
    if len(args) == 3:
        assert isinstance(args[0], Point2) and \
               isinstance(args[1], Vector2) and \
               type(args[2]) == float
        self.p = args[0].copy()
        self.v = args[1] * args[2] / abs(args[1])
    elif len(args) == 2:
        if isinstance(args[0], Point2) and isinstance(args[1], Point2):
            self.p = args[0].copy()
            self.v = args[1] - args[0]
        elif isinstance(args[0], Point2) and isinstance(args[1], Vector2):
            self.p = args[0].copy()
            self.v = args[1].copy()
        else:
            raise AttributeError, '%r' % (args,)
    elif len(args) == 1:
        if isinstance(args[0], Line2):
            self.p = args[0].p.copy()
            self.v = args[0].v.copy()
        else:
            raise AttributeError, '%r' % (args,)
    else:
        raise AttributeError, '%r' % (args,)
    if not self.v:
        raise AttributeError, 'Line has zero-length vector'
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Ray2.connect">
    <p>def <span class="ident">connect</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line2">Line2</a></code>.<code><a href="#ladybug.euclid.Line2.connect">connect</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Ray2.connect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Ray2.connect" class="source">
    <pre><code>def connect(self, other):
    return other._connect_line2(self)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Ray2.copy">
    <p>def <span class="ident">copy</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line2">Line2</a></code>.<code><a href="#ladybug.euclid.Line2.copy">copy</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Ray2.copy', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Ray2.copy" class="source">
    <pre><code>def __copy__(self):
    return self.__class__(self.p, self.v)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Ray2.distance">
    <p>def <span class="ident">distance</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line2">Line2</a></code>.<code><a href="#ladybug.euclid.Line2.distance">distance</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Ray2.distance', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Ray2.distance" class="source">
    <pre><code>def distance(self, other):
    c = self.connect(other)
    if c:
        return c.length
    return 0.0
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Ray2.intersect">
    <p>def <span class="ident">intersect</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line2">Line2</a></code>.<code><a href="#ladybug.euclid.Line2.intersect">intersect</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Ray2.intersect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Ray2.intersect" class="source">
    <pre><code>def intersect(self, other):
    return other._intersect_line2(self)
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="ladybug.euclid.Ray3" class="name">class <span class="ident">Ray3</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Ray3', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Ray3" class="source">
    <pre><code>class Ray3(Line3):
    def __repr__(self):
        return 'Ray3(<%.2f, %.2f, %.2f> + u<%.2f, %.2f, %.2f>)' % \
            (self.p.x, self.p.y, self.p.z, self.v.x, self.v.y, self.v.z)

    def _u_in(self, u):
        return u >= 0.0
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#ladybug.euclid.Ray3">Ray3</a></li>
          <li><a href="#ladybug.euclid.Line3">Line3</a></li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="ladybug.euclid.Ray3.p" class="name">var <span class="ident">p</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line3">Line3</a></code>.<code><a href="#ladybug.euclid.Line3.p">p</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Ray3.p1" class="name">var <span class="ident">p1</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line3">Line3</a></code>.<code><a href="#ladybug.euclid.Line3.p1">p1</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Ray3.p2" class="name">var <span class="ident">p2</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line3">Line3</a></code>.<code><a href="#ladybug.euclid.Line3.p2">p2</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Ray3.v" class="name">var <span class="ident">v</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line3">Line3</a></code>.<code><a href="#ladybug.euclid.Line3.v">v</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Ray3.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, *args)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line3">Line3</a></code>.<code><a href="#ladybug.euclid.Line3.__init__">__init__</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Ray3.__init__', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Ray3.__init__" class="source">
    <pre><code>def __init__(self, *args):
    if len(args) == 3:
        assert isinstance(args[0], Point3) and \
               isinstance(args[1], Vector3) and \
               type(args[2]) == float
        self.p = args[0].copy()
        self.v = args[1] * args[2] / abs(args[1])
    elif len(args) == 2:
        if isinstance(args[0], Point3) and isinstance(args[1], Point3):
            self.p = args[0].copy()
            self.v = args[1] - args[0]
        elif isinstance(args[0], Point3) and isinstance(args[1], Vector3):
            self.p = args[0].copy()
            self.v = args[1].copy()
        else:
            raise AttributeError, '%r' % (args,)
    elif len(args) == 1:
        if isinstance(args[0], Line3):
            self.p = args[0].p.copy()
            self.v = args[0].v.copy()
        else:
            raise AttributeError, '%r' % (args,)
    else:
        raise AttributeError, '%r' % (args,)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Ray3.connect">
    <p>def <span class="ident">connect</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line3">Line3</a></code>.<code><a href="#ladybug.euclid.Line3.connect">connect</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Ray3.connect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Ray3.connect" class="source">
    <pre><code>def connect(self, other):
    return other._connect_line3(self)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Ray3.copy">
    <p>def <span class="ident">copy</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line3">Line3</a></code>.<code><a href="#ladybug.euclid.Line3.copy">copy</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Ray3.copy', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Ray3.copy" class="source">
    <pre><code>def __copy__(self):
    return self.__class__(self.p, self.v)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Ray3.intersect">
    <p>def <span class="ident">intersect</span>(</p><p>self, other)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#ladybug.euclid.Line3">Line3</a></code>.<code><a href="#ladybug.euclid.Line3.intersect">intersect</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Ray3.intersect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Ray3.intersect" class="source">
    <pre><code>def intersect(self, other):
    return other._intersect_line3(self)
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="ladybug.euclid.Sphere" class="name">class <span class="ident">Sphere</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Sphere', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Sphere" class="source">
    <pre><code>class Sphere:
    __slots__ = ['c', 'r']

    def __init__(self, center, radius):
        assert isinstance(center, Vector3) and type(radius) == float
        self.c = center.copy()
        self.r = radius

    def __copy__(self):
        return self.__class__(self.c, self.r)

    copy = __copy__

    def __repr__(self):
        return 'Sphere(<%.2f, %.2f, %.2f>, radius=%.2f)' % \
            (self.c.x, self.c.y, self.c.z, self.r)

    def _apply_transform(self, t):
        self.c = t * self.c

    def intersect(self, other):
        return other._intersect_sphere(self)

    def _intersect_point3(self, other):
        return _intersect_point3_sphere(other, self)

    def _intersect_line3(self, other):
        return _intersect_line3_sphere(other, self)

    def connect(self, other):
        return other._connect_sphere(self)

    def _connect_point3(self, other):
        return _connect_point3_sphere(other, self)

    def _connect_line3(self, other):
        c = _connect_sphere_line3(self, other)
        if c:
            return c._swap()

    def _connect_sphere(self, other):
        return _connect_sphere_sphere(other, self)

    def _connect_plane(self, other):
        c = _connect_sphere_plane(self, other)
        if c:
            return c
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#ladybug.euclid.Sphere">Sphere</a></li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="ladybug.euclid.Sphere.c" class="name">var <span class="ident">c</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Sphere.r" class="name">var <span class="ident">r</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Sphere.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, center, radius)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Sphere.__init__', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Sphere.__init__" class="source">
    <pre><code>def __init__(self, center, radius):
    assert isinstance(center, Vector3) and type(radius) == float
    self.c = center.copy()
    self.r = radius
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Sphere.connect">
    <p>def <span class="ident">connect</span>(</p><p>self, other)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Sphere.connect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Sphere.connect" class="source">
    <pre><code>def connect(self, other):
    return other._connect_sphere(self)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Sphere.copy">
    <p>def <span class="ident">copy</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Sphere.copy', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Sphere.copy" class="source">
    <pre><code>def __copy__(self):
    return self.__class__(self.c, self.r)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Sphere.intersect">
    <p>def <span class="ident">intersect</span>(</p><p>self, other)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Sphere.intersect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Sphere.intersect" class="source">
    <pre><code>def intersect(self, other):
    return other._intersect_sphere(self)
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="ladybug.euclid.Vector2" class="name">class <span class="ident">Vector2</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector2', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector2" class="source">
    <pre><code>class Vector2:
    __slots__ = ['x', 'y']
    __hash__ = None

    def __init__(self, x=0, y=0):
        self.x = x
        self.y = y

    def __copy__(self):
        return self.__class__(self.x, self.y)

    copy = __copy__

    def __repr__(self):
        return 'Vector2(%.2f, %.2f)' % (self.x, self.y)

    def __eq__(self, other):
        if isinstance(other, Vector2):
            return self.x == other.x and \
                   self.y == other.y
        else:
            assert hasattr(other, '__len__') and len(other) == 2
            return self.x == other[0] and \
                   self.y == other[1]

    def __ne__(self, other):
        return not self.__eq__(other)

    def __nonzero__(self):
        return self.x != 0 or self.y != 0

    def __len__(self):
        return 2

    def __getitem__(self, key):
        return (self.x, self.y)[key]

    def __setitem__(self, key, value):
        l = [self.x, self.y]
        l[key] = value
        self.x, self.y = l

    def __iter__(self):
        return iter((self.x, self.y))

    def __getattr__(self, name):
        try:
            return tuple([(self.x, self.y)['xy'.index(c)] \
                          for c in name])
        except ValueError:
            raise AttributeError, name

    if _enable_swizzle_set:
        # This has detrimental performance on ordinary setattr as well
        # if enabled
        def __setattr__(self, name, value):
            if len(name) == 1:
                object.__setattr__(self, name, value)
            else:
                try:
                    l = [self.x, self.y]
                    for c, v in map(None, name, value):
                        l['xy'.index(c)] = v
                    self.x, self.y = l
                except ValueError:
                    raise AttributeError, name

    def __add__(self, other):
        if isinstance(other, Vector2):
            # Vector + Vector -> Vector
            # Vector + Point -> Point
            # Point + Point -> Vector
            if self.__class__ is other.__class__:
                _class = Vector2
            else:
                _class = Point2
            return _class(self.x + other.x,
                          self.y + other.y)
        else:
            assert hasattr(other, '__len__') and len(other) == 2
            return Vector2(self.x + other[0],
                           self.y + other[1])
    __radd__ = __add__

    def __iadd__(self, other):
        if isinstance(other, Vector2):
            self.x += other.x
            self.y += other.y
        else:
            self.x += other[0]
            self.y += other[1]
        return self

    def __sub__(self, other):
        if isinstance(other, Vector2):
            # Vector - Vector -> Vector
            # Vector - Point -> Point
            # Point - Point -> Vector
            if self.__class__ is other.__class__:
                _class = Vector2
            else:
                _class = Point2
            return _class(self.x - other.x,
                          self.y - other.y)
        else:
            assert hasattr(other, '__len__') and len(other) == 2
            return Vector2(self.x - other[0],
                           self.y - other[1])


    def __rsub__(self, other):
        if isinstance(other, Vector2):
            return Vector2(other.x - self.x,
                           other.y - self.y)
        else:
            assert hasattr(other, '__len__') and len(other) == 2
            return Vector2(other.x - self[0],
                           other.y - self[1])

    def __mul__(self, other):
        assert type(other) in (int, long, float)
        return Vector2(self.x * other,
                       self.y * other)

    __rmul__ = __mul__

    def __imul__(self, other):
        assert type(other) in (int, long, float)
        self.x *= other
        self.y *= other
        return self

    def __div__(self, other):
        assert type(other) in (int, long, float)
        return Vector2(operator.div(self.x, other),
                       operator.div(self.y, other))


    def __rdiv__(self, other):
        assert type(other) in (int, long, float)
        return Vector2(operator.div(other, self.x),
                       operator.div(other, self.y))

    def __floordiv__(self, other):
        assert type(other) in (int, long, float)
        return Vector2(operator.floordiv(self.x, other),
                       operator.floordiv(self.y, other))


    def __rfloordiv__(self, other):
        assert type(other) in (int, long, float)
        return Vector2(operator.floordiv(other, self.x),
                       operator.floordiv(other, self.y))

    def __truediv__(self, other):
        assert type(other) in (int, long, float)
        return Vector2(operator.truediv(self.x, other),
                       operator.truediv(self.y, other))


    def __rtruediv__(self, other):
        assert type(other) in (int, long, float)
        return Vector2(operator.truediv(other, self.x),
                       operator.truediv(other, self.y))

    def __neg__(self):
        return Vector2(-self.x,
                        -self.y)

    __pos__ = __copy__

    def __abs__(self):
        return math.sqrt(self.x ** 2 + \
                         self.y ** 2)

    magnitude = __abs__

    def magnitude_squared(self):
        return self.x ** 2 + \
               self.y ** 2

    def normalize(self):
        d = self.magnitude()
        if d:
            self.x /= d
            self.y /= d
        return self

    def normalized(self):
        d = self.magnitude()
        if d:
            return Vector2(self.x / d,
                           self.y / d)
        return self.copy()

    def dot(self, other):
        assert isinstance(other, Vector2)
        return self.x * other.x + \
               self.y * other.y

    def cross(self):
        return Vector2(self.y, -self.x)

    def reflect(self, normal):
        # assume normal is normalized
        assert isinstance(normal, Vector2)
        d = 2 * (self.x * normal.x + self.y * normal.y)
        return Vector2(self.x - d * normal.x,
                       self.y - d * normal.y)

    def angle(self, other):
        """Return the angle to the vector other"""
        return math.acos(self.dot(other) / (self.magnitude()*other.magnitude()))

    def project(self, other):
        """Return one vector projected on the vector other"""
        n = other.normalized()
        return self.dot(n)*n
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#ladybug.euclid.Vector2">Vector2</a></li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="ladybug.euclid.Vector2.x" class="name">var <span class="ident">x</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Vector2.y" class="name">var <span class="ident">y</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector2.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, x=0, y=0)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector2.__init__', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector2.__init__" class="source">
    <pre><code>def __init__(self, x=0, y=0):
    self.x = x
    self.y = y
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector2.angle">
    <p>def <span class="ident">angle</span>(</p><p>self, other)</p>
    </div>
    

    
  
    <div class="desc"><p>Return the angle to the vector other</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector2.angle', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector2.angle" class="source">
    <pre><code>def angle(self, other):
    """Return the angle to the vector other"""
    return math.acos(self.dot(other) / (self.magnitude()*other.magnitude()))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector2.copy">
    <p>def <span class="ident">copy</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector2.copy', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector2.copy" class="source">
    <pre><code>def __copy__(self):
    return self.__class__(self.x, self.y)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector2.cross">
    <p>def <span class="ident">cross</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector2.cross', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector2.cross" class="source">
    <pre><code>def cross(self):
    return Vector2(self.y, -self.x)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector2.dot">
    <p>def <span class="ident">dot</span>(</p><p>self, other)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector2.dot', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector2.dot" class="source">
    <pre><code>def dot(self, other):
    assert isinstance(other, Vector2)
    return self.x * other.x + \
           self.y * other.y
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector2.magnitude">
    <p>def <span class="ident">magnitude</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector2.magnitude', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector2.magnitude" class="source">
    <pre><code>def __abs__(self):
    return math.sqrt(self.x ** 2 + \
                     self.y ** 2)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector2.magnitude_squared">
    <p>def <span class="ident">magnitude_squared</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector2.magnitude_squared', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector2.magnitude_squared" class="source">
    <pre><code>def magnitude_squared(self):
    return self.x ** 2 + \
           self.y ** 2
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector2.normalize">
    <p>def <span class="ident">normalize</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector2.normalize', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector2.normalize" class="source">
    <pre><code>def normalize(self):
    d = self.magnitude()
    if d:
        self.x /= d
        self.y /= d
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector2.normalized">
    <p>def <span class="ident">normalized</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector2.normalized', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector2.normalized" class="source">
    <pre><code>def normalized(self):
    d = self.magnitude()
    if d:
        return Vector2(self.x / d,
                       self.y / d)
    return self.copy()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector2.project">
    <p>def <span class="ident">project</span>(</p><p>self, other)</p>
    </div>
    

    
  
    <div class="desc"><p>Return one vector projected on the vector other</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector2.project', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector2.project" class="source">
    <pre><code>def project(self, other):
    """Return one vector projected on the vector other"""
    n = other.normalized()
    return self.dot(n)*n
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector2.reflect">
    <p>def <span class="ident">reflect</span>(</p><p>self, normal)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector2.reflect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector2.reflect" class="source">
    <pre><code>def reflect(self, normal):
    # assume normal is normalized
    assert isinstance(normal, Vector2)
    d = 2 * (self.x * normal.x + self.y * normal.y)
    return Vector2(self.x - d * normal.x,
                   self.y - d * normal.y)
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="ladybug.euclid.Vector3" class="name">class <span class="ident">Vector3</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector3', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector3" class="source">
    <pre><code>class Vector3:
    __slots__ = ['x', 'y', 'z']
    __hash__ = None

    def __init__(self, x=0, y=0, z=0):
        self.x = x
        self.y = y
        self.z = z

    def __copy__(self):
        return self.__class__(self.x, self.y, self.z)

    copy = __copy__

    def __repr__(self):
        return 'Vector3(%.2f, %.2f, %.2f)' % (self.x,
                                              self.y,
                                              self.z)

    def __eq__(self, other):
        if isinstance(other, Vector3):
            return self.x == other.x and \
                   self.y == other.y and \
                   self.z == other.z
        else:
            assert hasattr(other, '__len__') and len(other) == 3
            return self.x == other[0] and \
                   self.y == other[1] and \
                   self.z == other[2]

    def __ne__(self, other):
        return not self.__eq__(other)

    def __nonzero__(self):
        return self.x != 0 or self.y != 0 or self.z != 0

    def __len__(self):
        return 3

    def __getitem__(self, key):
        return (self.x, self.y, self.z)[key]

    def __setitem__(self, key, value):
        l = [self.x, self.y, self.z]
        l[key] = value
        self.x, self.y, self.z = l

    def __iter__(self):
        return iter((self.x, self.y, self.z))

    def __getattr__(self, name):
        try:
            return tuple([(self.x, self.y, self.z)['xyz'.index(c)] \
                          for c in name])
        except ValueError:
            raise AttributeError, name

    if _enable_swizzle_set:
        # This has detrimental performance on ordinary setattr as well
        # if enabled
        def __setattr__(self, name, value):
            if len(name) == 1:
                object.__setattr__(self, name, value)
            else:
                try:
                    l = [self.x, self.y, self.z]
                    for c, v in map(None, name, value):
                        l['xyz'.index(c)] = v
                    self.x, self.y, self.z = l
                except ValueError:
                    raise AttributeError, name

    def __add__(self, other):
        if isinstance(other, Vector3):
            # Vector + Vector -> Vector
            # Vector + Point -> Point
            # Point + Point -> Vector
            if self.__class__ is other.__class__:
                _class = Vector3
            else:
                _class = Point3
            return _class(self.x + other.x,
                          self.y + other.y,
                          self.z + other.z)
        else:
            assert hasattr(other, '__len__') and len(other) == 3
            return Vector3(self.x + other[0],
                           self.y + other[1],
                           self.z + other[2])
    __radd__ = __add__

    def __iadd__(self, other):
        if isinstance(other, Vector3):
            self.x += other.x
            self.y += other.y
            self.z += other.z
        else:
            self.x += other[0]
            self.y += other[1]
            self.z += other[2]
        return self

    def __sub__(self, other):
        if isinstance(other, Vector3):
            # Vector - Vector -> Vector
            # Vector - Point -> Point
            # Point - Point -> Vector
            if self.__class__ is other.__class__:
                _class = Vector3
            else:
                _class = Point3
            return Vector3(self.x - other.x,
                           self.y - other.y,
                           self.z - other.z)
        else:
            assert hasattr(other, '__len__') and len(other) == 3
            return Vector3(self.x - other[0],
                           self.y - other[1],
                           self.z - other[2])


    def __rsub__(self, other):
        if isinstance(other, Vector3):
            return Vector3(other.x - self.x,
                           other.y - self.y,
                           other.z - self.z)
        else:
            assert hasattr(other, '__len__') and len(other) == 3
            return Vector3(other.x - self[0],
                           other.y - self[1],
                           other.z - self[2])

    def __mul__(self, other):
        if isinstance(other, Vector3):
            # TODO component-wise mul/div in-place and on Vector2; docs.
            if self.__class__ is Point3 or other.__class__ is Point3:
                _class = Point3
            else:
                _class = Vector3
            return _class(self.x * other.x,
                          self.y * other.y,
                          self.z * other.z)
        else:
            assert type(other) in (int, long, float)
            return Vector3(self.x * other,
                           self.y * other,
                           self.z * other)

    __rmul__ = __mul__

    def __imul__(self, other):
        assert type(other) in (int, long, float)
        self.x *= other
        self.y *= other
        self.z *= other
        return self

    def __div__(self, other):
        assert type(other) in (int, long, float)
        return Vector3(operator.div(self.x, other),
                       operator.div(self.y, other),
                       operator.div(self.z, other))


    def __rdiv__(self, other):
        assert type(other) in (int, long, float)
        return Vector3(operator.div(other, self.x),
                       operator.div(other, self.y),
                       operator.div(other, self.z))

    def __floordiv__(self, other):
        assert type(other) in (int, long, float)
        return Vector3(operator.floordiv(self.x, other),
                       operator.floordiv(self.y, other),
                       operator.floordiv(self.z, other))


    def __rfloordiv__(self, other):
        assert type(other) in (int, long, float)
        return Vector3(operator.floordiv(other, self.x),
                       operator.floordiv(other, self.y),
                       operator.floordiv(other, self.z))

    def __truediv__(self, other):
        assert type(other) in (int, long, float)
        return Vector3(operator.truediv(self.x, other),
                       operator.truediv(self.y, other),
                       operator.truediv(self.z, other))


    def __rtruediv__(self, other):
        assert type(other) in (int, long, float)
        return Vector3(operator.truediv(other, self.x),
                       operator.truediv(other, self.y),
                       operator.truediv(other, self.z))

    def __neg__(self):
        return Vector3(-self.x,
                        -self.y,
                        -self.z)

    __pos__ = __copy__

    def __abs__(self):
        return math.sqrt(self.x ** 2 + \
                         self.y ** 2 + \
                         self.z ** 2)

    magnitude = __abs__

    def magnitude_squared(self):
        return self.x ** 2 + \
               self.y ** 2 + \
               self.z ** 2

    def normalize(self):
        d = self.magnitude()
        if d:
            self.x /= d
            self.y /= d
            self.z /= d
        return self

    def normalized(self):
        d = self.magnitude()
        if d:
            return Vector3(self.x / d,
                           self.y / d,
                           self.z / d)
        return self.copy()

    def flip(self):
        """Flip vector"""
        # added by Mostapha Sadeghipour
        self.x = -self.x
        self.y = -self.y
        self.z = -self.z
        return self

    def flipped(self):
        """Calculate a flipped vector"""
        # added by Mostapha Sadeghipour
        return Vector3(-self.x,
                        -self.y,
                        -self.z)

    def dot(self, other):
        assert isinstance(other, Vector3)
        return self.x * other.x + \
               self.y * other.y + \
               self.z * other.z

    def cross(self, other):
        assert isinstance(other, Vector3)
        return Vector3(self.y * other.z - self.z * other.y,
                       -self.x * other.z + self.z * other.x,
                       self.x * other.y - self.y * other.x)

    def reflect(self, normal):
        # assume normal is normalized
        assert isinstance(normal, Vector3)
        d = 2 * (self.x * normal.x + self.y * normal.y + self.z * normal.z)
        return Vector3(self.x - d * normal.x,
                       self.y - d * normal.y,
                       self.z - d * normal.z)

    def rotate_around(self, axis, theta):
        """Return the vector rotated around axis through angle theta. Right hand rule applies"""

        # Adapted from equations published by Glenn Murray.
        # http://inside.mines.edu/~gmurray/ArbitraryAxisRotation/ArbitraryAxisRotation.html
        x, y, z = self.x, self.y,self.z
        u, v, w = axis.x, axis.y, axis.z

        # Extracted common factors for simplicity and efficiency
        r2 = u**2 + v**2 + w**2
        r = math.sqrt(r2)
        ct = math.cos(theta)
        st = math.sin(theta) / r
        dt = (u*x + v*y + w*z) * (1 - ct) / r2
        return Vector3((u * dt + x * ct + (-w * y + v * z) * st),
                       (v * dt + y * ct + ( w * x - u * z) * st),
                       (w * dt + z * ct + (-v * x + u * y) * st))

    def angle(self, other):
        """Return the angle to the vector other"""
        return math.acos(self.dot(other) / (self.magnitude()*other.magnitude()))

    def project(self, other):
        """Return one vector projected on the vector other"""
        n = other.normalized()
        return self.dot(n)*n
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#ladybug.euclid.Vector3">Vector3</a></li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="ladybug.euclid.Vector3.x" class="name">var <span class="ident">x</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Vector3.y" class="name">var <span class="ident">y</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="ladybug.euclid.Vector3.z" class="name">var <span class="ident">z</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector3.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, x=0, y=0, z=0)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector3.__init__', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector3.__init__" class="source">
    <pre><code>def __init__(self, x=0, y=0, z=0):
    self.x = x
    self.y = y
    self.z = z
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector3.angle">
    <p>def <span class="ident">angle</span>(</p><p>self, other)</p>
    </div>
    

    
  
    <div class="desc"><p>Return the angle to the vector other</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector3.angle', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector3.angle" class="source">
    <pre><code>def angle(self, other):
    """Return the angle to the vector other"""
    return math.acos(self.dot(other) / (self.magnitude()*other.magnitude()))
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector3.copy">
    <p>def <span class="ident">copy</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector3.copy', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector3.copy" class="source">
    <pre><code>def __copy__(self):
    return self.__class__(self.x, self.y, self.z)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector3.cross">
    <p>def <span class="ident">cross</span>(</p><p>self, other)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector3.cross', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector3.cross" class="source">
    <pre><code>def cross(self, other):
    assert isinstance(other, Vector3)
    return Vector3(self.y * other.z - self.z * other.y,
                   -self.x * other.z + self.z * other.x,
                   self.x * other.y - self.y * other.x)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector3.dot">
    <p>def <span class="ident">dot</span>(</p><p>self, other)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector3.dot', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector3.dot" class="source">
    <pre><code>def dot(self, other):
    assert isinstance(other, Vector3)
    return self.x * other.x + \
           self.y * other.y + \
           self.z * other.z
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector3.flip">
    <p>def <span class="ident">flip</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Flip vector</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector3.flip', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector3.flip" class="source">
    <pre><code>def flip(self):
    """Flip vector"""
    # added by Mostapha Sadeghipour
    self.x = -self.x
    self.y = -self.y
    self.z = -self.z
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector3.flipped">
    <p>def <span class="ident">flipped</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Calculate a flipped vector</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector3.flipped', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector3.flipped" class="source">
    <pre><code>def flipped(self):
    """Calculate a flipped vector"""
    # added by Mostapha Sadeghipour
    return Vector3(-self.x,
                    -self.y,
                    -self.z)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector3.magnitude">
    <p>def <span class="ident">magnitude</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector3.magnitude', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector3.magnitude" class="source">
    <pre><code>def __abs__(self):
    return math.sqrt(self.x ** 2 + \
                     self.y ** 2 + \
                     self.z ** 2)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector3.magnitude_squared">
    <p>def <span class="ident">magnitude_squared</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector3.magnitude_squared', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector3.magnitude_squared" class="source">
    <pre><code>def magnitude_squared(self):
    return self.x ** 2 + \
           self.y ** 2 + \
           self.z ** 2
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector3.normalize">
    <p>def <span class="ident">normalize</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector3.normalize', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector3.normalize" class="source">
    <pre><code>def normalize(self):
    d = self.magnitude()
    if d:
        self.x /= d
        self.y /= d
        self.z /= d
    return self
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector3.normalized">
    <p>def <span class="ident">normalized</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector3.normalized', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector3.normalized" class="source">
    <pre><code>def normalized(self):
    d = self.magnitude()
    if d:
        return Vector3(self.x / d,
                       self.y / d,
                       self.z / d)
    return self.copy()
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector3.project">
    <p>def <span class="ident">project</span>(</p><p>self, other)</p>
    </div>
    

    
  
    <div class="desc"><p>Return one vector projected on the vector other</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector3.project', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector3.project" class="source">
    <pre><code>def project(self, other):
    """Return one vector projected on the vector other"""
    n = other.normalized()
    return self.dot(n)*n
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector3.reflect">
    <p>def <span class="ident">reflect</span>(</p><p>self, normal)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector3.reflect', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector3.reflect" class="source">
    <pre><code>def reflect(self, normal):
    # assume normal is normalized
    assert isinstance(normal, Vector3)
    d = 2 * (self.x * normal.x + self.y * normal.y + self.z * normal.z)
    return Vector3(self.x - d * normal.x,
                   self.y - d * normal.y,
                   self.z - d * normal.z)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="ladybug.euclid.Vector3.rotate_around">
    <p>def <span class="ident">rotate_around</span>(</p><p>self, axis, theta)</p>
    </div>
    

    
  
    <div class="desc"><p>Return the vector rotated around axis through angle theta. Right hand rule applies</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-ladybug.euclid.Vector3.rotate_around', this);">Show source &equiv;</a></p>
  <div id="source-ladybug.euclid.Vector3.rotate_around" class="source">
    <pre><code>def rotate_around(self, axis, theta):
    """Return the vector rotated around axis through angle theta. Right hand rule applies"""
    # Adapted from equations published by Glenn Murray.
    # http://inside.mines.edu/~gmurray/ArbitraryAxisRotation/ArbitraryAxisRotation.html
    x, y, z = self.x, self.y,self.z
    u, v, w = axis.x, axis.y, axis.z
    # Extracted common factors for simplicity and efficiency
    r2 = u**2 + v**2 + w**2
    r = math.sqrt(r2)
    ct = math.cos(theta)
    st = math.sin(theta) / r
    dt = (u*x + v*y + w*z) * (1 - ct) / r2
    return Vector3((u * dt + x * ct + (-w * y + v * z) * st),
                   (v * dt + y * ct + ( w * x - u * z) * st),
                   (w * dt + z * ct + (-v * x + u * y) * st))
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.1</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a>
    </p>
  </footer>
</div>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
